/*! For license information please see wmvts-standalone.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["wmvts-standalone"]=t():e["wmvts-standalone"]=t()}(this,(()=>(()=>{var e={207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FirstPersonCamera=void 0;const n=r(1278),a=r(9174);var o;!function(e){e[e.None=0]="None",e[e.Positive=1]="Positive",e[e.Negative=-1]="Negative"}(o||(o={}));class i extends a.Camera{constructor(){super(),this.cameraMatrix=n.Float44.identity(),this.position=n.Float3.create(0,0,0),this.pitch=0,this.yaw=Math.PI,this.xMovement=o.None,this.yMovement=o.None,this.zMovement=o.None,this.movementSpeed=50,this.isDraggingMouse=!1}initialize(e){super.initialize(e),e.containerElement&&(this.onMouseDown=this.handleMouseDown.bind(this),this.onTouchStart=this.handleTouchStart.bind(this),this.engine.containerElement.addEventListener("mousedown",this.onMouseDown),this.engine.containerElement.addEventListener("touchstart",this.onTouchStart)),document&&(this.onMouseUp=this.handleDragRelease.bind(this),this.onTouchEnd=this.handleDragRelease.bind(this),this.onMouseMove=this.handleMouseMove.bind(this),this.onTouchMove=this.handleTouchMove.bind(this),this.onKeyUp=this.handleKeyDown.bind(this),this.onKeyDown=this.handleKeyUp.bind(this),document.addEventListener("keydown",this.onKeyUp),document.addEventListener("keyup",this.onKeyDown),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("touchend",this.onTouchEnd),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove))}update(e){const t=n.Float4.quatFromEulers(0,this.pitch,this.yaw),r=n.Float44.fromQuat(t),a=n.Float3.create(this.xMovement,this.yMovement,this.zMovement);n.Float3.normalize(a,a);const o=n.Float3.create(this.movementSpeed,this.movementSpeed,this.movementSpeed),i=n.Float3.create(e/1e3,e/1e3,e/1e3);n.Float3.multiply(o,i,o),n.Float3.multiply(o,a,a),n.Float44.transformPoint(a,r,a),n.Float3.add(a,this.position,this.position),n.Float44.identity(this.cameraMatrix),n.Float44.rotateX(this.cameraMatrix,Math.PI/180*90,this.cameraMatrix),n.Float44.translate(this.cameraMatrix,this.position,this.cameraMatrix),n.Float44.multiply(this.cameraMatrix,r,this.cameraMatrix),n.Float44.invert(this.cameraMatrix,this.viewMatrix)}dispose(){this.engine.containerElement&&(this.engine.containerElement.removeEventListener("mousedown",this.onMouseDown),this.engine.containerElement.removeEventListener("touchstart",this.onTouchStart),this.onMouseDown=null,this.onTouchStart=null),document&&(document.removeEventListener("keydown",this.onKeyUp),document.removeEventListener("keyup",this.onKeyDown),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchend",this.onTouchEnd),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove),this.onMouseUp=null,this.onTouchEnd=null,this.onMouseMove=null,this.onTouchMove=null,this.onKeyUp=null,this.onKeyDown=null),super.dispose()}resizeForBoundingBox(e){if(this.lastBoundingBox=e,e){const[t,r]=e;n.Float3.copy(r,this.position);const a=n.Float3.negate(this.position),o=Math.sqrt(a[0]*a[0]+a[2]*a[2]);this.pitch=Math.atan2(a[1],o),this.yaw=Math.atan2(a[0],a[2])}}handleKeyDown(e){switch(e.key.toUpperCase()){case"W":return this.zMovement=o.Negative,!1;case"S":return this.zMovement=o.Positive,!1;case"A":return this.xMovement=o.Negative,!1;case"D":return this.xMovement=o.Positive,!1;case"Q":return this.yMovement=o.Positive,!1;case"E":return this.yMovement=o.Negative,!1}return!0}handleKeyUp(e){switch(e.key.toUpperCase()){case"W":case"S":return this.zMovement=o.None,!1;case"A":case"D":return this.xMovement=o.None,!1;case"Q":case"E":return this.yMovement=o.None,!1}return!0}handleMouseDown(e){2!=e.button&&(this.isDraggingMouse=!0,e.preventDefault(),this.engine.containerElement&&this.engine.containerElement.requestPointerLock())}handleTouchStart(e){e.preventDefault(),this.engine.containerElement&&this.engine.containerElement.requestPointerLock()}handleMouseMove(e){this.isDraggingMouse&&this.handleDrag(e.movementX,e.movementY)}handleTouchMove(e){this.handleDrag(e.touches[0].clientX,e.touches[0].clientY)}handleDrag(e,t){const r=Math.PI/180/4,n=e*r,a=t*r;this.pitch+=n,this.yaw+=a}handleDragRelease(){this.isDraggingMouse=!1,document&&document.exitPointerLock()}}t.FirstPersonCamera=i},269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebGlNativeVertexArrayObject=t.WebGLShaderProgram=t.WebGlVertexDataBuffer=t.WebGLVertexIndexBuffer=t.WebGlVertexAttribPointer=t.WebGLTextureAbstraction=t.WebGlGraphics=void 0;const n=r(7983),a=r(2388),o=r(7690);class i extends o.CachedGraphics{constructor(e){super(),this.gl=e,this.glVaoExt=e.getExtension("OES_vertex_array_object")}startFrame(e,t){super.startFrame(e,t),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,e,t),this.gl.depthFunc(this.gl.LEQUAL)}clearFrame(e){this.gl.clearColor(e[0],e[1],e[2],e[3]),this.gl.depthMask(!0),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}activateBlendMode(e){switch(e===a.GxBlend.GxBlend_Opaque?this.gl.disable(this.gl.BLEND):(this.gl.enable(this.gl.BLEND),this.gl.blendEquation(this.gl.FUNC_ADD)),e){case a.GxBlend.GxBlend_Opaque:break;case a.GxBlend.GxBlend_AlphaKey:this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ZERO,this.gl.ONE,this.gl.ONE);break;case a.GxBlend.GxBlend_Alpha:this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA);break;case a.GxBlend.GxBlend_Add:this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE,this.gl.ZERO,this.gl.ONE);break;case a.GxBlend.GxBlend_Mod:this.gl.blendFuncSeparate(this.gl.DST_COLOR,this.gl.ZERO,this.gl.DST_ALPHA,this.gl.ZERO);break;case a.GxBlend.GxBlend_Mod2x:this.gl.blendFuncSeparate(this.gl.DST_COLOR,this.gl.SRC_COLOR,this.gl.DST_ALPHA,this.gl.SRC_ALPHA);break;case a.GxBlend.GxBlend_ModAdd:this.gl.blendFuncSeparate(this.gl.DST_COLOR,this.gl.ONE,this.gl.DST_ALPHA,this.gl.ONE);break;case a.GxBlend.GxBlend_InvSrcAlphaAdd:this.gl.blendFuncSeparate(this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE);break;case a.GxBlend.GxBlend_InvSrcAlphaOpaque:this.gl.blendFuncSeparate(this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ZERO,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ZERO);break;case a.GxBlend.GxBlend_SrcAlphaOpaque:this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ZERO,this.gl.SRC_ALPHA,this.gl.ZERO);break;case a.GxBlend.GxBlend_NoAlphaAdd:this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ONE,this.gl.ZERO,this.gl.ONE);break;case a.GxBlend.GxBlend_ConstantAlpha:this.gl.blendFuncSeparate(this.gl.CONSTANT_ALPHA,this.gl.ONE_MINUS_CONSTANT_ALPHA,this.gl.CONSTANT_ALPHA,this.gl.ONE_MINUS_CONSTANT_ALPHA);break;case a.GxBlend.GxBlend_Screen:this.gl.blendFuncSeparate(this.gl.ONE_MINUS_DST_COLOR,this.gl.ONE,this.gl.ONE,this.gl.ZERO);break;case a.GxBlend.GxBlend_BlendAdd:this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)}}activateDepthWrite(e){this.gl.depthMask(e)}activateDepthTest(e){this.useGlFeature(this.gl.DEPTH_TEST,e)}activateBackFaceCulling(e){this.useGlFeature(this.gl.CULL_FACE,e)}activateCounterClockWiseFrontFaces(e){e?this.gl.frontFace(this.gl.CCW):this.gl.frontFace(this.gl.CW)}activateColorMask(e){this.gl.colorMask((e&a.ColorMask.Red)>0,(e&a.ColorMask.Green)>0,(e&a.ColorMask.Blue)>0,(e&a.ColorMask.Alpha)>0)}drawTriangles(e,t){this.gl.drawArrays(this.gl.TRIANGLES,e,t)}drawIndexedTriangles(e,t){this.gl.drawElements(this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,e)}useGlFeature(e,t){t?this.gl.enable(e):this.gl.disable(e)}createSolidColorTexture(e){return new l(this.gl,(0,n.createTexture)(this.gl,{color:e,width:1,height:1}))}createTextureFromImg(e,t){return new l(this.gl,(0,n.createTexture)(this.gl,{premultiplyAlpha:0,src:e,auto:!0,wrapS:(null==t?void 0:t.clampS)?this.gl.CLAMP_TO_EDGE:this.gl.REPEAT,wrapT:(null==t?void 0:t.clampT)?this.gl.CLAMP_TO_EDGE:this.gl.REPEAT}))}createVertexIndexBuffer(e){return new u(this.gl,e)}createVertexDataBuffer(e,t){return new d(this.gl,e.map((e=>new s(this.gl,e.index,e.size,e.type?e.type:a.BufferDataType.Float,!!e.normalized,e.stride?e.stride:0,e.offset?e.offset:0))),t)}createShaderProgram(e,t){return new c(this.gl,e,t)}createVertexArrayObject(){return new h(this.gl,this.glVaoExt)}}t.WebGlGraphics=i;class l{constructor(e,t){this.gl=e,this.texture=t}bind(){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture)}unbind(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}}t.WebGLTextureAbstraction=l;class s{constructor(e,t,r,n,o,i,l){switch(this.gl=e,this.index=t,this.size=r,this.normalized=o,this.stride=i,this.offset=l,n){case a.BufferDataType.UInt8:this.type=e.UNSIGNED_BYTE;break;case a.BufferDataType.UInt16:this.type=e.UNSIGNED_SHORT;break;case a.BufferDataType.UInt32:this.type=e.UNSIGNED_INT;break;case a.BufferDataType.Int8:this.type=e.BYTE;break;case a.BufferDataType.Int16:this.type=e.SHORT;break;case a.BufferDataType.Int32:this.type=e.INT;break;case a.BufferDataType.Float:this.type=e.FLOAT}}bind(){this.gl.enableVertexAttribArray(this.index),this.gl.vertexAttribPointer(this.index,this.size,this.type,this.normalized,this.stride,this.offset)}unbind(){}}t.WebGlVertexAttribPointer=s;class u{constructor(e,t){this.gl=e,this.dynamic=t,this.buffer=e.createBuffer(),this.size=0}setData(e){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buffer),this.size<e.byteLength?(this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,e,this.dynamic?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.size=e.byteLength):this.gl.bufferSubData(this.gl.ELEMENT_ARRAY_BUFFER,0,e),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}bind(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buffer)}unbind(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}}t.WebGLVertexIndexBuffer=u;class d{constructor(e,t,r){this.gl=e,this.dynamic=r,this.buffer=e.createBuffer(),this.size=0,this.pointers=t}bind(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer);for(const e of this.pointers)e.bind()}unbind(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}setData(e){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.size<e.byteLength?(this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.dynamic?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.size=e.byteLength):this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,e),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}}t.WebGlVertexDataBuffer=d;class c{constructor(e,t,r){if(this.gl=e,this.programInfo=(0,n.createProgramInfo)(e,[t,r]),!this.programInfo)throw"Failed to create program"}getAttribLocation(e){return this.gl.getAttribLocation(this.programInfo.program,e)}bind(){this.gl.useProgram(this.programInfo.program)}useUniforms(e){for(let t in e)e[t]&&e[t].texture&&(e[t]=e[t].texture);(0,n.setUniforms)(this.programInfo,e)}unbind(){this.gl.useProgram(null)}}t.WebGLShaderProgram=c;class h{constructor(e,t){this.gl=e,this.glVaoExt=t,this.webGlVAO=t.createVertexArrayOES()}setIndexBuffer(e){this.bind(),e.bind(),this.unbind()}addVertexDataBuffer(e){this.bind(),e.bind(),this.unbind()}bind(){this.glVaoExt.bindVertexArrayOES(this.webGlVAO)}unbind(){this.glVaoExt.bindVertexArrayOES(null)}}t.WebGlNativeVertexArrayObject=h},1017:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(2388),t),a(r(7690),t),a(r(269),t),a(r(5716),t)},1278:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(6604),t),a(r(7518),t)},1447:(e,t,r)=>{"use strict";const n=r(3269),a=r(4823),o=r(9674),i=r(1998),{Z_FINISH:l,Z_BLOCK:s,Z_TREES:u,Z_OK:d,Z_STREAM_END:c,Z_NEED_DICT:h,Z_STREAM_ERROR:f,Z_DATA_ERROR:p,Z_MEM_ERROR:m,Z_BUF_ERROR:y,Z_DEFLATED:g}=r(9681),_=16180,v=16190,x=16191,b=16192,F=16194,C=16199,w=16200,S=16206,A=16209,E=16210,M=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function k(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const D=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<_||t.mode>16211?1:0},T=e=>{if(D(e))return f;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=_,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,d},B=e=>{if(D(e))return f;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,T(e)},L=(e,t)=>{let r;if(D(e))return f;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?f:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,B(e))},P=(e,t)=>{if(!e)return f;const r=new k;e.state=r,r.strm=e,r.window=null,r.mode=_;const n=L(e,t);return n!==d&&(e.state=null),n};let O,U,I=!0;const W=e=>{if(I){O=new Int32Array(512),U=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(i(1,e.lens,0,288,O,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;i(2,e.lens,0,32,U,0,e.work,{bits:5}),I=!1}e.lencode=O,e.lenbits=9,e.distcode=U,e.distbits=5},R=(e,t,r,n)=>{let a;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>n&&(a=n),o.window.set(t.subarray(r-n,r-n+a),o.wnext),(n-=a)?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0};e.exports.inflateReset=B,e.exports.inflateReset2=L,e.exports.inflateResetKeep=T,e.exports.inflateInit=e=>P(e,15),e.exports.inflateInit2=P,e.exports.inflate=(e,t)=>{let r,k,T,B,L,P,O,U,I,z,j,H,N,G,V,q,Z,K,Y,X,J,Q,$=0;const ee=new Uint8Array(4);let te,re;const ne=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(D(e)||!e.output||!e.input&&0!==e.avail_in)return f;r=e.state,r.mode===x&&(r.mode=b),L=e.next_out,T=e.output,O=e.avail_out,B=e.next_in,k=e.input,P=e.avail_in,U=r.hold,I=r.bits,z=P,j=O,Q=d;e:for(;;)switch(r.mode){case _:if(0===r.wrap){r.mode=b;break}for(;I<16;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}if(2&r.wrap&&35615===U){0===r.wbits&&(r.wbits=15),r.check=0,ee[0]=255&U,ee[1]=U>>>8&255,r.check=a(r.check,ee,2,0),U=0,I=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&U)<<8)+(U>>8))%31){e.msg="incorrect header check",r.mode=A;break}if((15&U)!==g){e.msg="unknown compression method",r.mode=A;break}if(U>>>=4,I-=4,J=8+(15&U),0===r.wbits&&(r.wbits=J),J>15||J>r.wbits){e.msg="invalid window size",r.mode=A;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&U?16189:x,U=0,I=0;break;case 16181:for(;I<16;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}if(r.flags=U,(255&r.flags)!==g){e.msg="unknown compression method",r.mode=A;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=A;break}r.head&&(r.head.text=U>>8&1),512&r.flags&&4&r.wrap&&(ee[0]=255&U,ee[1]=U>>>8&255,r.check=a(r.check,ee,2,0)),U=0,I=0,r.mode=16182;case 16182:for(;I<32;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}r.head&&(r.head.time=U),512&r.flags&&4&r.wrap&&(ee[0]=255&U,ee[1]=U>>>8&255,ee[2]=U>>>16&255,ee[3]=U>>>24&255,r.check=a(r.check,ee,4,0)),U=0,I=0,r.mode=16183;case 16183:for(;I<16;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}r.head&&(r.head.xflags=255&U,r.head.os=U>>8),512&r.flags&&4&r.wrap&&(ee[0]=255&U,ee[1]=U>>>8&255,r.check=a(r.check,ee,2,0)),U=0,I=0,r.mode=16184;case 16184:if(1024&r.flags){for(;I<16;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}r.length=U,r.head&&(r.head.extra_len=U),512&r.flags&&4&r.wrap&&(ee[0]=255&U,ee[1]=U>>>8&255,r.check=a(r.check,ee,2,0)),U=0,I=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(H=r.length,H>P&&(H=P),H&&(r.head&&(J=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(k.subarray(B,B+H),J)),512&r.flags&&4&r.wrap&&(r.check=a(r.check,k,H,B)),P-=H,B+=H,r.length-=H),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===P)break e;H=0;do{J=k[B+H++],r.head&&J&&r.length<65536&&(r.head.name+=String.fromCharCode(J))}while(J&&H<P);if(512&r.flags&&4&r.wrap&&(r.check=a(r.check,k,H,B)),P-=H,B+=H,J)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===P)break e;H=0;do{J=k[B+H++],r.head&&J&&r.length<65536&&(r.head.comment+=String.fromCharCode(J))}while(J&&H<P);if(512&r.flags&&4&r.wrap&&(r.check=a(r.check,k,H,B)),P-=H,B+=H,J)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;I<16;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}if(4&r.wrap&&U!==(65535&r.check)){e.msg="header crc mismatch",r.mode=A;break}U=0,I=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=x;break;case 16189:for(;I<32;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}e.adler=r.check=M(U),U=0,I=0,r.mode=v;case v:if(0===r.havedict)return e.next_out=L,e.avail_out=O,e.next_in=B,e.avail_in=P,r.hold=U,r.bits=I,h;e.adler=r.check=1,r.mode=x;case x:if(t===s||t===u)break e;case b:if(r.last){U>>>=7&I,I-=7&I,r.mode=S;break}for(;I<3;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}switch(r.last=1&U,U>>>=1,I-=1,3&U){case 0:r.mode=16193;break;case 1:if(W(r),r.mode=C,t===u){U>>>=2,I-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=A}U>>>=2,I-=2;break;case 16193:for(U>>>=7&I,I-=7&I;I<32;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}if((65535&U)!=(U>>>16^65535)){e.msg="invalid stored block lengths",r.mode=A;break}if(r.length=65535&U,U=0,I=0,r.mode=F,t===u)break e;case F:r.mode=16195;case 16195:if(H=r.length,H){if(H>P&&(H=P),H>O&&(H=O),0===H)break e;T.set(k.subarray(B,B+H),L),P-=H,B+=H,O-=H,L+=H,r.length-=H;break}r.mode=x;break;case 16196:for(;I<14;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}if(r.nlen=257+(31&U),U>>>=5,I-=5,r.ndist=1+(31&U),U>>>=5,I-=5,r.ncode=4+(15&U),U>>>=4,I-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=A;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;I<3;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}r.lens[ne[r.have++]]=7&U,U>>>=3,I-=3}for(;r.have<19;)r.lens[ne[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,te={bits:r.lenbits},Q=i(0,r.lens,0,19,r.lencode,0,r.work,te),r.lenbits=te.bits,Q){e.msg="invalid code lengths set",r.mode=A;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;$=r.lencode[U&(1<<r.lenbits)-1],V=$>>>24,q=$>>>16&255,Z=65535&$,!(V<=I);){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}if(Z<16)U>>>=V,I-=V,r.lens[r.have++]=Z;else{if(16===Z){for(re=V+2;I<re;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}if(U>>>=V,I-=V,0===r.have){e.msg="invalid bit length repeat",r.mode=A;break}J=r.lens[r.have-1],H=3+(3&U),U>>>=2,I-=2}else if(17===Z){for(re=V+3;I<re;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}U>>>=V,I-=V,J=0,H=3+(7&U),U>>>=3,I-=3}else{for(re=V+7;I<re;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}U>>>=V,I-=V,J=0,H=11+(127&U),U>>>=7,I-=7}if(r.have+H>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=A;break}for(;H--;)r.lens[r.have++]=J}}if(r.mode===A)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=A;break}if(r.lenbits=9,te={bits:r.lenbits},Q=i(1,r.lens,0,r.nlen,r.lencode,0,r.work,te),r.lenbits=te.bits,Q){e.msg="invalid literal/lengths set",r.mode=A;break}if(r.distbits=6,r.distcode=r.distdyn,te={bits:r.distbits},Q=i(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,te),r.distbits=te.bits,Q){e.msg="invalid distances set",r.mode=A;break}if(r.mode=C,t===u)break e;case C:r.mode=w;case w:if(P>=6&&O>=258){e.next_out=L,e.avail_out=O,e.next_in=B,e.avail_in=P,r.hold=U,r.bits=I,o(e,j),L=e.next_out,T=e.output,O=e.avail_out,B=e.next_in,k=e.input,P=e.avail_in,U=r.hold,I=r.bits,r.mode===x&&(r.back=-1);break}for(r.back=0;$=r.lencode[U&(1<<r.lenbits)-1],V=$>>>24,q=$>>>16&255,Z=65535&$,!(V<=I);){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}if(q&&!(240&q)){for(K=V,Y=q,X=Z;$=r.lencode[X+((U&(1<<K+Y)-1)>>K)],V=$>>>24,q=$>>>16&255,Z=65535&$,!(K+V<=I);){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}U>>>=K,I-=K,r.back+=K}if(U>>>=V,I-=V,r.back+=V,r.length=Z,0===q){r.mode=16205;break}if(32&q){r.back=-1,r.mode=x;break}if(64&q){e.msg="invalid literal/length code",r.mode=A;break}r.extra=15&q,r.mode=16201;case 16201:if(r.extra){for(re=r.extra;I<re;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}r.length+=U&(1<<r.extra)-1,U>>>=r.extra,I-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;$=r.distcode[U&(1<<r.distbits)-1],V=$>>>24,q=$>>>16&255,Z=65535&$,!(V<=I);){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}if(!(240&q)){for(K=V,Y=q,X=Z;$=r.distcode[X+((U&(1<<K+Y)-1)>>K)],V=$>>>24,q=$>>>16&255,Z=65535&$,!(K+V<=I);){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}U>>>=K,I-=K,r.back+=K}if(U>>>=V,I-=V,r.back+=V,64&q){e.msg="invalid distance code",r.mode=A;break}r.offset=Z,r.extra=15&q,r.mode=16203;case 16203:if(r.extra){for(re=r.extra;I<re;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}r.offset+=U&(1<<r.extra)-1,U>>>=r.extra,I-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=A;break}r.mode=16204;case 16204:if(0===O)break e;if(H=j-O,r.offset>H){if(H=r.offset-H,H>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=A;break}H>r.wnext?(H-=r.wnext,N=r.wsize-H):N=r.wnext-H,H>r.length&&(H=r.length),G=r.window}else G=T,N=L-r.offset,H=r.length;H>O&&(H=O),O-=H,r.length-=H;do{T[L++]=G[N++]}while(--H);0===r.length&&(r.mode=w);break;case 16205:if(0===O)break e;T[L++]=r.length,O--,r.mode=w;break;case S:if(r.wrap){for(;I<32;){if(0===P)break e;P--,U|=k[B++]<<I,I+=8}if(j-=O,e.total_out+=j,r.total+=j,4&r.wrap&&j&&(e.adler=r.check=r.flags?a(r.check,T,j,L-j):n(r.check,T,j,L-j)),j=O,4&r.wrap&&(r.flags?U:M(U))!==r.check){e.msg="incorrect data check",r.mode=A;break}U=0,I=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;I<32;){if(0===P)break e;P--,U+=k[B++]<<I,I+=8}if(4&r.wrap&&U!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=A;break}U=0,I=0}r.mode=16208;case 16208:Q=c;break e;case A:Q=p;break e;case E:return m;default:return f}return e.next_out=L,e.avail_out=O,e.next_in=B,e.avail_in=P,r.hold=U,r.bits=I,(r.wsize||j!==e.avail_out&&r.mode<A&&(r.mode<S||t!==l))&&R(e,e.output,e.next_out,j-e.avail_out)?(r.mode=E,m):(z-=e.avail_in,j-=e.avail_out,e.total_in+=z,e.total_out+=j,r.total+=j,4&r.wrap&&j&&(e.adler=r.check=r.flags?a(r.check,T,j,e.next_out-j):n(r.check,T,j,e.next_out-j)),e.data_type=r.bits+(r.last?64:0)+(r.mode===x?128:0)+(r.mode===C||r.mode===F?256:0),(0===z&&0===j||t===l)&&Q===d&&(Q=y),Q)},e.exports.inflateEnd=e=>{if(D(e))return f;let t=e.state;return t.window&&(t.window=null),e.state=null,d},e.exports.inflateGetHeader=(e,t)=>{if(D(e))return f;const r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,d):f},e.exports.inflateSetDictionary=(e,t)=>{const r=t.length;let a,o,i;return D(e)?f:(a=e.state,0!==a.wrap&&a.mode!==v?f:a.mode===v&&(o=1,o=n(o,t,r,0),o!==a.check)?p:(i=R(e,t,r,r),i?(a.mode=E,m):(a.havedict=1,d)))},e.exports.inflateInfo="pako inflate (from Nodeca project)"},1479:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="#ifndef MAX_BONES\r\n#define MAX_BONES 256\r\n#endif\r\n\r\nattribute vec3 a_position;\r\nattribute vec3 a_normal;\r\nattribute vec4 a_bones;\r\nattribute vec4 a_boneWeights;\r\nattribute vec2 a_texcoord1;\r\nattribute vec2 a_texcoord2;\r\n\r\nuniform mat4 u_textureTransformMatrix1;\r\nuniform mat4 u_textureTransformMatrix2;\r\nuniform mat4 u_modelMatrix;\r\nuniform mat4 u_viewMatrix;\r\nuniform mat4 u_projectionMatrix;\r\nuniform vec4 u_color;\r\nuniform int u_vertexShader;\r\n\r\nuniform mat4 u_boneMatrices[MAX_BONES];\r\n\r\nvarying vec3 v_normal;\r\nvarying vec4 v_color;\r\nvarying vec2 v_texCoord1;\r\nvarying vec2 v_texCoord2;\r\nvarying vec2 v_texCoord3;\r\n\r\nmat4 invert(mat4 inputMatrix) {\r\n    float\r\n        m00 = inputMatrix[0][0], m01 = inputMatrix[0][1], m02 = inputMatrix[0][2], m03 = inputMatrix[0][3],\r\n        m10 = inputMatrix[1][0], m11 = inputMatrix[1][1], m12 = inputMatrix[1][2], m13 = inputMatrix[1][3],\r\n        m20 = inputMatrix[2][0], m21 = inputMatrix[2][1], m22 = inputMatrix[2][2], m23 = inputMatrix[2][3],\r\n        m30 = inputMatrix[3][0], m31 = inputMatrix[3][1], m32 = inputMatrix[3][2], m33 = inputMatrix[3][3];\r\n\r\n    float \r\n        t0 = m00 * m11 - m01 * m10,\r\n        t1 = m00 * m12 - m02 * m10,\r\n        t2 = m00 * m13 - m03 * m10,\r\n        t3 = m01 * m12 - m02 * m11,\r\n        t4 = m01 * m13 - m03 * m11,\r\n        t5 = m02 * m13 - m03 * m12,\r\n        t6 = m20 * m31 - m21 * m30,\r\n        t7 = m20 * m32 - m22 * m30,\r\n        t8 = m20 * m33 - m23 * m30,\r\n        t9 = m21 * m32 - m22 * m31,\r\n        t10 = m21 * m33 - m23 * m31,\r\n        t11 = m22 * m33 - m23 * m32,\r\n        determinant = t0 * t11 - t1 * t10 + t2 * t9 + t3 * t8 - t4 * t7 + t5 * t6;\r\n\r\n    return mat4(\r\n        m11 * t11 - m12 * t10 + m13 * t9,\r\n        m02 * t10 - m01 * t11 - m03 * t9,\r\n        m31 * t5 - m32 * t4 + m33 * t3,\r\n        m22 * t4 - m21 * t5 - m23 * t3,\r\n        m12 * t8 - m10 * t11 - m13 * t7,\r\n        m00 * t11 - m02 * t8 + m03 * t7,\r\n        m32 * t2 - m30 * t5 - m33 * t1,\r\n        m20 * t5 - m22 * t2 + m23 * t1,\r\n        m10 * t10 - m11 * t8 + m13 * t6,\r\n        m01 * t8 - m00 * t10 - m03 * t6,\r\n        m30 * t4 - m31 * t2 + m33 * t0,\r\n        m21 * t2 - m20 * t4 - m23 * t0,\r\n        m11 * t7 - m10 * t9 - m12 * t6,\r\n        m00 * t9 - m01 * t7 + m02 * t6,\r\n        m31 * t1 - m30 * t3 - m32 * t0,\r\n        m20 * t3 - m21 * t1 + m22 * t0\r\n    ) / determinant;\r\n}\r\n\r\nhighp mat4 transpose(in highp mat4 inputMatrix) {\r\n    return mat4(\r\n        vec4(inputMatrix[0][0], inputMatrix[1][0], inputMatrix[2][0], inputMatrix[3][0]),\r\n        vec4(inputMatrix[0][1], inputMatrix[1][1], inputMatrix[2][1], inputMatrix[3][1]),\r\n        vec4(inputMatrix[0][2], inputMatrix[1][2], inputMatrix[2][2], inputMatrix[3][2]),\r\n        vec4(inputMatrix[0][3], inputMatrix[1][3], inputMatrix[2][3], inputMatrix[3][3])\r\n    );\r\n}\r\n\r\nvec2 posToTexCoord(vec3 pos, vec3 normal) {\r\n    vec3 reflection = reflect(normalize(pos), normal);\r\n    return normalize(reflection).xy * 0.5 + vec2(0.5);\r\n}   \r\n\r\nfloat edgeScan(vec3 position, vec3 normal){\r\n    float dotProductClamped = clamp(dot(-normalize(position),normal), 0., 1.);\r\n    return clamp(2.7 * dotProductClamped * dotProductClamped - 0.4, 0., 1.);\r\n}\r\n\r\nvoid main(void) {\r\n    mat4 boneTransformMatrix =  mat4(1.0);\r\n    if (length(a_boneWeights) > 0.0) {\r\n        boneTransformMatrix =  mat4(0.0);\r\n        for (int i = 0; i < 4; i++) {\r\n            boneTransformMatrix += u_boneMatrices[int(a_bones[i])] * a_boneWeights[i];\r\n        }\r\n    }\r\n\r\n    mat4 posMatrix = u_viewMatrix * u_modelMatrix * boneTransformMatrix;\r\n    vec4 pos = posMatrix * vec4(a_position, 1);\r\n    gl_Position = u_projectionMatrix * pos;\r\n\r\n    mat4 normalMatrix = transpose(invert(posMatrix));\r\n    v_normal = normalize((normalMatrix * vec4(a_normal, 0.0)).xyz);\r\n    \r\n    vec4 clampedColor = clamp(u_color, 0., 1.);\r\n    vec4 halfColor = clampedColor * 0.5;\r\n\r\n    if (u_vertexShader == 0) {\r\n        //Diffuse_T1\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n    } else if (u_vertexShader == 1) {\r\n        //Diffuse_Env\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = posToTexCoord(pos.xyz,normalize(v_normal.xyz));\r\n    } else if (u_vertexShader == 2) {\r\n        //Diffuse_T1_T2\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n        v_texCoord2 = (u_textureTransformMatrix2 * vec4(a_texcoord2, 0., 1.)).xy;\r\n    } else if (u_vertexShader == 3) {\r\n        //Diffuse_T1_Env\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n        v_texCoord2 = posToTexCoord(pos.xyz,normalize(v_normal.xyz));;\r\n    } else if (u_vertexShader == 4) {\r\n        //Diffuse_Env_T1\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = posToTexCoord(pos.xyz,normalize(v_normal.xyz));;\r\n        v_texCoord2 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n    } else if (u_vertexShader == 5 ) {\r\n        //Diffuse_Env_Env\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = posToTexCoord(pos.xyz,normalize(v_normal.xyz));;\r\n        v_texCoord2 = posToTexCoord(pos.xyz,normalize(v_normal.xyz));;\r\n    } else if ( u_vertexShader == 6 ) {\r\n        //Diffuse_T1_Env_T1\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.) ).xy;\r\n        v_texCoord2 = posToTexCoord(pos.xyz,normalize(v_normal.xyz));;\r\n        v_texCoord3 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n    } else if ( u_vertexShader == 7 ) {\r\n        //Diffuse_T1_T1\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n        v_texCoord2 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n    } else if ( u_vertexShader == 8 ) {\r\n        //Diffuse_T1_T1_T1\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n        v_texCoord2 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n        v_texCoord3 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n    } else if ( u_vertexShader == 9 ) {\r\n        //Diffuse_EdgeFade_T1\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a * edgeScan(pos.xyz, v_normal.rgb));\r\n        v_texCoord1 = ((u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy).xy;\r\n    } else if ( u_vertexShader == 10 ) {\r\n        //Diffuse_T2\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix2 * vec4(a_texcoord2, 0., 1.)).xy;\r\n    } else if ( u_vertexShader == 11 ) {\r\n        //Diffuse_T1_Env_T2\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n        v_texCoord2 = posToTexCoord(pos.xyz,normalize(v_normal.xyz));;\r\n        v_texCoord3 = (u_textureTransformMatrix2 * vec4(a_texcoord2, 0., 1.)).xy;\r\n    } else if ( u_vertexShader == 12 ) {\r\n        //Diffuse_EdgeFade_T1_T2\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a * edgeScan(pos.xyz, v_normal.rgb));\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n        v_texCoord2 = (u_textureTransformMatrix2 * vec4(a_texcoord2, 0., 1.)).xy;\r\n    } else if ( u_vertexShader == 13 ) {\r\n        //Diffuse_EdgeFade_Env\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a * edgeScan(pos.xyz, v_normal.rgb));\r\n        v_texCoord1 = posToTexCoord(pos.xyz,normalize(v_normal.xyz));;\r\n    } else if ( u_vertexShader == 14 ) {\r\n        //Diffuse_T1_T2_T1\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n        v_texCoord2 = (u_textureTransformMatrix2 * vec4(a_texcoord2, 0., 1.)).xy;\r\n        v_texCoord3 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n    } else if ( u_vertexShader == 15 ) {\r\n        //Diffuse_T1_T2_T3\r\n        v_color = vec4(halfColor.r, halfColor.g, halfColor.b, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n        v_texCoord2 = (u_textureTransformMatrix2 * vec4(a_texcoord2, 0., 1.)).xy;\r\n        v_texCoord3 = v_texCoord3;\r\n    } else if ( u_vertexShader == 16 ) {\r\n        //Color_T1_T2_T3\r\n        vec4 in_col0 = vec4(1.0, 1.0, 1.0, 1.0);\r\n        v_color = vec4((in_col0.rgb * 0.5).r, (in_col0.rgb * 0.5).g, (in_col0.rgb * 0.5).b, in_col0.a);\r\n        v_texCoord1 = (u_textureTransformMatrix2 * vec4(a_texcoord2, 0., 1.)).xy;\r\n        v_texCoord2 = vec2(0., 0.);\r\n        v_texCoord3 = v_texCoord3;\r\n    } else if ( u_vertexShader == 17 ) {\r\n        //BW_Diffuse_T1\r\n        v_color = vec4(clampedColor.rgb * 0.5, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n    } else if ( u_vertexShader == 18 ) {\r\n        //BW_Diffuse_T1_T2\r\n        v_color = vec4(clampedColor.rgb * 0.5, clampedColor.a);\r\n        v_texCoord1 = (u_textureTransformMatrix1 * vec4(a_texcoord1, 0., 1.)).xy;\r\n    }\r\n}\r\n"},1668:(e,t,r)=>{"use strict";const{Deflate:n,deflate:a,deflateRaw:o,gzip:i}=r(3303),{Inflate:l,inflate:s,inflateRaw:u,ungzip:d}=r(7083),c=r(9681);e.exports.Deflate=n,e.exports.deflate=a,e.exports.deflateRaw=o,e.exports.gzip=i,e.exports.Inflate=l,e.exports.inflate=s,e.exports.inflateRaw=u,e.exports.ungzip=d,e.exports.constants=c},1722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleProgressReporter=void 0;const n=r(4849);class a extends n.BaseProgressReporter{constructor(e,t){super(e),this.options=t,this.timeBetweenUpdates=20,this.addXPerUpdate=5,this.indeterminateProgressBarWidth=24,this.setupElements()}drawProgressFrame(){let e=parseInt(this.progressBar.style.left,10);const t=this.progressBackground.clientWidth,r=t-this.indeterminateProgressBarWidth;e+=this.addXPerUpdate,e>t?(e=this.addXPerUpdate,this.progressBar.style.width="0px"):e>r&&(this.progressBar.style.width=this.indeterminateProgressBarWidth-(e-r)+"px"),e==this.addXPerUpdate&&this.progressBar.clientWidth<this.indeterminateProgressBarWidth&&(this.progressBar.style.width=this.progressBar.clientWidth+e+"px",e=0),this.progressBar.style.left=e+"px"}setupElements(){var e;this.container.style.position="relative",this.progressContainer=document.createElement("div"),this.progressContainer.style.display="none",this.progressContainer.style.position="absolute",this.progressContainer.style.bottom="1em",this.progressContainer.style.right="0",this.progressContainer.style.left="0",this.progressContainer.style.width="100%",this.progressContainer.style.zIndex="1",this.container.appendChild(this.progressContainer),this.textContainer=document.createElement("p"),this.textContainer.style.position="relative",this.textContainer.style.margin="0",this.textContainer.style.color="white",this.textContainer.style.textAlign="center",this.textContainer.style.marginBottom="1em",this.progressContainer.appendChild(this.textContainer),this.progressBackground=document.createElement("div"),this.progressBackground.style.position="relative",this.progressBackground.style.marginInline="auto",this.progressBackground.style.width="50%",this.progressBackground.style.height="24px",this.progressBackground.style.background="#aaa",this.progressContainer.appendChild(this.progressBackground),this.progressBar=document.createElement("div"),this.progressBar.style.position="absolute",this.progressBar.style.background="#333",this.progressBar.style.left="0",this.progressBar.style.width="0",this.progressBar.style.height="24px",this.progressBar.style.height="24px",this.progressBackground.appendChild(this.progressBar),null===(e=this.options)||void 0===e||e.onSetupElements(this)}showElements(){this.progressContainer.style.display="block",this.textContainer.textContent=this.currentOperation}hideElements(){this.progressContainer.style.display="none",this.textContainer.textContent=""}}t.SimpleProgressReporter=a},1996:e=>{"use strict";let t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){t=!1}const r=new Uint8Array(256);for(let e=0;e<256;e++)r[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;r[254]=r[254]=1,e.exports.string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,a,o,i=e.length,l=0;for(a=0;a<i;a++)r=e.charCodeAt(a),55296==(64512&r)&&a+1<i&&(n=e.charCodeAt(a+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),o=0,a=0;o<l;a++)r=e.charCodeAt(a),55296==(64512&r)&&a+1<i&&(n=e.charCodeAt(a+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},e.exports.buf2string=(e,n)=>{const a=n||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,n));let o,i;const l=new Array(2*a);for(i=0,o=0;o<a;){let t=e[o++];if(t<128){l[i++]=t;continue}let n=r[t];if(n>4)l[i++]=65533,o+=n-1;else{for(t&=2===n?31:3===n?15:7;n>1&&o<a;)t=t<<6|63&e[o++],n--;n>1?l[i++]=65533:t<65536?l[i++]=t:(t-=65536,l[i++]=55296|t>>10&1023,l[i++]=56320|1023&t)}}return((e,r)=>{if(r<65534&&e.subarray&&t)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let n="";for(let t=0;t<r;t++)n+=String.fromCharCode(e[t]);return n})(l,i)},e.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+r[e[n]]>t?n:t}},1998:e=>{"use strict";const t=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),a=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);e.exports=(e,o,i,l,s,u,d,c)=>{const h=c.bits;let f,p,m,y,g,_,v=0,x=0,b=0,F=0,C=0,w=0,S=0,A=0,E=0,M=0,k=null;const D=new Uint16Array(16),T=new Uint16Array(16);let B,L,P,O=null;for(v=0;v<=15;v++)D[v]=0;for(x=0;x<l;x++)D[o[i+x]]++;for(C=h,F=15;F>=1&&0===D[F];F--);if(C>F&&(C=F),0===F)return s[u++]=20971520,s[u++]=20971520,c.bits=1,0;for(b=1;b<F&&0===D[b];b++);for(C<b&&(C=b),A=1,v=1;v<=15;v++)if(A<<=1,A-=D[v],A<0)return-1;if(A>0&&(0===e||1!==F))return-1;for(T[1]=0,v=1;v<15;v++)T[v+1]=T[v]+D[v];for(x=0;x<l;x++)0!==o[i+x]&&(d[T[o[i+x]]++]=x);if(0===e?(k=O=d,_=20):1===e?(k=t,O=r,_=257):(k=n,O=a,_=0),M=0,x=0,v=b,g=u,w=C,S=0,m=-1,E=1<<C,y=E-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){B=v-S,d[x]+1<_?(L=0,P=d[x]):d[x]>=_?(L=O[d[x]-_],P=k[d[x]-_]):(L=96,P=0),f=1<<v-S,p=1<<w,b=p;do{p-=f,s[g+(M>>S)+p]=B<<24|L<<16|P}while(0!==p);for(f=1<<v-1;M&f;)f>>=1;if(0!==f?(M&=f-1,M+=f):M=0,x++,0==--D[v]){if(v===F)break;v=o[i+d[x]]}if(v>C&&(M&y)!==m){for(0===S&&(S=C),g+=b,w=v-S,A=1<<w;w+S<F&&(A-=D[w+S],!(A<=0));)w++,A<<=1;if(E+=1<<w,1===e&&E>852||2===e&&E>592)return 1;m=M&y,s[m]=C<<24|w<<16|g-u}}return 0!==M&&(s[g+M]=v-S<<24|64<<16),c.bits=C,0}},2388:(e,t)=>{"use strict";var r,n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.M2BlendModeToEGxBlend=t.GxBlend=t.ColorMask=t.BufferDataType=void 0,function(e){e[e.Float=0]="Float",e[e.UInt8=1]="UInt8",e[e.UInt16=2]="UInt16",e[e.UInt32=3]="UInt32",e[e.Int8=4]="Int8",e[e.Int16=5]="Int16",e[e.Int32=6]="Int32"}(r||(t.BufferDataType=r={})),function(e){e[e.None=0]="None",e[e.Red=1]="Red",e[e.Green=2]="Green",e[e.Blue=4]="Blue",e[e.Alpha=8]="Alpha"}(n||(t.ColorMask=n={})),function(e){e[e.GxBlend_Invalid=-1]="GxBlend_Invalid",e[e.GxBlend_Opaque=0]="GxBlend_Opaque",e[e.GxBlend_AlphaKey=1]="GxBlend_AlphaKey",e[e.GxBlend_Alpha=2]="GxBlend_Alpha",e[e.GxBlend_Add=3]="GxBlend_Add",e[e.GxBlend_Mod=4]="GxBlend_Mod",e[e.GxBlend_Mod2x=5]="GxBlend_Mod2x",e[e.GxBlend_ModAdd=6]="GxBlend_ModAdd",e[e.GxBlend_InvSrcAlphaAdd=7]="GxBlend_InvSrcAlphaAdd",e[e.GxBlend_InvSrcAlphaOpaque=8]="GxBlend_InvSrcAlphaOpaque",e[e.GxBlend_SrcAlphaOpaque=9]="GxBlend_SrcAlphaOpaque",e[e.GxBlend_NoAlphaAdd=10]="GxBlend_NoAlphaAdd",e[e.GxBlend_ConstantAlpha=11]="GxBlend_ConstantAlpha",e[e.GxBlend_Screen=12]="GxBlend_Screen",e[e.GxBlend_BlendAdd=13]="GxBlend_BlendAdd"}(a||(t.GxBlend=a={}));const o=[a.GxBlend_Opaque,a.GxBlend_AlphaKey,a.GxBlend_Alpha,a.GxBlend_NoAlphaAdd,a.GxBlend_Add,a.GxBlend_Mod,a.GxBlend_Mod2x,a.GxBlend_BlendAdd];t.M2BlendModeToEGxBlend=e=>o[e]},2462:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(7716),t),a(r(6472),t),a(r(6098),t),a(r(5416),t)},2690:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.getWMOPixelShader=t.getWMOVertexShader=void 0,function(e){e[e.Diffuse=0]="Diffuse",e[e.Specular=1]="Specular",e[e.Metal=2]="Metal",e[e.Env=3]="Env",e[e.Opaque=4]="Opaque",e[e.EnvMetal=5]="EnvMetal",e[e.TwoLayerDiffuse=6]="TwoLayerDiffuse",e[e.TwoLayerEnvMetal=7]="TwoLayerEnvMetal",e[e.TwoLayerTerrain=8]="TwoLayerTerrain",e[e.DiffuseEmissive=9]="DiffuseEmissive",e[e.MaskedEnvMetal=10]="MaskedEnvMetal",e[e.EnvMetalEmissive=11]="EnvMetalEmissive",e[e.TwoLayerDiffuseOpaque=12]="TwoLayerDiffuseOpaque",e[e.TwoLayerDiffuseEmissive=13]="TwoLayerDiffuseEmissive",e[e.AdditiveMaskedEnvMetal=14]="AdditiveMaskedEnvMetal",e[e.TwoLayerDiffuseMod2x=15]="TwoLayerDiffuseMod2x",e[e.TwoLayerDiffuseMod2xNA=16]="TwoLayerDiffuseMod2xNA",e[e.TwoLayerDiffuseAlpha=17]="TwoLayerDiffuseAlpha",e[e.Lod=18]="Lod",e[e.Parallax=19]="Parallax",e[e.UnkShader=20]="UnkShader",e[e.None=21]="None"}(r||(r={})),function(e){e[e.DiffuseT1=0]="DiffuseT1",e[e.DiffuseT1Refl=1]="DiffuseT1Refl",e[e.DiffuseT1EnvT2=2]="DiffuseT1EnvT2",e[e.SpecularT1=3]="SpecularT1",e[e.DiffuseComp=4]="DiffuseComp",e[e.DiffuseCompRefl=5]="DiffuseCompRefl",e[e.DiffuseCompTerrain=6]="DiffuseCompTerrain",e[e.DiffuseCompAlpha=7]="DiffuseCompAlpha",e[e.Parallax=8]="Parallax",e[e.None=9]="None"}(n||(n={}));const a=[[n.DiffuseT1,r.Diffuse],[n.SpecularT1,r.Specular],[n.SpecularT1,r.Metal],[n.DiffuseT1Refl,r.Env],[n.DiffuseT1,r.Opaque],[n.DiffuseT1Refl,r.EnvMetal],[n.DiffuseComp,r.TwoLayerDiffuse],[n.DiffuseT1,r.TwoLayerEnvMetal],[n.DiffuseCompTerrain,r.TwoLayerTerrain],[n.DiffuseComp,r.DiffuseEmissive],[n.None,r.None],[n.DiffuseT1EnvT2,r.MaskedEnvMetal],[n.DiffuseT1EnvT2,r.EnvMetalEmissive],[n.DiffuseComp,r.TwoLayerDiffuseOpaque],[n.None,r.None],[n.DiffuseComp,r.TwoLayerDiffuseEmissive],[n.DiffuseT1,r.Diffuse],[n.DiffuseT1EnvT2,r.AdditiveMaskedEnvMetal],[n.DiffuseCompAlpha,r.TwoLayerDiffuseMod2x],[n.DiffuseComp,r.TwoLayerDiffuseMod2xNA],[n.DiffuseCompAlpha,r.TwoLayerDiffuseAlpha],[n.DiffuseT1,r.Lod],[n.Parallax,r.Parallax],[n.DiffuseT1,r.UnkShader]];t.getWMOVertexShader=e=>a[e][0],t.getWMOPixelShader=e=>a[e][1]},3030:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nvarying vec3 v_normal;\r\nvarying vec4 v_color;\r\nvarying vec2 v_texCoord1;\r\nvarying vec2 v_texCoord2;\r\nvarying vec2 v_texCoord3;\r\n\r\nuniform int u_blendMode;\r\nuniform int u_pixelShader;\r\nuniform bool u_unlit;\r\nuniform vec4 u_ambientColor;\r\nuniform vec4 u_lightColor;\r\nuniform vec3 u_lightDir;\r\nuniform sampler2D u_texture1;\r\nuniform sampler2D u_texture2;\r\nuniform sampler2D u_texture3;\r\nuniform sampler2D u_texture4;\r\nuniform vec4 u_textureWeights;\r\n        \r\nvoid main(void) {\r\n    vec4 outputColor = vec4(1.0);\r\n    vec3 specular = vec3(0.0);\r\n\r\n    vec4 tex1 = texture2D(u_texture1, v_texCoord1.st);\r\n    vec4 tex2 = texture2D(u_texture2, v_texCoord2.st);\r\n    vec4 tex3 = texture2D(u_texture3, v_texCoord3.st);\r\n\r\n    vec3 materialColor;\r\n    float discardAlpha = 1.0;\r\n    if ( u_pixelShader == 0 ) { \r\n        //Combiners_Opaque\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n    } else if ( u_pixelShader == 1 ) { \r\n        //Combiners_Mod\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        discardAlpha = tex1.a;\r\n    } else if ( u_pixelShader == 2 ) { \r\n        //Combiners_Opaque_Mod\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb * tex2.rgb;\r\n        discardAlpha = tex2.a;\r\n    } else if ( u_pixelShader == 3 ) { \r\n        //Combiners_Opaque_Mod2x\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb * tex2.rgb * 2.0;\r\n        discardAlpha = tex2.a * 2.0;\r\n    } else if ( u_pixelShader == 4 ) { \r\n        //Combiners_Opaque_Mod2xNA\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb * tex2.rgb * 2.0;\r\n    } else if ( u_pixelShader == 5 ) { \r\n        //Combiners_Opaque_Opaque\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb * tex2.rgb;\r\n    } else if ( u_pixelShader == 6 ) { \r\n        //Combiners_Mod_Mod\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb * tex2.rgb;\r\n        discardAlpha = tex1.a * tex2.a;\r\n    } else if ( u_pixelShader == 7 ) { \r\n        //Combiners_Mod_Mod2x\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb * tex2.rgb * 2.0;\r\n        discardAlpha = tex1.a * tex2.a * 2.0;\r\n    } else if ( u_pixelShader == 8 ) { \r\n        //Combiners_Mod_Add\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        discardAlpha = tex1.a + tex2.a;\r\n        specular = tex2.rgb;\r\n    } else if ( u_pixelShader == 9 ) { \r\n        //Combiners_Mod_Mod2xNA\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb * tex2.rgb * 2.0;\r\n        discardAlpha = tex1.a;\r\n    } else if ( u_pixelShader == 10 ) { \r\n        //Combiners_Mod_AddNA\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        discardAlpha = tex1.a;\r\n        specular = tex2.rgb;\r\n    } else if ( u_pixelShader == 11 ) { \r\n        //Combiners_Mod_Opaque\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb * tex2.rgb;\r\n        discardAlpha = tex1.a;\r\n    } else if ( u_pixelShader == 12 ) { \r\n        //Combiners_Opaque_Mod2xNA_Alpha\r\n        materialColor = v_color.rgb * 2.0 * mix(tex1.rgb * tex2.rgb * 2.0, tex1.rgb, vec3(tex1.a));\r\n    } else if ( u_pixelShader == 13 ) { \r\n        //Combiners_Opaque_AddAlpha\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        specular = tex2.rgb * tex2.a;\r\n    } else if ( u_pixelShader == 14 ) {\r\n        //Combiners_Opaque_AddAlpha_Alpha\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        specular = tex2.rgb * tex2.a * (1.0 - tex1.a);\r\n    } else if ( u_pixelShader == 15 ) {\r\n        //Combiners_Opaque_Mod2xNA_Alpha_Add\r\n        materialColor = v_color.rgb * 2.0 * mix(tex1.rgb * tex2.rgb * 2.0, tex1.rgb, vec3(tex1.a));\r\n        specular = tex3.rgb * tex3.a * u_textureWeights.b;\r\n    } else if ( u_pixelShader == 16 ) {\r\n        //Combiners_Mod_AddAlpha\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        discardAlpha = tex1.a;\r\n        specular = tex2.rgb * tex2.a;\r\n    } else if ( u_pixelShader == 17 ) {\r\n        //Combiners_Mod_AddAlpha_Alpha\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        discardAlpha = tex1.a + tex2.a * (0.3 * tex2.r + 0.59 * tex2.g + 0.11 * tex2.b);\r\n        specular = tex2.rgb * tex2.a * (1.0 - tex1.a);\r\n    } else if ( u_pixelShader == 18 ) {\r\n        //Combiners_Opaque_Alpha_Alpha\r\n        materialColor = v_color.rgb * 2.0 * mix(mix(tex1.rgb, tex2.rgb, vec3(tex2.a)), tex1.rgb, vec3(tex1.a));\r\n    } else if ( u_pixelShader == 19 ) { \r\n        //Combiners_Opaque_Mod2xNA_Alpha_3s\r\n        materialColor = v_color.rgb * 2.0 * mix(tex1.rgb * tex2.rgb * 2.0, tex3.rgb, vec3(tex3.a));\r\n    } else if ( u_pixelShader == 20 ) { \r\n        //Combiners_Opaque_AddAlpha_Wgt\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        specular = tex2.rgb * tex2.a * u_textureWeights.g;\r\n    } else if ( u_pixelShader == 21 ) {\r\n        //Combiners_Mod_Add_Alpha\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        discardAlpha = tex1.a + tex2.a;\r\n        specular = tex2.rgb * (1.0 - tex1.a);\r\n    } else if ( u_pixelShader == 22 ) { \r\n        //Combiners_Opaque_ModNA_Alpha\r\n        materialColor = v_color.rgb * 2.0 * mix(tex1.rgb * tex2.rgb, tex1.rgb, vec3(tex1.a));\r\n    } else if ( u_pixelShader == 23 ) { \r\n        //Combiners_Mod_AddAlpha_Wgt\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        discardAlpha = tex1.a;\r\n        specular = tex2.rgb * tex2.a * u_textureWeights.g;\r\n    } else if ( u_pixelShader == 24 ) { \r\n        //Combiners_Opaque_Mod_Add_Wgt\r\n        materialColor = v_color.rgb * 2.0 * mix(tex1.rgb, tex2.rgb, vec3(tex2.a));\r\n        specular = tex1.rgb * tex1.a * u_textureWeights.r;\r\n    } else if ( u_pixelShader == 25 ) { \r\n        //Combiners_Opaque_Mod2xNA_Alpha_UnshAlpha\r\n        float glowOpacity = clamp(tex3.a * u_textureWeights.b, 0.0, 1.0);\r\n        materialColor = v_color.rgb * 2.0 * mix(tex1.rgb * tex2.rgb * 2.0, tex1.rgb, vec3(tex1.a)) * (1.0 - glowOpacity);\r\n        specular = tex3.rgb * glowOpacity;\r\n    } else if ( u_pixelShader == 26 ) { \r\n        //Combiners_Mod_Dual_Crossfade\r\n        materialColor = v_color.rgb * 2.0 * mix(mix(tex1, texture2D(u_texture2, v_texCoord1), vec4(clamp(u_textureWeights.g, 0.0, 1.0))), texture2D(u_texture3,v_texCoord1), vec4(clamp(u_textureWeights.b, 0.0, 1.0))).rgb;\r\n        discardAlpha = mix(mix(tex1, texture2D(u_texture2, v_texCoord1), vec4(clamp(u_textureWeights.g, 0.0, 1.0))), texture2D(u_texture3,v_texCoord1), vec4(clamp(u_textureWeights.b, 0.0, 1.0))).a;\r\n    } else if ( u_pixelShader == 27 ) { \r\n        //Combiners_Opaque_Mod2xNA_Alpha_Alpha\r\n        materialColor = v_color.rgb * 2.0 * mix(mix(tex1.rgb * tex2.rgb * 2.0, tex3.rgb, vec3(tex3.a)), tex1.rgb, vec3(tex1.a));\r\n    } else if ( u_pixelShader == 28 ) { \r\n        //Combiners_Mod_Masked_Dual_Crossfade\r\n        materialColor = v_color.rgb * 2.0 * mix(mix(tex1, texture2D(u_texture2, v_texCoord1), vec4(clamp(u_textureWeights.g, 0.0, 1.0))), texture2D(u_texture3, v_texCoord1), vec4(clamp(u_textureWeights.b, 0.0, 1.0))).rgb;\r\n        discardAlpha = mix(mix(tex1, texture2D(u_texture2, v_texCoord1), vec4(clamp(u_textureWeights.g, 0.0, 1.0))), texture2D(u_texture3, v_texCoord1), vec4(clamp(u_textureWeights.b, 0.0, 1.0))).a * texture2D(u_texture4, v_texCoord2).a;\r\n    } else if ( u_pixelShader == 29 ) { \r\n        //Combiners_Opaque_Alpha\r\n        materialColor = v_color.rgb * 2.0 * mix(tex1.rgb, tex2.rgb, vec3(tex2.a));\r\n    } else if ( u_pixelShader == 30 ) {\r\n         //Guild\r\n        materialColor = v_color.rgb * 2.0 * mix(tex1.rgb * mix(vec3(1), tex2.rgb, vec3(tex2.a)), tex3.rgb, vec3(tex3.a));\r\n        discardAlpha = tex1.a;\r\n    } else if ( u_pixelShader == 31 ) { \r\n        //Guild_NoBorder\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb * mix(vec3(1), tex2.rgb, vec3(tex2.a));\r\n        discardAlpha = tex1.a;\r\n    } else if ( u_pixelShader == 32 ) { \r\n        //Guild_Opaque\r\n        materialColor = v_color.rgb * 2.0 * mix(tex1.rgb * mix(vec3(1), tex2.rgb, vec3(tex2.a)), tex3.rgb, vec3(tex3.a));\r\n    } else if ( u_pixelShader == 33 ) { \r\n        //Combiners_Mod_Depth\r\n        materialColor = v_color.rgb * 2.0 * tex1.rgb;\r\n        discardAlpha = tex1.a;\r\n    } else if ( u_pixelShader == 34 ) { \r\n        //Illum\r\n        discardAlpha = tex1.a;\r\n    } else if ( u_pixelShader == 35 ) { \r\n        //Combiners_Mod_Mod_Mod_Const\r\n        materialColor = v_color.rgb * 2.0 * (tex1 * tex2 * tex3).rgb;\r\n        discardAlpha = (tex1 * tex2 * tex3).a;\r\n    }\r\n\r\n    if (u_blendMode == 13) {\r\n        outputColor.a = discardAlpha * v_color.a;\r\n    } else if (u_blendMode == 1) {\r\n        if (discardAlpha < (128.0 / 255.0))\r\n            discard;\r\n        outputColor.a = v_color.a;\r\n    } else if (u_blendMode == 0) {\r\n        outputColor.a = v_color.a;\r\n    } else {\r\n        outputColor.a = discardAlpha * v_color.a;\r\n    }\r\n\r\n    outputColor.rgb = materialColor;\r\n    if (!u_unlit) {\r\n        // Simple ambient + diffuse lighting\r\n        // color = (ambient + diffuse) * objectColor \r\n        vec4 lightColor = u_ambientColor;\r\n        float diffStrength = max(0.0, dot(v_normal, u_lightDir));\r\n        lightColor += u_lightColor * diffStrength;\r\n        lightColor = clamp(lightColor, vec4(0,0,0,0), vec4(1,1,1,1));\r\n        outputColor.rgb *= lightColor.rgb;\r\n    }\r\n    outputColor += vec4(specular, 0.0);\r\n    \r\n    gl_FragColor = outputColor;\r\n}"},3269:e=>{"use strict";e.exports=(e,t,r,n)=>{let a=65535&e,o=e>>>16&65535,i=0;for(;0!==r;){i=r>2e3?2e3:r,r-=i;do{a=a+t[n++]|0,o=o+a|0}while(--i);a%=65521,o%=65521}return a|o<<16}},3303:(e,t,r)=>{"use strict";const n=r(8411),a=r(9805),o=r(1996),i=r(4674),l=r(4442),s=Object.prototype.toString,{Z_NO_FLUSH:u,Z_SYNC_FLUSH:d,Z_FULL_FLUSH:c,Z_FINISH:h,Z_OK:f,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:m,Z_DEFAULT_STRATEGY:y,Z_DEFLATED:g}=r(9681);function _(e){this.options=a.assign({level:m,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:y},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;let r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==f)throw new Error(i[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===s.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=n.deflateSetDictionary(this.strm,e),r!==f)throw new Error(i[r]);this._dict_set=!0}}function v(e,t){const r=new _(t);if(r.push(e,!0),r.err)throw r.msg||i[r.err];return r.result}_.prototype.push=function(e,t){const r=this.strm,a=this.options.chunkSize;let i,l;if(this.ended)return!1;for(l=t===~~t?t:!0===t?h:u,"string"==typeof e?r.input=o.string2buf(e):"[object ArrayBuffer]"===s.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),(l===d||l===c)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=n.deflate(r,l),i===p)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===f;if(0!==r.avail_out){if(l>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},_.prototype.onData=function(e){this.chunks.push(e)},_.prototype.onEnd=function(e){e===f&&(this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Deflate=_,e.exports.deflate=v,e.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,v(e,t)},e.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,v(e,t)},e.exports.constants=r(9681)},3474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCWMOFile=function(e){let t=new a.BinaryReader(e);if(1129794895!=t.readUInt32LE())throw new Error("Encountered wrong magic number. File data is probably not CM2 data?");const r=t.readUInt32LE();if(1e3!=r)throw new Error("Incompatible version encountered in CM2. Supported versions are: 1000. Encountered: "+r);const m=t.readUInt32LE(),y=t.readUInt32LE(),g=t.readUInt32LE(),_=t.readUInt32LE(),v=t.readUInt32LE(),x=t.readUInt32LE(),b=t.readUInt32LE(),F=t.readUInt32LE(),C=t.readUInt32LE(),w=t.readUInt32LE(),S=t.readUInt32LE(),A=t.readUInt32LE(),E=t.readUInt32LE(),M=t.readUInt32LE();let k;const D=t.readRemainingBytes();if(k=(0,n.inflate)(D),k.length<M)throw new Error("Compressed data appears to be smaller than expected? Received: "+k.length+" expected: "+M);t=new a.BinaryReader(k.buffer),t.seek(m);const T=t.readUInt32LE(),B=t.readInt16LE(),L=t.readUInt32LE(),P=t.readUInt32LE(),O=(0,o.readColor)(t),U=(0,o.readFloat3)(t),I=(0,o.readFloat3)(t);t.seek(y);const W=(0,o.readArray)(t,i);t.seek(g);const R=(0,o.readArray)(t,l);t.seek(_);const z=(0,o.readArray)(t,s);t.seek(v);const j=(0,o.readArray)(t,(e=>e.readUInt32LE()));t.seek(x);const H=(0,o.readArray)(t,u);t.seek(b);const N=(0,o.readArray)(t,d);t.seek(F);const G=(0,o.readArray)(t,c);t.seek(C);const V=(0,o.readArray)(t,h);t.seek(w);const q=(0,o.readArray)(t,f);t.seek(S);const Z=(0,o.readArray)(t,f);t.seek(A);const K=(0,o.readArray)(t,o.readFloat3);t.seek(E);return{flags:B,fileDataID:T,id:L,skyboxFileId:P,ambientColor:O,minBoundingBox:U,maxBoundingBox:I,ambientVolumes:Z,doodadDefs:z,doodadIds:j,materials:W,fogs:H,portalRefs:G,portals:V,globalAmbientVolumes:q,portalVertices:K,groups:(0,o.readArray)(t,p),doodadSets:N,groupInfo:R}};const n=r(1668),a=r(9266),o=r(4337);function i(e){return{flags:e.readUInt32LE(),shader:e.readUInt32LE(),blendMode:e.readUInt32LE(),texture1:e.readUInt32LE(),sidnColor:(0,o.readColor)(e),frameSidnColor:(0,o.readColor)(e),texture2:e.readUInt32LE(),diffColor:(0,o.readColor)(e),groundTypeId:e.readUInt32LE(),texture3:e.readUInt32LE(),color2:e.readUInt32LE(),flags2:e.readUInt32LE(),runTimeData:[e.readUInt32LE(),e.readUInt32LE(),e.readUInt32LE(),e.readUInt32LE()]}}function l(e){return{flags:e.readUInt32LE(),minBoundingBox:(0,o.readFloat3)(e),maxBoundingBox:(0,o.readFloat3)(e)}}function s(e){return{nameOffset:e.readUInt32LE(),flags:e.readUInt32LE(),position:(0,o.readFloat3)(e),rotation:(0,o.readFloat4)(e),scale:e.readFloatLE(),color:(0,o.readColor)(e)}}function u(e){return{flags:e.readUInt32LE(),position:(0,o.readFloat3)(e),smallerRadius:e.readFloatLE(),largerRadius:e.readFloatLE(),fogEnd:e.readFloatLE(),fogStartScalar:e.readFloatLE(),fogColor:(0,o.readColor)(e),uwFogEnd:e.readFloatLE(),uwFogStartScalar:e.readFloatLE(),uwFogColor:(0,o.readColor)(e)}}function d(e){return{startIndex:e.readUInt32LE(),count:e.readUInt32LE()}}function c(e){return{portalIndex:e.readUInt16LE(),groupIndex:e.readUInt16LE(),side:e.readInt16LE()}}function h(e){return{startVertex:e.readUInt16LE(),vertexCount:e.readUInt16LE(),planeNormal:(0,o.readFloat3)(e),planeDistance:e.readFloatLE()}}function f(e){return{position:(0,o.readFloat3)(e),start:e.readFloatLE(),end:e.readFloatLE(),color1:(0,o.readColor)(e),color2:(0,o.readColor)(e),color3:(0,o.readColor)(e),flags:e.readUInt32LE(),doodadSetId:e.readUInt16LE()}}function p(e){return{fileDataID:e.readUInt32LE(),lod:e.readInt32LE(),flags:e.readUInt32LE(),boundingBoxMin:(0,o.readFloat3)(e),boundingBoxMax:(0,o.readFloat3)(e),portalsOffset:e.readUInt16LE(),portalCount:e.readUInt16LE(),transBatchCount:e.readUInt16LE(),intBatchCount:e.readUInt16LE(),extBatchCount:e.readUInt16LE(),unknownBatchCount:e.readUInt16LE(),fogIndices:[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()],groupLiquid:e.readUInt32LE(),groupId:e.readUInt32LE(),flags2:e.readUInt32LE(),splitGroupindex:e.readInt16LE(),nextSplitChildIndex:e.readInt16LE(),headerReplacementColor:(0,o.readColor)(e),indices:(0,o.readArray)(e,(e=>e.readUInt16LE())),liquidData:(0,o.readArray)(e,m),bspIndices:(0,o.readArray)(e,(e=>e.readUInt16LE())),bspNodes:(0,o.readArray)(e,y),vertices:(0,o.readArray)(e,o.readFloat3),normals:(0,o.readArray)(e,o.readFloat3),uvList:(0,o.readArray)(e,o.readFloat2),vertexColors:(0,o.readArray)(e,o.readColor),batches:(0,o.readArray)(e,g),doodadReferences:(0,o.readArray)(e,(e=>e.readUInt16LE()))}}function m(e){return{liquidVertices:(0,o.readInt2)(e),liquidTiles:(0,o.readInt2)(e),position:(0,o.readFloat3)(e),materialId:e.readUInt16LE(),vertices:(0,o.readArray)(e,_),tiles:(0,o.readArray)(e,v)}}function y(e){return{flags:e.readUInt16LE(),negChild:e.readInt16LE(),posChild:e.readInt16LE(),faces:e.readUInt16LE(),faceStart:e.readUInt32LE(),planeDistance:e.readFloatLE()}}function g(e){return{materialId:e.readUInt16LE(),startIndex:e.readUInt32LE(),indexCount:e.readUInt16LE(),firstVertex:e.readUInt16LE(),lastVertex:e.readUInt16LE()}}function _(e){return{data:e.readUInt32LE(),height:e.readFloatLE()}}function v(e){return{legacyLiquidType:e.readUInt8(),fishable:e.readUInt8(),shared:e.readUInt8()}}},3656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RotatingCamera=void 0;const n=r(1278),a=r(9174);class o extends a.Camera{constructor(){super()}initialize(e){super.initialize(e),this.time=0,this.radius=50,this.rotateSpeed=.05}update(e){this.time=(this.time+e)%(360/this.rotateSpeed);var t=Math.floor(this.time/(1/this.rotateSpeed))*Math.PI/180,r=n.Float44.identity();n.Float44.rotateX(r,90*Math.PI/180,r),n.Float44.rotateY(r,t,r),n.Float44.translate(r,n.Float3.create(0,0,this.radius),r),n.Float44.invert(r,this.viewMatrix)}resizeForBoundingBox(e){if(this.lastBoundingBox=e,!e)return;const[t,r]=e,a=n.Float3.subtract(r,t),o=n.Float3.length(a);this.radius=o}}t.RotatingCamera=o},3665:e=>{"use strict";function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const r=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),n=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=new Array(576);t(i);const l=new Array(60);t(l);const s=new Array(512);t(s);const u=new Array(256);t(u);const d=new Array(29);t(d);const c=new Array(30);function h(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let f,p,m;function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(c);const g=e=>e<256?s[e]:s[256+(e>>>7)],_=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},v=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,_(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},x=(e,t,r)=>{v(e,r[2*t],r[2*t+1])},b=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},F=(e,t,r)=>{const n=new Array(16);let a,o,i=0;for(a=1;a<=15;a++)i=i+r[a-1]<<1,n[a]=i;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=b(n[t]++,t))}},C=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},w=e=>{e.bi_valid>8?_(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},S=(e,t,r,n)=>{const a=2*t,o=2*r;return e[a]<e[o]||e[a]===e[o]&&n[t]<=n[r]},A=(e,t,r)=>{const n=e.heap[r];let a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&S(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!S(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},E=(e,t,a)=>{let o,i,l,s,h=0;if(0!==e.sym_next)do{o=255&e.pending_buf[e.sym_buf+h++],o+=(255&e.pending_buf[e.sym_buf+h++])<<8,i=e.pending_buf[e.sym_buf+h++],0===o?x(e,i,t):(l=u[i],x(e,l+256+1,t),s=r[l],0!==s&&(i-=d[l],v(e,i,s)),o--,l=g(o),x(e,l,a),s=n[l],0!==s&&(o-=c[l],v(e,o,s)))}while(h<e.sym_next);x(e,256,t)},M=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.elems;let i,l,s,u=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<o;i++)0!==r[2*i]?(e.heap[++e.heap_len]=u=i,e.depth[i]=0):r[2*i+1]=0;for(;e.heap_len<2;)s=e.heap[++e.heap_len]=u<2?++u:0,r[2*s]=1,e.depth[s]=0,e.opt_len--,a&&(e.static_len-=n[2*s+1]);for(t.max_code=u,i=e.heap_len>>1;i>=1;i--)A(e,r,i);s=o;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=l,r[2*s]=r[2*i]+r[2*l],e.depth[s]=(e.depth[i]>=e.depth[l]?e.depth[i]:e.depth[l])+1,r[2*i+1]=r[2*l+1]=s,e.heap[1]=s++,A(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,i=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,s=t.stat_desc.max_length;let u,d,c,h,f,p,m=0;for(h=0;h<=15;h++)e.bl_count[h]=0;for(r[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<573;u++)d=e.heap[u],h=r[2*r[2*d+1]+1]+1,h>s&&(h=s,m++),r[2*d+1]=h,d>n||(e.bl_count[h]++,f=0,d>=l&&(f=i[d-l]),p=r[2*d],e.opt_len+=p*(h+f),o&&(e.static_len+=p*(a[2*d+1]+f)));if(0!==m){do{for(h=s-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[s]--,m-=2}while(m>0);for(h=s;0!==h;h--)for(d=e.bl_count[h];0!==d;)c=e.heap[--u],c>n||(r[2*c+1]!==h&&(e.opt_len+=(h-r[2*c+1])*r[2*c],r[2*c+1]=h),d--)}})(e,t),F(r,u,e.bl_count)},k=(e,t,r)=>{let n,a,o=-1,i=t[1],l=0,s=7,u=4;for(0===i&&(s=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)a=i,i=t[2*(n+1)+1],++l<s&&a===i||(l<u?e.bl_tree[2*a]+=l:0!==a?(a!==o&&e.bl_tree[2*a]++,e.bl_tree[32]++):l<=10?e.bl_tree[34]++:e.bl_tree[36]++,l=0,o=a,0===i?(s=138,u=3):a===i?(s=6,u=3):(s=7,u=4))},D=(e,t,r)=>{let n,a,o=-1,i=t[1],l=0,s=7,u=4;for(0===i&&(s=138,u=3),n=0;n<=r;n++)if(a=i,i=t[2*(n+1)+1],!(++l<s&&a===i)){if(l<u)do{x(e,a,e.bl_tree)}while(0!=--l);else 0!==a?(a!==o&&(x(e,a,e.bl_tree),l--),x(e,16,e.bl_tree),v(e,l-3,2)):l<=10?(x(e,17,e.bl_tree),v(e,l-3,3)):(x(e,18,e.bl_tree),v(e,l-11,7));l=0,o=a,0===i?(s=138,u=3):a===i?(s=6,u=3):(s=7,u=4)}};let T=!1;const B=(e,t,r,n)=>{v(e,0+(n?1:0),3),w(e),_(e,r),_(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};e.exports._tr_init=e=>{T||((()=>{let e,t,o,y,g;const _=new Array(16);for(o=0,y=0;y<28;y++)for(d[y]=o,e=0;e<1<<r[y];e++)u[o++]=y;for(u[o-1]=y,g=0,y=0;y<16;y++)for(c[y]=g,e=0;e<1<<n[y];e++)s[g++]=y;for(g>>=7;y<30;y++)for(c[y]=g<<7,e=0;e<1<<n[y]-7;e++)s[256+g++]=y;for(t=0;t<=15;t++)_[t]=0;for(e=0;e<=143;)i[2*e+1]=8,e++,_[8]++;for(;e<=255;)i[2*e+1]=9,e++,_[9]++;for(;e<=279;)i[2*e+1]=7,e++,_[7]++;for(;e<=287;)i[2*e+1]=8,e++,_[8]++;for(F(i,287,_),e=0;e<30;e++)l[2*e+1]=5,l[2*e]=b(e,5);f=new h(i,r,257,286,15),p=new h(l,n,0,30,15),m=new h(new Array(0),a,0,19,7)})(),T=!0),e.l_desc=new y(e.dyn_ltree,f),e.d_desc=new y(e.dyn_dtree,p),e.bl_desc=new y(e.bl_tree,m),e.bi_buf=0,e.bi_valid=0,C(e)},e.exports._tr_stored_block=B,e.exports._tr_flush_block=(e,t,r,n)=>{let a,s,u=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),M(e,e.l_desc),M(e,e.d_desc),u=(e=>{let t;for(k(e,e.dyn_ltree,e.l_desc.max_code),k(e,e.dyn_dtree,e.d_desc.max_code),M(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*o[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=r+5,r+4<=a&&-1!==t?B(e,t,r,n):4===e.strategy||s===a?(v(e,2+(n?1:0),3),E(e,i,l)):(v(e,4+(n?1:0),3),((e,t,r,n)=>{let a;for(v(e,t-257,5),v(e,r-1,5),v(e,n-4,4),a=0;a<n;a++)v(e,e.bl_tree[2*o[a]+1],3);D(e,e.dyn_ltree,t-1),D(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),E(e,e.dyn_ltree,e.dyn_dtree)),C(e),n&&w(e)},e.exports._tr_tally=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(u[r]+256+1)]++,e.dyn_dtree[2*g(t)]++),e.sym_next===e.sym_end),e.exports._tr_align=e=>{v(e,2,3),x(e,256,i),(e=>{16===e.bi_valid?(_(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},3975:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(6677),t),a(r(6085),t)},4176:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.getM2PixelShaderId=t.getM2VertexShaderId=t.getM2ShaderTableEntry=void 0,function(e){e[e.Combiners_Opaque=0]="Combiners_Opaque",e[e.Combiners_Mod=1]="Combiners_Mod",e[e.Combiners_Opaque_Mod=2]="Combiners_Opaque_Mod",e[e.Combiners_Opaque_Mod2x=3]="Combiners_Opaque_Mod2x",e[e.Combiners_Opaque_Mod2xNA=4]="Combiners_Opaque_Mod2xNA",e[e.Combiners_Opaque_Opaque=5]="Combiners_Opaque_Opaque",e[e.Combiners_Mod_Mod=6]="Combiners_Mod_Mod",e[e.Combiners_Mod_Mod2x=7]="Combiners_Mod_Mod2x",e[e.Combiners_Mod_Add=8]="Combiners_Mod_Add",e[e.Combiners_Mod_Mod2xNA=9]="Combiners_Mod_Mod2xNA",e[e.Combiners_Mod_AddNA=10]="Combiners_Mod_AddNA",e[e.Combiners_Mod_Opaque=11]="Combiners_Mod_Opaque",e[e.Combiners_Opaque_Mod2xNA_Alpha=12]="Combiners_Opaque_Mod2xNA_Alpha",e[e.Combiners_Opaque_AddAlpha=13]="Combiners_Opaque_AddAlpha",e[e.Combiners_Opaque_AddAlpha_Alpha=14]="Combiners_Opaque_AddAlpha_Alpha",e[e.Combiners_Opaque_Mod2xNA_Alpha_Add=15]="Combiners_Opaque_Mod2xNA_Alpha_Add",e[e.Combiners_Mod_AddAlpha=16]="Combiners_Mod_AddAlpha",e[e.Combiners_Mod_AddAlpha_Alpha=17]="Combiners_Mod_AddAlpha_Alpha",e[e.Combiners_Opaque_Alpha_Alpha=18]="Combiners_Opaque_Alpha_Alpha",e[e.Combiners_Opaque_Mod2xNA_Alpha_3s=19]="Combiners_Opaque_Mod2xNA_Alpha_3s",e[e.Combiners_Opaque_AddAlpha_Wgt=20]="Combiners_Opaque_AddAlpha_Wgt",e[e.Combiners_Mod_Add_Alpha=21]="Combiners_Mod_Add_Alpha",e[e.Combiners_Opaque_ModNA_Alpha=22]="Combiners_Opaque_ModNA_Alpha",e[e.Combiners_Mod_AddAlpha_Wgt=23]="Combiners_Mod_AddAlpha_Wgt",e[e.Combiners_Opaque_Mod_Add_Wgt=24]="Combiners_Opaque_Mod_Add_Wgt",e[e.Combiners_Opaque_Mod2xNA_Alpha_UnshAlpha=25]="Combiners_Opaque_Mod2xNA_Alpha_UnshAlpha",e[e.Combiners_Mod_Dual_Crossfade=26]="Combiners_Mod_Dual_Crossfade",e[e.Combiners_Opaque_Mod2xNA_Alpha_Alpha=27]="Combiners_Opaque_Mod2xNA_Alpha_Alpha",e[e.Combiners_Mod_Masked_Dual_Crossfade=28]="Combiners_Mod_Masked_Dual_Crossfade",e[e.Combiners_Opaque_Alpha=29]="Combiners_Opaque_Alpha",e[e.Guild=30]="Guild",e[e.Guild_NoBorder=31]="Guild_NoBorder",e[e.Guild_Opaque=32]="Guild_Opaque",e[e.Combiners_Mod_Depth=33]="Combiners_Mod_Depth",e[e.Illum=34]="Illum",e[e.Combiners_Mod_Mod_Mod_Const=35]="Combiners_Mod_Mod_Mod_Const",e[e.NewUnkCombiner=36]="NewUnkCombiner"}(r||(r={})),function(e){e[e.Diffuse_T1=0]="Diffuse_T1",e[e.Diffuse_Env=1]="Diffuse_Env",e[e.Diffuse_T1_T2=2]="Diffuse_T1_T2",e[e.Diffuse_T1_Env=3]="Diffuse_T1_Env",e[e.Diffuse_Env_T1=4]="Diffuse_Env_T1",e[e.Diffuse_Env_Env=5]="Diffuse_Env_Env",e[e.Diffuse_T1_Env_T1=6]="Diffuse_T1_Env_T1",e[e.Diffuse_T1_T1=7]="Diffuse_T1_T1",e[e.Diffuse_T1_T1_T1=8]="Diffuse_T1_T1_T1",e[e.Diffuse_EdgeFade_T1=9]="Diffuse_EdgeFade_T1",e[e.Diffuse_T2=10]="Diffuse_T2",e[e.Diffuse_T1_Env_T2=11]="Diffuse_T1_Env_T2",e[e.Diffuse_EdgeFade_T1_T2=12]="Diffuse_EdgeFade_T1_T2",e[e.Diffuse_EdgeFade_Env=13]="Diffuse_EdgeFade_Env",e[e.Diffuse_T1_T2_T1=14]="Diffuse_T1_T2_T1",e[e.Diffuse_T1_T2_T3=15]="Diffuse_T1_T2_T3",e[e.Color_T1_T2_T3=16]="Color_T1_T2_T3",e[e.BW_Diffuse_T1=17]="BW_Diffuse_T1",e[e.BW_Diffuse_T1_T2=18]="BW_Diffuse_T1_T2"}(n||(n={}));const a=[[r.Combiners_Opaque_Mod2xNA_Alpha,n.Diffuse_T1_Env],[r.Combiners_Opaque_AddAlpha,n.Diffuse_T1_Env],[r.Combiners_Opaque_AddAlpha_Alpha,n.Diffuse_T1_Env],[r.Combiners_Opaque_Mod2xNA_Alpha_Add,n.Diffuse_T1_Env_T1],[r.Combiners_Mod_AddAlpha,n.Diffuse_T1_Env],[r.Combiners_Opaque_AddAlpha,n.Diffuse_T1_T1],[r.Combiners_Mod_AddAlpha,n.Diffuse_T1_T1],[r.Combiners_Mod_AddAlpha_Alpha,n.Diffuse_T1_Env],[r.Combiners_Opaque_Alpha_Alpha,n.Diffuse_T1_Env],[r.Combiners_Opaque_Mod2xNA_Alpha_3s,n.Diffuse_T1_Env_T1],[r.Combiners_Opaque_AddAlpha_Wgt,n.Diffuse_T1_T1],[r.Combiners_Mod_Add_Alpha,n.Diffuse_T1_Env],[r.Combiners_Opaque_ModNA_Alpha,n.Diffuse_T1_Env],[r.Combiners_Mod_AddAlpha_Wgt,n.Diffuse_T1_Env],[r.Combiners_Mod_AddAlpha_Wgt,n.Diffuse_T1_T1],[r.Combiners_Opaque_AddAlpha_Wgt,n.Diffuse_T1_T2],[r.Combiners_Opaque_Mod_Add_Wgt,n.Diffuse_T1_Env],[r.Combiners_Opaque_Mod2xNA_Alpha_UnshAlpha,n.Diffuse_T1_Env_T1],[r.Combiners_Mod_Dual_Crossfade,n.Diffuse_T1],[r.Combiners_Mod_Depth,n.Diffuse_EdgeFade_T1],[r.Combiners_Opaque_Mod2xNA_Alpha_Alpha,n.Diffuse_T1_Env_T2],[r.Combiners_Mod_Mod,n.Diffuse_EdgeFade_T1_T2],[r.Combiners_Mod_Masked_Dual_Crossfade,n.Diffuse_T1_T2],[r.Combiners_Opaque_Alpha,n.Diffuse_T1_T1],[r.Combiners_Opaque_Mod2xNA_Alpha_UnshAlpha,n.Diffuse_T1_Env_T2],[r.Combiners_Mod_Depth,n.Diffuse_EdgeFade_Env],[r.Guild,n.Diffuse_T1_T2_T1],[r.Guild_NoBorder,n.Diffuse_T1_T2],[r.Guild_Opaque,n.Diffuse_T1_T2_T1],[r.Illum,n.Diffuse_T1_T1],[r.Combiners_Mod_Mod_Mod_Const,n.Diffuse_T1_T2_T3],[r.Combiners_Mod_Mod_Mod_Const,n.Color_T1_T2_T3],[r.Combiners_Opaque,n.Diffuse_T1],[r.Combiners_Mod_Mod2x,n.Diffuse_EdgeFade_T1_T2],[r.Combiners_Mod,n.Diffuse_EdgeFade_T1],[r.NewUnkCombiner,n.Diffuse_EdgeFade_T1_T2]];t.getM2ShaderTableEntry=e=>{const t=32767&e;if(t>=a.length)throw"Wrong shaderId for vertex shader";return a[t]},t.getM2VertexShaderId=(e,r)=>(32768&e&&(0,t.getM2ShaderTableEntry)(e)[1],1==r?128&e?n.Diffuse_Env:16384&e?n.Diffuse_T2:n.Diffuse_T1:128&e?8&e?n.Diffuse_Env_Env:n.Diffuse_Env_T1:8&e?n.Diffuse_T1_Env:16384&e?n.Diffuse_T1_T2:n.Diffuse_T1_T1),t.getM2PixelShaderId=(e,n)=>{if(32768&e)return(0,t.getM2ShaderTableEntry)(e)[0];if(1===n)return 112&e?r.Combiners_Mod:r.Combiners_Opaque;if(112&e)switch(7&e){case 0:return r.Combiners_Mod_Opaque;case 3:return r.Combiners_Mod_Add;case 4:return r.Combiners_Mod_Mod2x;case 6:return r.Combiners_Mod_Mod2xNA;case 7:return r.Combiners_Mod_AddNA;default:return r.Combiners_Mod_Mod}else switch(7&e){case 0:return r.Combiners_Opaque_Opaque;case 3:case 7:return r.Combiners_Opaque_AddAlpha;case 4:return r.Combiners_Opaque_Mod2x;case 6:return r.Combiners_Opaque_Mod2xNA;default:return r.Combiners_Opaque_Mod}}},4337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readInt2=function(e){return[e.readInt32LE(),e.readInt32LE()]},t.readFloat2=function(e){return n.Float2.create(e.readFloatLE(),e.readFloatLE())},t.readFloat3=function(e){return n.Float3.create(e.readFloatLE(),e.readFloatLE(),e.readFloatLE())},t.readFloat4=function(e){return n.Float4.create(e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE())},t.readQuaternion=function(e){return n.Float4.create(-e.readFloatLE(),-e.readFloatLE(),-e.readFloatLE(),e.readFloatLE())},t.readColor=function(e){return[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()]},t.readFloat44=function(e){return n.Float44.create(e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE(),e.readFloatLE())},t.readArray=function(e,t){const r=e.readInt32LE();if(r>0){const n=new Array(r);for(let a=0;a<r;a++)n[a]=t(e,a);return n}return[]};const n=r(8219)},4442:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},4510:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4521:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrbitalCamera=t.DragOperation=void 0;const n=r(9174),a=r(1278);var o;!function(e){e[e.None=0]="None",e[e.Rotation=1]="Rotation",e[e.Translation=2]="Translation"}(o||(t.DragOperation=o={}));class i extends n.Camera{constructor(){super(),this.cameraMatrix=a.Float44.identity(),this.currentDragOperation=o.None,this.targetLocation=a.Float3.create(0,0,0),this.upDir=a.Float3.create(0,0,1),this.cameraTranslation=a.Float3.zero(),this.theta=Math.PI/2,this.phi=1.5*Math.PI,this.startingRadius=500,this.currentRadius=this.startingRadius,this.minRadius=200,this.maxRadius=1e3,this.zoomFactor=20,this.currentZoom=0,this.zoomDecay=.7,this.position=a.Float3.fromSpherical(this.startingRadius,this.theta,this.phi),a.Float3.add(this.position,this.targetLocation),a.Float44.lookAt(this.position,this.targetLocation,this.upDir,this.cameraMatrix)}initialize(e){if(super.initialize(e),e.containerElement){this.onContextMenu=e=>(e.preventDefault(),!1),this.onMouseDown=this.handleMouseDown.bind(this),this.onTouchStart=this.handleTouchStart.bind(this),this.onWheel=this.handleWheel.bind(this),e.containerElement.addEventListener("contextmenu",this.onContextMenu),e.containerElement.addEventListener("mousedown",this.onMouseDown),e.containerElement.addEventListener("touchstart",this.onTouchStart),e.containerElement.addEventListener("wheel",this.onWheel);const t=e.containerElement.getBoundingClientRect();this.containerWidth=t.width,this.containerHeight=t.height}document&&(this.onMouseUp=this.handleDragRelease.bind(this),this.onTouchEnd=this.handleDragRelease.bind(this),this.onMouseMove=this.handleMouseMove.bind(this),this.onTouchMove=this.handleTouchMove.bind(this),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("touchend",this.onTouchEnd),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove))}update(e){0!=this.currentZoom&&(this.currentRadius=this.currentRadius+this.currentZoom*this.zoomFactor,this.currentRadius=Math.min(Math.max(this.minRadius,this.currentRadius),this.maxRadius),this.currentZoom*=this.zoomDecay,this.currentZoom<1e-4&&(this.currentZoom=0),a.Float3.fromSpherical(this.currentRadius,this.theta,this.phi,this.position),a.Float3.add(this.position,this.targetLocation)),a.Float44.lookAt(this.position,this.targetLocation,this.upDir,this.cameraMatrix),a.Float44.invert(this.cameraMatrix,this.viewMatrix),a.Float44.translate(this.viewMatrix,this.cameraTranslation,this.viewMatrix)}dispose(){this.engine.containerElement&&(this.engine.containerElement.removeEventListener("contextmenu",this.onContextMenu),this.engine.containerElement.removeEventListener("mousedown",this.onMouseDown),this.engine.containerElement.removeEventListener("touchstart",this.onTouchStart),this.engine.containerElement.removeEventListener("wheel",this.onWheel),this.onContextMenu=null,this.onMouseDown=null,this.onTouchStart=null,this.onWheel=null),document&&(document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchend",this.onTouchEnd),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove),this.onMouseUp=null,this.onTouchEnd=null,this.onMouseMove=null,this.onTouchMove=null),super.dispose(),this.cameraMatrix=null,this.targetLocation=null,this.upDir=null,this.cameraTranslation=null}handleMouseDown(e){2==e.button||e.ctrlKey?this.currentDragOperation=o.Translation:this.currentDragOperation=o.Rotation,this.lastDragX=e.clientX,this.lastDragY=e.clientY,e.preventDefault()}handleTouchStart(e){this.currentDragOperation=o.Rotation,this.lastDragX=e.touches[0].clientX,this.lastDragY=e.touches[0].clientY,e.preventDefault()}handleMouseMove(e){this.handleDrag(e.x,e.y)}handleTouchMove(e){this.handleDrag(e.touches[0].clientX,e.touches[0].clientY)}handleDrag(e,t){if(this.currentDragOperation===o.None)return;const r=(e-this.lastDragX)/this.containerWidth,n=(t-this.lastDragY)/this.containerHeight;if(this.currentDragOperation===o.Translation)a.Float3.add(this.cameraTranslation,a.Float3.create(r*this.currentRadius,0,-n*this.currentRadius),this.cameraTranslation);else{const e=Math.PI,t=r*e,o=n*e;this.theta=Math.min(Math.max(this.theta-o-o,.01),Math.PI),this.phi-=t,a.Float3.fromSpherical(this.currentRadius,this.theta,this.phi,this.position),a.Float3.add(this.position,this.targetLocation)}this.lastDragX=e,this.lastDragY=t}handleDragRelease(){this.currentDragOperation=o.None}handleWheel(e){this.currentZoom=e.deltaY<0?-1:1,e.preventDefault()}resizeForBoundingBox(e){if(this.lastBoundingBox=e,!e)return;const[t,r]=e,n=a.Float3.subtract(r,t),o=a.Float3.length(n);this.startingRadius=o,this.currentRadius=this.startingRadius,this.minRadius=.25*o,this.maxRadius=2*o,this.zoomFactor=this.maxRadius/50,a.Float3.fromSpherical(this.currentRadius,this.theta,this.phi,this.position),a.Float3.add(this.position,this.targetLocation)}}t.OrbitalCamera=i},4674:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},4741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationState=void 0;const n=r(2462),a=r(8156),o=(e,t,r)=>e+r*(t-e),i=e=>e;t.AnimationState=class{constructor(e){this.animations=e.modelData.animations,this.currentAnimActiveTime=0,this.nextAnimActiveTime=0,this.blendFactor=1,this.globalLoops=e.modelData.globalLoops,this.globalTimers=new Array(this.globalLoops.length);for(let e=0;e<this.globalTimers.length;e++)this.globalTimers[e]=0}useAnimation(e){this.currentAnimActiveTime=0,this.currentAnimation=this.animations.find((t=>t.id===e&&0===t.variationIndex)),this.currentAnimation||(this.currentAnimation=this.animations.find((e=>0===e.id&&0===e.variationIndex))),this.blendFactor=0,this.getNextVariation()}update(e){this.currentAnimActiveTime+=e;for(let t=0;t<this.globalTimers.length;t++)this.globalTimers[t]+=e,this.globalLoops[t]>0&&(this.globalTimers[t]%=this.globalLoops[t]);this.blendFactor=1;let t=this.currentAnimation.duration-this.currentAnimActiveTime;if(this.nextAnimation){const e=this.nextAnimation.blendTimeIn;e>0&&t<e&&(this.nextAnimActiveTime=(e-t)%this.nextAnimation.duration,this.blendFactor=t/e)}this.currentAnimActiveTime>=this.currentAnimation.duration&&(this.nextAnimation?(this.currentAnimation=this.nextAnimation,this.currentAnimActiveTime=this.nextAnimActiveTime,this.getNextVariation()):this.currentAnimActiveTime%=this.currentAnimation.duration)}getNextVariation(){if(this.nextAnimation=this.currentAnimation,this.nextAnimActiveTime=0,this.currentAnimation.variationNext>-1){let e=32767*Math.random(),t=0;for(t+=this.animations[this.currentAnimation.id].frequency;t<e&&this.nextAnimation.variationNext>-1;)this.nextAnimation=this.animations[this.currentAnimation.variationNext],t+=this.nextAnimation.frequency}else{const e=this.animations.find((e=>e.id==this.currentAnimation.id&&0===e.variationIndex));e&&(this.nextAnimation=e)}for(;!(n.WoWAnimationFlags.PrimaryBoneSequence&this.nextAnimation.flags)&&(n.WoWAnimationFlags.IsAlias&this.nextAnimation.flags)>0;)this.nextAnimation=this.animations[this.nextAnimation.aliasNext]}hasAnimatedValuesForTrack(e){if(!e||!e.animations.length)return!1;let t=this.currentAnimation.id;return this.currentAnimation.id>e.animations.length&&(t=0),e.animations[t].timeStamps.length>0}getFloat3TrackValue(e,t,r){return this.getTrackValueInt(a.Float3.lerp,a.Float3.copy,e,t,r)}getFloat4TrackValue(e,t,r){return this.getTrackValueInt(a.Float4.lerp,a.Float4.copy,e,t,r)}getNumberTrackValue(e,t){return this.getTrackValueInt(o,i,e,t,0)}getTrackValueInt(e,t,r,n,a){if(!r||0===r.animations.length)return n;const o=this.currentAnimation.id;let i=this.calculateAnimatedValue(e,t,r,o,this.currentAnimActiveTime,n,a);if(0===this.blendFactor||this.blendFactor>=1)return i;let l=this.nextAnimation.id;return l>=r.animations.length&&(l=0),e(i,this.calculateAnimatedValue(e,t,r,l,this.nextAnimActiveTime,n,a),this.blendFactor,a)}calculateAnimatedValue(e,t,r,n,a,o,i){const l=r.animations[n];if(0===l.values.length)return o;if(1===l.values.length)return t(l.values[0],i);if(l.values.length>1){r.globalSequence>=0&&(a=r.globalSequence<this.globalTimers.length?this.globalTimers[r.globalSequence]:this.globalTimers[0]);const n=l.timeStamps[l.timeStamps.length-1];n>0&&a>=n&&(a%=n);let o=l.timeStamps.findIndex((e=>e>a));o<0&&(o=l.timeStamps.length-1);const s=o-1;if(1!==r.interpolationType)return t(l.values[s],i);const u=l.timeStamps[s],d=l.timeStamps[o];let c=0;return u!==d&&(c=(a-u)/(d-u)),e(l.values[s],l.values[o],c,i)}}}},4823:e=>{"use strict";const t=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());e.exports=(e,r,n,a)=>{const o=t,i=a+n;e^=-1;for(let t=a;t<i;t++)e=e>>>8^o[255&(e^r[t])];return~e}},4849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseProgressReporter=void 0,t.BaseProgressReporter=class{constructor(e){this.resetState(),this.isDisposing=!1,this.container=e,this.timeBetweenUpdates=20,this.timeSinceLastUpdate=0}now(){return window.performance&&window.performance.now?window.performance.now():Date.now()}dispose(){this.isDisposing=!0,this.progressPerFile=null}draw(e){const t=e-this.lastTime;this.lastTime=e,this.timeSinceLastUpdate+=t,this.timeBetweenUpdates>this.timeSinceLastUpdate||(this.timeSinceLastUpdate-=this.timeBetweenUpdates,this.drawProgressFrame())}calcTotalProgress(){let e=0,t=0;for(const r in this.progressPerFile)e+=this.progressPerFile[r],t++;return e/=t,e}update(e,t){this.progressPerFile[e]=t}addFileIdToOperation(e){this.progressPerFile[e]=0,this.startDrawing()}removeFileIdFromOperation(e){delete this.progressPerFile[e],0===Object.keys(this.progressPerFile).length&&this.finishOperation()}setOperation(e){""===this.currentOperation&&(this.currentOperation=e)}finishOperation(){this.resetState(),this.hideElements()}startDrawing(){if(this.show)return;this.show=!0,this.lastTime=this.now(),this.showElements();const e=this,t=()=>{if(this.isDisposing||!this.show)return;const r=e.now();e.draw(r),window.requestAnimationFrame(t)};t()}resetState(){this.show=!1,this.currentOperation="",this.progressPerFile={}}}},5053:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleCache=void 0,t.SimpleCache=class{constructor(e=3e5){this.items={},this.maxTtl=e}dispose(){this.isDisposing=!0,this.items=null}update(e){const t=this.getKeys();for(const r of t){const t=this.items[r];-1!=t.ttl&&(t.ttl-=e,t.ttl<0&&delete this.items[r])}}contains(e){return!this.isDisposing&&!!this.items[e]}get(e){if(this.isDisposing)return null;const t=this.items[e];return t?(t.ttl=this.maxTtl,t.value):null}store(e,t,r=this.maxTtl){this.items[e]={ttl:r,value:t}}getKeys(){return this.isDisposing?null:Object.keys(this.items)}getValues(){return this.isDisposing?null:this.getKeys().map((e=>this.items[e].value))}}},5416:(e,t)=>{"use strict";var r,n,a,o,i,l,s;Object.defineProperty(t,"__esModule",{value:!0}),t.WowWorldModelBspNodeFlags=t.WMOShader=t.WoWWorldModelMaterialMaterialFlags=t.WMODoodadFlags=t.WowWorldModelGroupFlags2=t.WowWorldModelGroupFlags=t.WorldModelRootFlags=void 0,function(e){e[e.DoNoAttenuateVerticesBasedOnDistanceToPortal=1]="DoNoAttenuateVerticesBasedOnDistanceToPortal",e[e.UseUnifiedRenderPath=2]="UseUnifiedRenderPath",e[e.UseLiquidTypeDbcId=4]="UseLiquidTypeDbcId",e[e.DoNotFixVertexColorAlpha=8]="DoNotFixVertexColorAlpha",e[e.Lod=16]="Lod",e[e.DefaultMaxLod=32]="DefaultMaxLod",e[e.Unknown_0x40=64]="Unknown_0x40",e[e.Unknown_0x80=128]="Unknown_0x80",e[e.Unknown_0x100=256]="Unknown_0x100",e[e.Unknown_0x200=512]="Unknown_0x200",e[e.Unknown_0x400=1024]="Unknown_0x400",e[e.Unknown_0x800=2048]="Unknown_0x800"}(r||(t.WorldModelRootFlags=r={})),function(e){e[e.BspTree=1]="BspTree",e[e.LightMap=2]="LightMap",e[e.VertexColors=4]="VertexColors",e[e.Exterior=8]="Exterior",e[e.Unknown_0x10=16]="Unknown_0x10",e[e.Unknown_0x20=32]="Unknown_0x20",e[e.ExteriorLit=64]="ExteriorLit",e[e.Unreachable=128]="Unreachable",e[e.ShowExteriorSky=256]="ShowExteriorSky",e[e.HasLights=512]="HasLights",e[e.Lod=1024]="Lod",e[e.HasDoodads=2048]="HasDoodads",e[e.HasWater=4096]="HasWater",e[e.Interior=8192]="Interior",e[e.Unknown_0x4000=16384]="Unknown_0x4000",e[e.Unknown_0x8000=32768]="Unknown_0x8000",e[e.AlwaysDraw=65536]="AlwaysDraw",e[e.Unknown_0x20000=131072]="Unknown_0x20000",e[e.ShowSkybox=262144]="ShowSkybox",e[e.IsOceanWater=524288]="IsOceanWater",e[e.Unknown_0x100000=1048576]="Unknown_0x100000",e[e.IsMountAllowed=2097152]="IsMountAllowed",e[e.Unknown_0x400000=4194304]="Unknown_0x400000",e[e.Unknown_0x800000=8388608]="Unknown_0x800000",e[e.Has2VertexColors=16777216]="Has2VertexColors",e[e.Has2UVs=33554432]="Has2UVs",e[e.AntiPortal=67108864]="AntiPortal",e[e.Unknown_0x8000000=134217728]="Unknown_0x8000000",e[e.Unknown_0x10000000=268435456]="Unknown_0x10000000",e[e.Unknown_0x20000000=536870912]="Unknown_0x20000000",e[e.Has3UVs=1073741824]="Has3UVs",e[e.Unknown_0x80000000=2147483648]="Unknown_0x80000000"}(n||(t.WowWorldModelGroupFlags=n={})),function(e){e[e.CanCutTerrain=1]="CanCutTerrain",e[e.Unknown_0x2=2]="Unknown_0x2",e[e.Unknown_0x4=4]="Unknown_0x4",e[e.Unknown_0x8=8]="Unknown_0x8",e[e.Unknown_0x10=16]="Unknown_0x10",e[e.Unknown_0x20=32]="Unknown_0x20",e[e.IsSplitGroupParent=64]="IsSplitGroupParent",e[e.IsSplitGroupChild=128]="IsSplitGroupChild",e[e.AttachmentMesh=256]="AttachmentMesh"}(a||(t.WowWorldModelGroupFlags2=a={})),function(e){e[e.AcceptProjTexture=1]="AcceptProjTexture",e[e.UseInteriorLighting=2]="UseInteriorLighting",e[e.Unknown_0x4=4]="Unknown_0x4",e[e.Unknown_0x8=8]="Unknown_0x8",e[e.Unknown_0x10=16]="Unknown_0x10",e[e.Unknown_0x20=32]="Unknown_0x20",e[e.Unknown_0x40=64]="Unknown_0x40",e[e.Unknown_0x80=128]="Unknown_0x80"}(o||(t.WMODoodadFlags=o={})),function(e){e[e.Unlit=1]="Unlit",e[e.Unfogged=2]="Unfogged",e[e.Unculled=4]="Unculled",e[e.Extlight=8]="Extlight",e[e.Sidn=16]="Sidn",e[e.Window=32]="Window",e[e.ClampS=64]="ClampS",e[e.ClampT=128]="ClampT",e[e.Unknown_0x100=256]="Unknown_0x100",e[e.Unknown_0x200=512]="Unknown_0x200",e[e.Unknown_0x400=1024]="Unknown_0x400",e[e.Unknown_0x800=2048]="Unknown_0x800",e[e.Unknown_0x1000=4096]="Unknown_0x1000",e[e.Unknown_0x2000=8192]="Unknown_0x2000",e[e.Unknown_0x4000=16384]="Unknown_0x4000",e[e.Unknown_0x8000=32768]="Unknown_0x8000",e[e.Unknown_0x10000=65536]="Unknown_0x10000",e[e.Unknown_0x20000=131072]="Unknown_0x20000",e[e.Unknown_0x40000=262144]="Unknown_0x40000",e[e.Unknown_0x80000=524288]="Unknown_0x80000",e[e.Unknown_0x100000=1048576]="Unknown_0x100000",e[e.Unknown_0x200000=2097152]="Unknown_0x200000",e[e.Unknown_0x400000=4194304]="Unknown_0x400000",e[e.Unknown_0x800000=8388608]="Unknown_0x800000"}(i||(t.WoWWorldModelMaterialMaterialFlags=i={})),function(e){e[e.Diffuse=0]="Diffuse",e[e.Specular=1]="Specular",e[e.Metal=2]="Metal",e[e.Env=3]="Env",e[e.Opaque=4]="Opaque",e[e.EnvMetal=5]="EnvMetal",e[e.TwoLayerDiffuse=6]="TwoLayerDiffuse",e[e.TwoLayerEnvMetal=7]="TwoLayerEnvMetal",e[e.TwoLayerTerrain=8]="TwoLayerTerrain",e[e.DiffuseEmissive=9]="DiffuseEmissive",e[e.WaterWindow=10]="WaterWindow",e[e.MaskedEnvMetal=11]="MaskedEnvMetal",e[e.EnvMetalEmissive=12]="EnvMetalEmissive",e[e.TwoLayerDiffuseOpaque=13]="TwoLayerDiffuseOpaque",e[e.SubmarineWindow=14]="SubmarineWindow",e[e.TwoLayerDiffuseEmissive=15]="TwoLayerDiffuseEmissive",e[e.DiffuseTerrain=16]="DiffuseTerrain",e[e.AdditiveMaskedEnvMetal=17]="AdditiveMaskedEnvMetal",e[e.TwoLayerDiffuseMod2x=18]="TwoLayerDiffuseMod2x",e[e.TwoLayerDiffuseMod2xNA=19]="TwoLayerDiffuseMod2xNA",e[e.TwoLayerDiffuseAlpha=20]="TwoLayerDiffuseAlpha",e[e.Lod=21]="Lod",e[e.Parallax=22]="Parallax",e[e.Unknown_DF_Shader=23]="Unknown_DF_Shader"}(l||(t.WMOShader=l={})),function(e){e[e.XAxis=0]="XAxis",e[e.YAxis=1]="YAxis",e[e.ZAxis=2]="ZAxis",e[e.AxisMask=3]="AxisMask",e[e.Leaf=4]="Leaf",e[e.NoChild=65535]="NoChild"}(s||(t.WowWorldModelBspNodeFlags=s={}))},5716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderingBatchRequest=void 0;const n=r(2388);t.RenderingBatchRequest=class{constructor(){this.blendMode=n.GxBlend.GxBlend_Opaque,this.depthWrite=!0,this.depthTest=!0,this.backFaceCulling=!0,this.counterClockWiseFrontFaces=!1,this.colorMask=n.ColorMask.Alpha|n.ColorMask.Blue|n.ColorMask.Green|n.ColorMask.Red,this.priority=0,this.uniforms={}}useBlendMode(e){this.blendMode=e}useDepthWrite(e){this.depthWrite=e}useDepthTest(e){this.depthTest=e}useBackFaceCulling(e){this.backFaceCulling=e}useCounterClockWiseFrontFaces(e){this.counterClockWiseFrontFaces=e}useColorMask(e){this.colorMask=e}useVertexIndexBuffer(e){this.vertexIndexBuffer=e}useVertexDataBuffer(e){this.vertexDataBuffer=e}useShaderProgram(e){this.shaderProgram=e}useVertexArrayObject(e){this.vao=e}useUniforms(e){this.uniforms=Object.assign(Object.assign({},this.uniforms),e)}usePriority(e){this.priority=e}drawTriangles(e,t){this.drawInstruction={indexed:!1,offset:e,count:t}}drawIndexedTriangles(e,t){this.drawInstruction={indexed:!0,offset:e,count:t}}submit(e){e.useBackFaceCulling(this.backFaceCulling),e.useBlendMode(this.blendMode),e.useColorMask(this.colorMask),e.useCounterClockWiseFrontFaces(this.counterClockWiseFrontFaces),e.useDepthTest(this.depthTest),e.useDepthWrite(this.depthWrite),this.vertexDataBuffer&&e.useVertexDataBuffer(this.vertexDataBuffer),this.vertexIndexBuffer&&e.useVertexIndexBuffer(this.vertexIndexBuffer),this.vao&&e.useVertexArrayObject(this.vao),this.shaderProgram&&(e.useShaderProgram(this.shaderProgram),this.shaderProgram.useUniforms(this.uniforms)),this.drawInstruction&&(this.drawInstruction.indexed?e.drawIndexedTriangles(this.drawInstruction.offset,this.drawInstruction.count):e.drawTriangles(this.drawInstruction.offset,this.drawInstruction.count))}}},5748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryWriter=void 0;const n=r(6677);class a extends n.BinaryReader{writeBool(e){this.dataView.setUint8(this.offset,e?1:0),this.offset+=1}writeUInt8(e){this.dataView.setUint8(this.offset,e),this.offset+=1}writeInt8(e){this.dataView.setInt8(this.offset,e),this.offset+=1}writeUInt16BE(e){this.dataView.setUint16(this.offset,e),this.offset+=2}writeUInt16LE(e){this.dataView.setUint16(this.offset,e,!0),this.offset+=2}writeInt16BE(e){this.dataView.setInt16(this.offset,e),this.offset+=2}writeInt16LE(e){this.dataView.setInt16(this.offset,e,!0),this.offset+=2}writeUInt32BE(e){this.dataView.setUint32(this.offset,e),this.offset+=4}writeUInt32LE(e){this.dataView.setUint32(this.offset,e,!0),this.offset+=4}writeInt32BE(e){this.dataView.setInt32(this.offset,e,!0),this.offset+=4}writeInt32LE(e){this.dataView.setInt32(this.offset,e,!0),this.offset+=4}writeFloatBE(e){this.dataView.setFloat32(this.offset,e),this.offset+=4}writeFloatLE(e){this.dataView.setFloat32(this.offset,e,!0),this.offset+=4}}t.BinaryWriter=a},6098:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6303:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(9174),t),a(r(3656),t),a(r(4521),t),a(r(207),t)},6466:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(6500),t)},6472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAnimationName=void 0;const r=["Stand","Death","Spell","Stop","Walk","Run","Dead","Rise","StandWound","CombatWound","CombatCritical","ShuffleLeft","ShuffleRight","Walkbackwards","Stun","HandsClosed","AttackUnarmed","Attack1H","Attack2H","Attack2HL","ParryUnarmed","Parry1H","Parry2H","Parry2HL","ShieldBlock","ReadyUnarmed","Ready1H","Ready2H","Ready2HL","ReadyBow","Dodge","SpellPrecast","SpellCast","SpellCastArea","NPCWelcome","NPCGoodbye","Block","JumpStart","Jump","JumpEnd","Fall","SwimIdle","Swim","SwimLeft","SwimRight","SwimBackwards","AttackBow","FireBow","ReadyRifle","AttackRifle","Loot","ReadySpellDirected","ReadySpellOmni","SpellCastDirected","SpellCastOmni","BattleRoar","ReadyAbility","Special1H","Special2H","ShieldBash","EmoteTalk","EmoteEat","EmoteWork","EmoteUseStanding","EmoteTalkExclamation","EmoteTalkQuestion","EmoteBow","EmoteWave","EmoteCheer","EmoteDance","EmoteLaugh","EmoteSleep","EmoteSitGround","EmoteRude","EmoteRoar","EmoteKneel","EmoteKiss","EmoteCry","EmoteChicken","EmoteBeg","EmoteApplaud","EmoteShout","EmoteFlex","EmoteShy","EmotePoint","Attack1HPierce","Attack2HLoosePierce","AttackOff","AttackOffPierce","Sheath","HipSheath","Mount","RunRight","RunLeft","MountSpecial","Kick","SitGroundDown","SitGround","SitGroundUp","SleepDown","Sleep","SleepUp","SitChairLow","SitChairMed","SitChairHigh","LoadBow","LoadRifle","AttackThrown","ReadyThrown","HoldBow","HoldRifle","HoldThrown","LoadThrown","EmoteSalute","KneelStart","KneelLoop","KneelEnd","AttackUnarmedOff","SpecialUnarmed","StealthWalk","StealthStand","Knockdown","EatingLoop","UseStandingLoop","ChannelCastDirected","ChannelCastOmni","Whirlwind","Birth","UseStandingStart","UseStandingEnd","CreatureSpecial","Drown","Drowned","FishingCast","FishingLoop","Fly","EmoteWorkNoSheathe","EmoteStunNoSheathe","EmoteUseStandingNoSheathe","SpellSleepDown","SpellKneelStart","SpellKneelLoop","SpellKneelEnd","Sprint","InFlight","Spawn","Close","Closed","Open","Opened","Destroy","Destroyed","Rebuild","Custom0","Custom1","Custom2","Custom3","Despawn","Hold","Decay","BowPull","BowRelease","ShipStart","ShipMoving","ShipStop","GroupArrow","Arrow","CorpseArrow","GuideArrow","Sway","DruidCatPounce","DruidCatRip","DruidCatRake","DruidCatRavage","DruidCatClaw","DruidCatCower","DruidBearSwipe","DruidBearBite","DruidBearMaul","DruidBearBash","DragonTail","DragonStomp","DragonSpit","DragonSpitHover","DragonSpitFly","EmoteYes","EmoteNo","JumpLandRun","LootHold","LootUp","StandHigh","Impact","LiftOff","Hover","SuccubusEntice","EmoteTrain","EmoteDead","EmoteDanceOnce","Deflect","EmoteEatNoSheathe","Land","Submerge","Submerged","Cannibalize","ArrowBirth","GroupArrowBirth","CorpseArrowBirth","GuideArrowBirth","EmoteTalkNoSheathe","EmotePointNoSheathe","EmoteSaluteNoSheathe","EmoteDanceSpecial","Mutilate","CustomSpell01","CustomSpell02","CustomSpell03","CustomSpell04","CustomSpell05","CustomSpell06","CustomSpell07","CustomSpell08","CustomSpell09","CustomSpell10","StealthRun","Emerge","Cower","Grab","GrabClosed","GrabThrown","FlyStand","FlyDeath","FlySpell","FlyStop","FlyWalk","FlyRun","FlyDead","FlyRise","FlyStandWound","FlyCombatWound","FlyCombatCritical","FlyShuffleLeft","FlyShuffleRight","FlyWalkbackwards","FlyStun","FlyHandsClosed","FlyAttackUnarmed","FlyAttack1H","FlyAttack2H","FlyAttack2HL","FlyParryUnarmed","FlyParry1H","FlyParry2H","FlyParry2HL","FlyShieldBlock","FlyReadyUnarmed","FlyReady1H","FlyReady2H","FlyReady2HL","FlyReadyBow","FlyDodge","FlySpellPrecast","FlySpellCast","FlySpellCastArea","FlyNPCWelcome","FlyNPCGoodbye","FlyBlock","FlyJumpStart","FlyJump","FlyJumpEnd","FlyFall","FlySwimIdle","FlySwim","FlySwimLeft","FlySwimRight","FlySwimBackwards","FlyAttackBow","FlyFireBow","FlyReadyRifle","FlyAttackRifle","FlyLoot","FlyReadySpellDirected","FlyReadySpellOmni","FlySpellCastDirected","FlySpellCastOmni","FlyBattleRoar","FlyReadyAbility","FlySpecial1H","FlySpecial2H","FlyShieldBash","FlyEmoteTalk","FlyEmoteEat","FlyEmoteWork","FlyEmoteUseStanding","FlyEmoteTalkExclamation","FlyEmoteTalkQuestion","FlyEmoteBow","FlyEmoteWave","FlyEmoteCheer","FlyEmoteDance","FlyEmoteLaugh","FlyEmoteSleep","FlyEmoteSitGround","FlyEmoteRude","FlyEmoteRoar","FlyEmoteKneel","FlyEmoteKiss","FlyEmoteCry","FlyEmoteChicken","FlyEmoteBeg","FlyEmoteApplaud","FlyEmoteShout","FlyEmoteFlex","FlyEmoteShy","FlyEmotePoint","FlyAttack1HPierce","FlyAttack2HLoosePierce","FlyAttackOff","FlyAttackOffPierce","FlySheath","FlyHipSheath","FlyMount","FlyRunRight","FlyRunLeft","FlyMountSpecial","FlyKick","FlySitGroundDown","FlySitGround","FlySitGroundUp","FlySleepDown","FlySleep","FlySleepUp","FlySitChairLow","FlySitChairMed","FlySitChairHigh","FlyLoadBow","FlyLoadRifle","FlyAttackThrown","FlyReadyThrown","FlyHoldBow","FlyHoldRifle","FlyHoldThrown","FlyLoadThrown","FlyEmoteSalute","FlyKneelStart","FlyKneelLoop","FlyKneelEnd","FlyAttackUnarmedOff","FlySpecialUnarmed","FlyStealthWalk","FlyStealthStand","FlyKnockdown","FlyEatingLoop","FlyUseStandingLoop","FlyChannelCastDirected","FlyChannelCastOmni","FlyWhirlwind","FlyBirth","FlyUseStandingStart","FlyUseStandingEnd","FlyCreatureSpecial","FlyDrown","FlyDrowned","FlyFishingCast","FlyFishingLoop","FlyFly","FlyEmoteWorkNoSheathe","FlyEmoteStunNoSheathe","FlyEmoteUseStandingNoSheathe","FlySpellSleepDown","FlySpellKneelStart","FlySpellKneelLoop","FlySpellKneelEnd","FlySprint","FlyInFlight","FlySpawn","FlyClose","FlyClosed","FlyOpen","FlyOpened","FlyDestroy","FlyDestroyed","FlyRebuild","FlyCustom0","FlyCustom1","FlyCustom2","FlyCustom3","FlyDespawn","FlyHold","FlyDecay","FlyBowPull","FlyBowRelease","FlyShipStart","FlyShipMoving","FlyShipStop","FlyGroupArrow","FlyArrow","FlyCorpseArrow","FlyGuideArrow","FlySway","FlyDruidCatPounce","FlyDruidCatRip","FlyDruidCatRake","FlyDruidCatRavage","FlyDruidCatClaw","FlyDruidCatCower","FlyDruidBearSwipe","FlyDruidBearBite","FlyDruidBearMaul","FlyDruidBearBash","FlyDragonTail","FlyDragonStomp","FlyDragonSpit","FlyDragonSpitHover","FlyDragonSpitFly","FlyEmoteYes","FlyEmoteNo","FlyJumpLandRun","FlyLootHold","FlyLootUp","FlyStandHigh","FlyImpact","FlyLiftOff","FlyHover","FlySuccubusEntice","FlyEmoteTrain","FlyEmoteDead","FlyEmoteDanceOnce","FlyDeflect","FlyEmoteEatNoSheathe","FlyLand","FlySubmerge","FlySubmerged","FlyCannibalize","FlyArrowBirth","FlyGroupArrowBirth","FlyCorpseArrowBirth","FlyGuideArrowBirth","FlyEmoteTalkNoSheathe","FlyEmotePointNoSheathe","FlyEmoteSaluteNoSheathe","FlyEmoteDanceSpecial","FlyMutilate","FlyCustomSpell01","FlyCustomSpell02","FlyCustomSpell03","FlyCustomSpell04","FlyCustomSpell05","FlyCustomSpell06","FlyCustomSpell07","FlyCustomSpell08","FlyCustomSpell09","FlyCustomSpell10","FlyStealthRun","FlyEmerge","FlyCower","FlyGrab","FlyGrabClosed","FlyGrabThrown","ToFly","ToHover","ToGround","FlyToFly","FlyToHover","FlyToGround","Settle","FlySettle","DeathStart","DeathLoop","DeathEnd","FlyDeathStart","FlyDeathLoop","FlyDeathEnd","DeathEndHold","FlyDeathEndHold","Strangulate","FlyStrangulate","ReadyJoust","LoadJoust","HoldJoust","FlyReadyJoust","FlyLoadJoust","FlyHoldJoust","AttackJoust","FlyAttackJoust","ReclinedMount","FlyReclinedMount","ToAltered","FromAltered","FlyToAltered","FlyFromAltered","InStocks","FlyInStocks","VehicleGrab","VehicleThrow","FlyVehicleGrab","FlyVehicleThrow","ToAlteredPostSwap","FromAlteredPostSwap","FlyToAlteredPostSwap","FlyFromAlteredPostSwap","ReclinedMountPassenger","FlyReclinedMountPassenger","Carry2H","Carried2H","FlyCarry2H","FlyCarried2H","EmoteSniff","EmoteFlySniff","AttackFist1H","FlyAttackFist1H","AttackFist1HOff","FlyAttackFist1HOff","ParryFist1H","FlyParryFist1H","ReadyFist1H","FlyReadyFist1H","SpecialFist1H","FlySpecialFist1H","EmoteReadStart","FlyEmoteReadStart","EmoteReadLoop","FlyEmoteReadLoop","EmoteReadEnd","FlyEmoteReadEnd","SwimRun","FlySwimRun","SwimWalk","FlySwimWalk","SwimWalkBackwards","FlySwimWalkBackwards","SwimSprint","FlySwimSprint","MountSwimIdle","FlyMountSwimIdle","MountSwimBackwards","FlyMountSwimBackwards","MountSwimLeft","FlyMountSwimLeft","MountSwimRight","FlyMountSwimRight","MountSwimRun","FlyMountSwimRun","MountSwimSprint","FlyMountSwimSprint","MountSwimWalk","FlyMountSwimWalk","MountSwimWalkBackwards","FlyMountSwimWalkBackwards","MountFlightIdle","FlyMountFlightIdle","MountFlightBackwards","FlyMountFlightBackwards","MountFlightLeft","FlyMountFlightLeft","MountFlightRight","FlyMountFlightRight","MountFlightRun","FlyMountFlightRun","MountFlightSprint","FlyMountFlightSprint","MountFlightWalk","FlyMountFlightWalk","MountFlightWalkBackwards","FlyMountFlightWalkBackwards","MountFlightStart","FlyMountFlightStart","MountSwimStart","FlyMountSwimStart","MountSwimLand","FlyMountSwimLand","MountSwimLandRun","FlyMountSwimLandRun","MountFlightLand","FlyMountFlightLand","MountFlightLandRun","FlyMountFlightLandRun","ReadyBlowDart","FlyReadyBlowDart","LoadBlowDart","FlyLoadBlowDart","HoldBlowDart","FlyHoldBlowDart","AttackBlowDart","FlyAttackBlowDart","CarriageMount","FlyCarriageMount","CarriagePassengerMount","FlyCarriagePassengerMount","CarriageMountAttack","FlyCarriageMountAttack","BarTendStand","FlyBarTendStand","BarServerWalk","FlyBarServerWalk","BarServerRun","FlyBarServerRun","BarServerShuffleLeft","FlyBarServerShuffleLeft","BarServerShuffleRight","FlyBarServerShuffleRight","BarTendEmoteTalk","FlyBarTendEmoteTalk","BarTendEmotePoint","FlyBarTendEmotePoint","BarServerStand","FlyBarServerStand","BarSweepWalk","FlyBarSweepWalk","BarSweepRun","FlyBarSweepRun","BarSweepShuffleLeft","FlyBarSweepShuffleLeft","BarSweepShuffleRight","FlyBarSweepShuffleRight","BarSweepEmoteTalk","FlyBarSweepEmoteTalk","BarPatronSitEmotePoint","FlyBarPatronSitEmotePoint","MountSelfIdle","FlyMountSelfIdle","MountSelfWalk","FlyMountSelfWalk","MountSelfRun","FlyMountSelfRun","MountSelfSprint","FlyMountSelfSprint","MountSelfRunLeft","FlyMountSelfRunLeft","MountSelfRunRight","FlyMountSelfRunRight","MountSelfShuffleLeft","FlyMountSelfShuffleLeft","MountSelfShuffleRight","FlyMountSelfShuffleRight","MountSelfWalkBackwards","FlyMountSelfWalkBackwards","MountSelfSpecial","FlyMountSelfSpecial","MountSelfJump","FlyMountSelfJump","MountSelfJumpStart","FlyMountSelfJumpStart","MountSelfJumpEnd","FlyMountSelfJumpEnd","MountSelfJumpLandRun","FlyMountSelfJumpLandRun","MountSelfStart","FlyMountSelfStart","MountSelfFall","FlyMountSelfFall","Stormstrike","FlyStormstrike","ReadyJoustNoSheathe","FlyReadyJoustNoSheathe","Slam","FlySlam","DeathStrike","FlyDeathStrike","SwimAttackUnarmed","FlySwimAttackUnarmed","SpinningKick","FlySpinningKick","RoundHouseKick","FlyRoundHouseKick","RollStart","FlyRollStart","Roll","FlyRoll","RollEnd","FlyRollEnd","PalmStrike","FlyPalmStrike","MonkOffenseAttackUnarmed","FlyMonkOffenseAttackUnarmed","MonkOffenseAttackUnarmedOff","FlyMonkOffenseAttackUnarmedOff","MonkOffenseParryUnarmed","FlyMonkOffenseParryUnarmed","MonkOffenseReadyUnarmed","FlyMonkOffenseReadyUnarmed","MonkOffenseSpecialUnarmed","FlyMonkOffenseSpecialUnarmed","MonkDefenseAttackUnarmed","FlyMonkDefenseAttackUnarmed","MonkDefenseAttackUnarmedOff","FlyMonkDefenseAttackUnarmedOff","MonkDefenseParryUnarmed","FlyMonkDefenseParryUnarmed","MonkDefenseReadyUnarmed","FlyMonkDefenseReadyUnarmed","MonkDefenseSpecialUnarmed","FlyMonkDefenseSpecialUnarmed","MonkHealAttackUnarmed","FlyMonkHealAttackUnarmed","MonkHealAttackUnarmedOff","FlyMonkHealAttackUnarmedOff","MonkHealParryUnarmed","FlyMonkHealParryUnarmed","MonkHealReadyUnarmed","FlyMonkHealReadyUnarmed","MonkHealSpecialUnarmed","FlyMonkHealSpecialUnarmed","FlyingKick","FlyFlyingKick","FlyingKickStart","FlyFlyingKickStart","FlyingKickEnd","FlyFlyingKickEnd","CraneStart","FlyCraneStart","CraneLoop","FlyCraneLoop","CraneEnd","FlyCraneEnd","Despawned","FlyDespawned","ThousandFists","FlyThousandFists","MonkHealReadySpellDirected","FlyMonkHealReadySpellDirected","MonkHealReadySpellOmni","FlyMonkHealReadySpellOmni","MonkHealSpellCastDirected","FlyMonkHealSpellCastDirected","MonkHealSpellCastOmni","FlyMonkHealSpellCastOmni","MonkHealChannelCastDirected","FlyMonkHealChannelCastDirected","MonkHealChannelCastOmni","FlyMonkHealChannelCastOmni","Torpedo","FlyTorpedo","Meditate","FlyMeditate","BreathOfFire","FlyBreathOfFire","RisingSunKick","FlyRisingSunKick","GroundKick","FlyGroundKick","KickBack","FlyKickBack","PetBattleStand","FlyPetBattleStand","PetBattleDeath","FlyPetBattleDeath","PetBattleRun","FlyPetBattleRun","PetBattleWound","FlyPetBattleWound","PetBattleAttack","FlyPetBattleAttack","PetBattleReadySpell","FlyPetBattleReadySpell","PetBattleSpellCast","FlyPetBattleSpellCast","PetBattleCustom0","FlyPetBattleCustom0","PetBattleCustom1","FlyPetBattleCustom1","PetBattleCustom2","FlyPetBattleCustom2","PetBattleCustom3","FlyPetBattleCustom3","PetBattleVictory","FlyPetBattleVictory","PetBattleLoss","FlyPetBattleLoss","PetBattleStun","FlyPetBattleStun","PetBattleDead","FlyPetBattleDead","PetBattleFreeze","FlyPetBattleFreeze","MonkOffenseAttackWeapon","FlyMonkOffenseAttackWeapon","BarTendEmoteWave","FlyBarTendEmoteWave","BarServerEmoteTalk","FlyBarServerEmoteTalk","BarServerEmoteWave","FlyBarServerEmoteWave","BarServerPourDrinks","FlyBarServerPourDrinks","BarServerPickup","FlyBarServerPickup","BarServerPutDown","FlyBarServerPutDown","BarSweepStand","FlyBarSweepStand","BarPatronSit","FlyBarPatronSit","BarPatronSitEmoteTalk","FlyBarPatronSitEmoteTalk","BarPatronStand","FlyBarPatronStand","BarPatronStandEmoteTalk","FlyBarPatronStandEmoteTalk","BarPatronStandEmotePoint","FlyBarPatronStandEmotePoint","CarrionSwarm","FlyCarrionSwarm","WheelLoop","FlyWheelLoop","StandCharacterCreate","FlyStandCharacterCreate","MountChopper","FlyMountChopper","FacePose","FlyFacePose","CombatAbility2HBig01","FlyCombatAbility2HBig01","CombatAbility2H01","FlyCombatAbility2H01","CombatWhirlwind","FlyCombatWhirlwind","CombatChargeLoop","FlyCombatChargeLoop","CombatAbility1H01","FlyCombatAbility1H01","CombatChargeEnd","FlyCombatChargeEnd","CombatAbility1H02","FlyCombatAbility1H02","CombatAbility1HBig01","FlyCombatAbility1HBig01","CombatAbility2H02","FlyCombatAbility2H02","ShaSpellPrecastBoth","FlyShaSpellPrecastBoth","ShaSpellCastBothFront","FlyShaSpellCastBothFront","ShaSpellCastLeftFront","FlyShaSpellCastLeftFront","ShaSpellCastRightFront","FlyShaSpellCastRightFront","ReadyCrossbow","FlyReadyCrossbow","LoadCrossbow","FlyLoadCrossbow","AttackCrossbow","FlyAttackCrossbow","HoldCrossbow","FlyHoldCrossbow","CombatAbility2HL01","FlyCombatAbility2HL01","CombatAbility2HL02","FlyCombatAbility2HL02","CombatAbility2HLBig01","FlyCombatAbility2HLBig01","CombatUnarmed01","FlyCombatUnarmed01","CombatStompLeft","FlyCombatStompLeft","CombatStompRight","FlyCombatStompRight","CombatLeapLoop","FlyCombatLeapLoop","CombatLeapEnd","FlyCombatLeapEnd","ShaReadySpellCast","FlyShaReadySpellCast","ShaSpellPrecastBothChannel","FlyShaSpellPrecastBothChannel","ShaSpellCastBothUp","FlyShaSpellCastBothUp","ShaSpellCastBothUpChannel","FlyShaSpellCastBothUpChannel","ShaSpellCastBothFrontChannel","FlyShaSpellCastBothFrontChannel","ShaSpellCastLeftFrontChannel","FlyShaSpellCastLeftFrontChannel","ShaSpellCastRightFrontChannel","FlyShaSpellCastRightFrontChannel","PriReadySpellCast","FlyPriReadySpellCast","PriSpellPrecastBoth","FlyPriSpellPrecastBoth","PriSpellPrecastBothChannel","FlyPriSpellPrecastBothChannel","PriSpellCastBothUp","FlyPriSpellCastBothUp","PriSpellCastBothFront","FlyPriSpellCastBothFront","PriSpellCastLeftFront","FlyPriSpellCastLeftFront","PriSpellCastRightFront","FlyPriSpellCastRightFront","PriSpellCastBothUpChannel","FlyPriSpellCastBothUpChannel","PriSpellCastBothFrontChannel","FlyPriSpellCastBothFrontChannel","PriSpellCastLeftFrontChannel","FlyPriSpellCastLeftFrontChannel","PriSpellCastRightFrontChannel","FlyPriSpellCastRightFrontChannel","MagReadySpellCast","FlyMagReadySpellCast","MagSpellPrecastBoth","FlyMagSpellPrecastBoth","MagSpellPrecastBothChannel","FlyMagSpellPrecastBothChannel","MagSpellCastBothUp","FlyMagSpellCastBothUp","MagSpellCastBothFront","FlyMagSpellCastBothFront","MagSpellCastLeftFront","FlyMagSpellCastLeftFront","MagSpellCastRightFront","FlyMagSpellCastRightFront","MagSpellCastBothUpChannel","FlyMagSpellCastBothUpChannel","MagSpellCastBothFrontChannel","FlyMagSpellCastBothFrontChannel","MagSpellCastLeftFrontChannel","FlyMagSpellCastLeftFrontChannel","MagSpellCastRightFrontChannel","FlyMagSpellCastRightFrontChannel","LocReadySpellCast","FlyLocReadySpellCast","LocSpellPrecastBoth","FlyLocSpellPrecastBoth","LocSpellPrecastBothChannel","FlyLocSpellPrecastBothChannel","LocSpellCastBothUp","FlyLocSpellCastBothUp","LocSpellCastBothFront","FlyLocSpellCastBothFront","LocSpellCastLeftFront","FlyLocSpellCastLeftFront","LocSpellCastRightFront","FlyLocSpellCastRightFront","LocSpellCastBothUpChannel","FlyLocSpellCastBothUpChannel","LocSpellCastBothFrontChannel","FlyLocSpellCastBothFrontChannel","LocSpellCastLeftFrontChannel","FlyLocSpellCastLeftFrontChannel","LocSpellCastRightFrontChannel","FlyLocSpellCastRightFrontChannel","DruReadySpellCast","FlyDruReadySpellCast","DruSpellPrecastBoth","FlyDruSpellPrecastBoth","DruSpellPrecastBothChannel","FlyDruSpellPrecastBothChannel","DruSpellCastBothUp","FlyDruSpellCastBothUp","DruSpellCastBothFront","FlyDruSpellCastBothFront","DruSpellCastLeftFront","FlyDruSpellCastLeftFront","DruSpellCastRightFront","FlyDruSpellCastRightFront","DruSpellCastBothUpChannel","FlyDruSpellCastBothUpChannel","DruSpellCastBothFrontChannel","FlyDruSpellCastBothFrontChannel","DruSpellCastLeftFrontChannel","FlyDruSpellCastLeftFrontChannel","DruSpellCastRightFrontChannel","FlyDruSpellCastRightFrontChannel","ArtMainLoop","FlyArtMainLoop","ArtDualLoop","FlyArtDualLoop","ArtFistsLoop","FlyArtFistsLoop","ArtBowLoop","FlyArtBowLoop","CombatAbility1H01Off","FlyCombatAbility1H01Off","CombatAbility1H02Off","FlyCombatAbility1H02Off","CombatFuriousStrike01","FlyCombatFuriousStrike01","CombatFuriousStrike02","FlyCombatFuriousStrike02","CombatFuriousStrikes","FlyCombatFuriousStrikes","CombatReadySpellCast","FlyCombatReadySpellCast","CombatShieldThrow","FlyCombatShieldThrow","PalSpellCast1HUp","FlyPalSpellCast1HUp","CombatReadyPostSpellCast","FlyCombatReadyPostSpellCast","PriReadyPostSpellCast","FlyPriReadyPostSpellCast","DHCombatRun","FlyDHCombatRun","CombatShieldBash","FlyCombatShieldBash","CombatThrow","FlyCombatThrow","CombatAbility1HPierce","FlyCombatAbility1HPierce","CombatAbility1HOffPierce","FlyCombatAbility1HOffPierce","CombatMutilate","FlyCombatMutilate","CombatBladeStorm","FlyCombatBladeStorm","CombatFinishingMove","FlyCombatFinishingMove","CombatLeapStart","FlyCombatLeapStart","GlvThrowMain","FlyGlvThrowMain","GlvThrownOff","FlyGlvThrownOff","DHCombatSprint","FlyDHCombatSprint","CombatAbilityGlv01","FlyCombatAbilityGlv01","CombatAbilityGlv02","FlyCombatAbilityGlv02","CombatAbilityGlvOff01","FlyCombatAbilityGlvOff01","CombatAbilityGlvOff02","FlyCombatAbilityGlvOff02","CombatAbilityGlvBig01","FlyCombatAbilityGlvBig01","CombatAbilityGlvBig02","FlyCombatAbilityGlvBig02","ReadyGlv","FlyReadyGlv","CombatAbilityGlvBig03","FlyCombatAbilityGlvBig03","DoubleJumpStart","FlyDoubleJumpStart","DoubleJump","FlyDoubleJump","CombatEviscerate","FlyCombatEviscerate","DoubleJumpLandRun","FlyDoubleJumpLandRun","BackFlipStart","FlyBackFlipStart","BackFlipLoop","FlyBackFlipLoop","FelRushLoop","FlyFelRushLoop","FelRushEnd","FlyFelRushEnd","DHToAlteredStart","FlyDHToAlteredStart","DHToAlteredEnd","FlyDHToAlteredEnd","DHGlide","FlyDHGlide","FanOfKnives","FlyFanOfKnives","SingleJumpStart","FlySingleJumpStart","DHBladeDance1","FlyDHBladeDance1","DHBladeDance2","FlyDHBladeDance2","DHBladeDance3","FlyDHBladeDance3","DHMeteorStrike","FlyDHMeteorStrike","CombatExecute","FlyCombatExecute","ArtLoop","FlyArtLoop","ParryGlv","FlyParryGlv","CombatUnarmed02","FlyCombatUnarmed02","CombatPistolShot","FlyCombatPistolShot","CombatPistolShotOff","FlyCombatPistolShotOff","Monk2HLIdle","FlyMonk2HLIdle","ArtShieldLoop","FlyArtShieldLoop","CombatAbility2H03","FlyCombatAbility2H03","CombatStomp","FlyCombatStomp","CombatRoar","FlyCombatRoar","PalReadySpellCast","FlyPalReadySpellCast","PalSpellPrecastRight","FlyPalSpellPrecastRight","PalSpellPrecastRightChannel","FlyPalSpellPrecastRightChannel","PalSpellCastRightFront","FlyPalSpellCastRightFront","ShaSpellCastBothOut","FlyShaSpellCastBothOut","AttackWeapon","FlyAttackWeapon","ReadyWeapon","FlyReadyWeapon","AttackWeaponOff","FlyAttackWeaponOff","SpecialDual","FlySpecialDual","DkCast1HFront","FlyDkCast1HFront","CastStrongRight","FlyCastStrongRight","CastStrongLeft","FlyCastStrongLeft","CastCurseRight","FlyCastCurseRight","CastCurseLeft","FlyCastCurseLeft","CastSweepRight","FlyCastSweepRight","CastSweepLeft","FlyCastSweepLeft","CastStrongUpLeft","FlyCastStrongUpLeft","CastTwistUpBoth","FlyCastTwistUpBoth","CastOutStrong","FlyCastOutStrong","DrumLoop","FlyDrumLoop","ParryWeapon","FlyParryWeapon","ReadyFL","FlyReadyFL","AttackFL","FlyAttackFL","AttackFLOff","FlyAttackFLOff","ParryFL","FlyParryFL","SpecialFL","FlySpecialFL","PriHoverForward","FlyPriHoverForward","PriHoverBackward","FlyPriHoverBackward","PriHoverRight","FlyPriHoverRight","PriHoverLeft","FlyPriHoverLeft","RunBackwards","FlyRunBackwards","CastStrongUpRight","FlyCastStrongUpRight","WAWalk","FlyWAWalk","WARun","FlyWARun","WADrunkStand","FlyWADrunkStand","WADrunkShuffleLeft","FlyWADrunkShuffleLeft","WADrunkShuffleRight","FlyWADrunkShuffleRight","WADrunkWalk","FlyWADrunkWalk","WADrunkWalkBackwards","FlyWADrunkWalkBackwards","WADrunkWound","FlyWADrunkWound","WADrunkTalk","FlyWADrunkTalk","WATrance01","FlyWATrance01","WATrance02","FlyWATrance02","WAChant01","FlyWAChant01","WAChant02","FlyWAChant02","WAChant03","FlyWAChant03","WAHang01","FlyWAHang01","WAHang02","FlyWAHang02","WASummon01","FlyWASummon01","WASummon02","FlyWASummon02","WABeggarTalk","FlyWABeggarTalk","WABeggarStand","FlyWABeggarStand","WABeggarPoint","FlyWABeggarPoint","WABeggarBeg","FlyWABeggarBeg","WASit01","FlyWASit01","WASit02","FlyWASit02","WASit03","FlyWASit03","WACrierStand01","FlyWACrierStand01","WACrierStand02","FlyWACrierStand02","WACrierStand03","FlyWACrierStand03","WACrierTalk","FlyWACrierTalk","WACrateHold","FlyWACrateHold","WABarrelHold","FlyWABarrelHold","WASackHold","FlyWASackHold","WAWheelBarrowStand","FlyWAWheelBarrowStand","WAWheelBarrowWalk","FlyWAWheelBarrowWalk","WAWheelBarrowRun","FlyWAWheelBarrowRun","WAHammerLoop","FlyWAHammerLoop","WACrankLoop","FlyWACrankLoop","WAPourStart","FlyWAPourStart","WAPourLoop","FlyWAPourLoop","WAPourEnd","FlyWAPourEnd","WAEmotePour","FlyWAEmotePour","WARowingStandRight","FlyWARowingStandRight","WARowingStandLeft","FlyWARowingStandLeft","WARowingRight","FlyWARowingRight","WARowingLeft","FlyWARowingLeft","WAGuardStand01","FlyWAGuardStand01","WAGuardStand02","FlyWAGuardStand02","WAGuardStand03","FlyWAGuardStand03","WAGuardStand04","FlyWAGuardStand04","WAFreezing01","FlyWAFreezing01","WAFreezing02","FlyWAFreezing02","WAVendorStand01","FlyWAVendorStand01","WAVendorStand02","FlyWAVendorStand02","WAVendorStand03","FlyWAVendorStand03","WAVendorTalk","FlyWAVendorTalk","WALean01","FlyWALean01","WALean02","FlyWALean02","WALean03","FlyWALean03","WALeanTalk","FlyWALeanTalk","WABoatWheel","FlyWABoatWheel","WASmithLoop","FlyWASmithLoop","WAScrubbing","FlyWAScrubbing","WAWeaponSharpen","FlyWAWeaponSharpen","WAStirring","FlyWAStirring","WAPerch01","FlyWAPerch01","WAPerch02","FlyWAPerch02","HoldWeapon","FlyHoldWeapon","WABarrelWalk","FlyWABarrelWalk","WAPourHold","FlyWAPourHold","CastStrong","FlyCastStrong","CastCurse","FlyCastCurse","CastSweep","FlyCastSweep","CastStrongUp","FlyCastStrongUp","WABoatWheelStand","FlyWABoatWheelStand","WASmithStand","FlyWASmithStand","WACrankStand","FlyWACrankStand","WAPourWalk","FlyWAPourWalk","FalconeerStart","FlyFalconeerStart","FalconeerLoop","FlyFalconeerLoop","FalconeerEnd","FlyFalconeerEnd","WADrunkDrink","FlyWADrunkDrink","WAStandEat","FlyWAStandEat","WAStandDrink","FlyWAStandDrink","WABound01","FlyWABound01","WABound02","FlyWABound02","CombatAbility1H03Off","FlyCombatAbility1H03Off","CombatAbilityDualWield01","FlyCombatAbilityDualWield01","WACradle01","FlyWACradle01","LocSummon","FlyLocSummon","LoadWeapon","FlyLoadWeapon","ArtOffLoop","FlyArtOffLoop","WADead01","FlyWADead01","WADead02","FlyWADead02","WADead03","FlyWADead03","WADead04","FlyWADead04","WADead05","FlyWADead05","WADead06","FlyWADead06","WADead07","FlyWADead07","GiantRun","FlyGiantRun","BarTendEmoteCheer","FlyBarTendEmoteCheer","BarTendEmoteTalkQuestion","FlyBarTendEmoteTalkQuestion","BarTendEmoteTalkExclamation","FlyBarTendEmoteTalkExclamation","BarTendWalk","FlyBarTendWalk","BartendShuffleLeft","FlyBartendShuffleLeft","BarTendShuffleRight","FlyBarTendShuffleRight","BarTendCustomSpell01","FlyBarTendCustomSpell01","BarTendCustomSpell02","FlyBarTendCustomSpell02","BarTendCustomSpell03","FlyBarTendCustomSpell03","BarServerEmoteCheer","FlyBarServerEmoteCheer","BarServerEmoteTalkQuestion","FlyBarServerEmoteTalkQuestion","BarServerEmoteTalkExclamation","FlyBarServerEmoteTalkExclamation","BarServerCustomSpell01","FlyBarServerCustomSpell01","BarServerCustomSpell02","FlyBarServerCustomSpell02","BarServerCustomSpell03","FlyBarServerCustomSpell03","BarPatronEmoteDrink","FlyBarPatronEmoteDrink","BarPatronEmoteCheer","FlyBarPatronEmoteCheer","BarPatronCustomSpell01","FlyBarPatronCustomSpell01","BarPatronCustomSpell02","FlyBarPatronCustomSpell02","BarPatronCustomSpell03","FlyBarPatronCustomSpell03","HoldDart","FlyHoldDart","ReadyDart","FlyReadyDart","AttackDart","FlyAttackDart","LoadDart","FlyLoadDart","WADartTargetStand","FlyWADartTargetStand","WADartTargetEmoteTalk","FlyWADartTargetEmoteTalk","BarPatronSitEmoteCheer","FlyBarPatronSitEmoteCheer","BarPatronSitCustomSpell01","FlyBarPatronSitCustomSpell01","BarPatronSitCustomSpell02","FlyBarPatronSitCustomSpell02","BarPatronSitCustomSpell03","FlyBarPatronSitCustomSpell03","BarPianoStand","FlyBarPianoStand","BarPianoEmoteTalk","FlyBarPianoEmoteTalk","WAHearthSit","FlyWAHearthSit","WAHearthSitEmoteCry","FlyWAHearthSitEmoteCry","WAHearthSitEmoteCheer","FlyWAHearthSitEmoteCheer","WAHearthSitCustomSpell01","FlyWAHearthSitCustomSpell01","WAHearthSitCustomSpell02","FlyWAHearthSitCustomSpell02","WAHearthSitCustomSpell03","FlyWAHearthSitCustomSpell03","WAHearthStand","FlyWAHearthStand","WAHearthStandEmoteCheer","FlyWAHearthStandEmoteCheer","WAHearthStandEmoteTalk","FlyWAHearthStandEmoteTalk","WAHearthStandCustomSpell01","FlyWAHearthStandCustomSpell01","WAHearthStandCustomSpell02","FlyWAHearthStandCustomSpell02","WAHearthStandCustomSpell03","FlyWAHearthStandCustomSpell03","WAScribeStart","FlyWAScribeStart","WAScribeLoop","FlyWAScribeLoop","WAScribeEnd","FlyWAScribeEnd","WAEmoteScribe","FlyWAEmoteScribe","Haymaker","FlyHaymaker","HaymakerPrecast","FlyHaymakerPrecast","ChannelCastOmniUp","FlyChannelCastOmniUp","DHJumpLandRun","FlyDHJumpLandRun","Cinematic01","FlyCinematic01","Cinematic02","FlyCinematic02","Cinematic03","FlyCinematic03","Cinematic04","FlyCinematic04","Cinematic05","FlyCinematic05","Cinematic06","FlyCinematic06","Cinematic07","FlyCinematic07","Cinematic08","FlyCinematic08","Cinematic09","FlyCinematic09","Cinematic10","FlyCinematic10","TakeOffStart","FlyTakeOffStart","TakeOffFinish","FlyTakeOffFinish","LandStart","FlyLandStart","LandFinish","FlyLandFinish","WAWalkTalk","FlyWAWalkTalk","WAPerch03","FlyWAPerch03","CarriageMountMoving","FlyCarriageMountMoving","TakeOffFinishFly","FlyTakeOffFinishFly","CombatAbility2HBig02","FlyCombatAbility2HBig02","MountWide","FlyMountWide","EmoteTalkSubdued","FlyEmoteTalkSubdued","WASit04","FlyWASit04","MountSummon","FlyMountSummon","EmoteSelfie","FlyEmoteSelfie","CustomSpell11","FlyCustomSpell11","CustomSpell12","FlyCustomSpell12","CustomSpell13","FlyCustomSpell13","CustomSpell14","FlyCustomSpell14","CustomSpell15","FlyCustomSpell15","CustomSpell16","FlyCustomSpell16","CustomSpell17","FlyCustomSpell17","CustomSpell18","FlyCustomSpell18","CustomSpell19","FlyCustomSpell19","CustomSpell20","FlyCustomSpell20","AdvFlyLeft","FlyAdvFlyLeft","AdvFlyRight","FlyAdvFlyRight","AdvFlyForward","FlyAdvFlyForward","AdvFlyBackward","FlyAdvFlyBackward","AdvFlyUp","FlyAdvFlyUp","AdvFlyDown","FlyAdvFlyDown","AdvFlyForwardGlide","FlyAdvFlyForwardGlide","AdvFlyRoll","FlyAdvFlyRoll","ProfCookingLoop","FlyProfCookingLoop","ProfCookingStart","FlyProfCookingStart","ProfCookingEnd","FlyProfCookingEnd","WACurious","FlyWACurious","WAAlert","FlyWAAlert","WAInvestigate","FlyWAInvestigate","WAInteraction","FlyWAInteraction","WAThreaten","FlyWAThreaten","WAReact01","FlyWAReact01","WAReact02","FlyWAReact02","AdvFlyRollStart","FlyAdvFlyRollStart","AdvFlyRollEnd","FlyAdvFlyRollEnd","EmpBreathPrecast","FlyEmpBreathPrecast","EmpBreathPrecastChannel","FlyEmpBreathPrecastChannel","EmpBreathSpellCast","FlyEmpBreathSpellCast","EmpBreathSpellCastChannel","FlyEmpBreathSpellCastChannel","DracFlyBreathTakeoffStart","FlyDracFlyBreathTakeoffStart","DracFlyBreathTakeoffFinish","FlyDracFlyBreathTakeoffFinish","DracFlyBreath","FlyDracFlyBreath","DracFlyBreathLandStart","FlyDracFlyBreathLandStart","DracFlyBreathLandFinish","FlyDracFlyBreathLandFinish","DracAirDashLeft","FlyDracAirDashLeft","DracAirDashForward","FlyDracAirDashForward","DracAirDashBackward","FlyDracAirDashBackward","DracAirDashRight","FlyDracAirDashRight","LivingWorldProximityEnter","FlyLivingWorldProximityEnter","AdvFlyDownEnd","FlyAdvFlyDownEnd","LivingWorldProximityLoop","FlyLivingWorldProximityLoop","LivingWorldProximityLeave","FlyLivingWorldProximityLeave","EmpAirBarragePrecast","FlyEmpAirBarragePrecast","EmpAirBarragePrecastChannel","FlyEmpAirBarragePrecastChannel","EmpAirBarrageSpellCast","FlyEmpAirBarrageSpellCast","DracClawSwipeLeft","FlyDracClawSwipeLeft","DracClawSwipeRight","FlyDracClawSwipeRight","DracHoverIdle","FlyDracHoverIdle","DracHoverLeft","FlyDracHoverLeft","DracHoverRight","FlyDracHoverRight","DracHoverBackward","FlyDracHoverBackward","DracHoverForward","FlyDracHoverForward","DracAttackWings","FlyDracAttackWings","DracAttackTail","FlyDracAttackTail","AdvFlyStart","FlyAdvFlyStart","AdvFlyLand","FlyAdvFlyLand","AdvFlyLandRun","FlyAdvFlyLandRun","AdvFlyStrafeLeft","FlyAdvFlyStrafeLeft","AdvFlyStrafeRight","FlyAdvFlyStrafeRight","AdvFlyIdle","FlyAdvFlyIdle","AdvFlyRollRight","FlyAdvFlyRollRight","AdvFlyRollRightEnd","FlyAdvFlyRollRightEnd","AdvFlyRollLeft","FlyAdvFlyRollLeft","AdvFlyRollLeftEnd","FlyAdvFlyRollLeftEnd","AdvFlyFlap","FlyAdvFlyFlap","DracHoverDracClawSwipeLeft","FlyDracHoverDracClawSwipeLeft","DracHoverDracClawSwipeRight","FlyDracHoverDracClawSwipeRight","DracHoverDracAttackWings","FlyDracHoverDracAttackWings","DracHoverReadySpellOmni","FlyDracHoverReadySpellOmni","DracHoverSpellCastOmni","FlyDracHoverSpellCastOmni","DracHoverChannelSpellOmni","FlyDracHoverChannelSpellOmni","DracHoverReadySpellDirected","FlyDracHoverReadySpellDirected","DracHoverChannelSpellDirected","FlyDracHoverChannelSpellDirected","DracHoverSpellCastDirected","FlyDracHoverSpellCastDirected","DracHoverCastOutStrong","FlyDracHoverCastOutStrong","DracHoverBattleRoar","FlyDracHoverBattleRoar","DracHoverEmpBreathSpellCast","FlyDracHoverEmpBreathSpellCast","DracHoverEmpBreathSpellCastChannel","FlyDracHoverEmpBreathSpellCastChannel","LivingWorldTimeOfDayEnter","FlyLivingWorldTimeOfDayEnter","LivingWorldTimeOfDayLoop","FlyLivingWorldTimeOfDayLoop","LivingWorldTimeOfDayLeave","FlyLivingWorldTimeOfDayLeave","LivingWorldWeatherEnter","FlyLivingWorldWeatherEnter","LivingWorldWeatherLoop","FlyLivingWorldWeatherLoop","LivingWorldWeatherLeave","FlyLivingWorldWeatherLeave","AdvFlyDownStart","FlyAdvFlyDownStart","AdvFlyFlapBig","FlyAdvFlyFlapBig","DracHoverReadyUnarmed","FlyDracHoverReadyUnarmed","DracHoverAttackUnarmed","FlyDracHoverAttackUnarmed","DracHoverParryUnarmed","FlyDracHoverParryUnarmed","DracHoverCombatWound","FlyDracHoverCombatWound","DracHoverCombatCritical","FlyDracHoverCombatCritical","DracHoverAttackTail","FlyDracHoverAttackTail","Glide","FlyGlide","GlideEnd","FlyGlideEnd","DracClawSwipe","FlyDracClawSwipe","DracHoverDracClawSwipe","FlyDracHoverDracClawSwipe","AdvFlyFlapUp","FlyAdvFlyFlapUp","AdvFlySlowFall","FlyAdvFlySlowFall","AdvFlyFlapFoward","FlyAdvFlyFlapFoward","DracSpellCastWings","FlyDracSpellCastWings","DracHoverDracSpellCastWings","FlyDracHoverDracSpellCastWings","DracAirDashVertical","FlyDracAirDashVertical","DracAirDashRefresh","FlyDracAirDashRefresh","SkinningLoop","FlySkinningLoop","SkinningStart","FlySkinningStart","SkinningEnd","FlySkinningEnd","AdvFlyForwardGlideSlow","FlyAdvFlyForwardGlideSlow","AdvFlyForwardGlideFast","FlyAdvFlyForwardGlideFast","AdvFlySecondFlapUp","FlyAdvFlySecondFlapUp","FloatIdle","FlyFloatIdle","FloatWalk","FlyFloatWalk","CinematicTalk","FlyCinematicTalk","CinematicWAGuardEmoteSlam01","FlyCinematicWAGuardEmoteSlam01","WABlowHorn","FlyWABlowHorn","MountExtraWide","FlyMountExtraWide","WA2HIdle","FlyWA2HIdle","HerbalismLoop","FlyHerbalismLoop","CookingLoop","FlyCookingLoop","WAWeaponSharpenNoSheathe","FlyWAWeaponSharpenNoSheathe","CinematicDeath","FlyCinematicDeath","CinematicDeathPose","FlyCinematicDeathPose","EmpSlamPrecast","FlyEmpSlamPrecast","EmpSlamPrecastChannel","FlyEmpSlamPrecastChannel","EmpSlamSpellCast","FlyEmpSlamSpellCast","Climb","FlyClimb","ClimbStart","FlyClimbStart","ClimbEnd","FlyClimbEnd","MountLeanLeft","FlyMountLeanLeft","MountLeanRight","FlyMountLeanRight","MountDive","FlyMountDive","MountCrouch","FlyMountCrouch","WAShovelLoop","FlyWAShovelLoop","EmoteTalkFrustrated","FlyEmoteTalkFrustrated"];t.getAnimationName=e=>e in r?r[e]:"UnknownAnim_"+e},6500:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCM2File=function(e){let t=new a.BinaryReader(e);if(1129132614!=t.readUInt32LE())throw new Error("Encountered wrong magic number. File data is probably not CM2 data?");const r=t.readUInt32LE();if(1e3!=r)throw new Error("Incompatible version encountered in CM2. Supported versions are: 1000. Encountered: "+r);const i=t.readUInt32LE(),l=t.readUInt32LE(),F=t.readUInt32LE(),C=t.readUInt32LE(),w=t.readUInt32LE(),S=t.readUInt32LE(),A=t.readUInt32LE(),E=t.readUInt32LE(),M=t.readUInt32LE(),k=t.readUInt32LE(),D=t.readUInt32LE(),T=t.readUInt32LE(),B=t.readUInt32LE(),L=t.readUInt32LE(),P=t.readUInt32LE(),O=t.readUInt32LE(),U=t.readUInt32LE(),I=t.readUInt32LE(),W=t.readUInt32LE(),R=t.readUInt32LE(),z=t.readUInt32LE(),j=t.readUInt32LE(),H=t.readUInt32LE(),N=t.readUInt32LE(),G=t.readUInt32LE(),V=t.readUInt32LE(),q=t.readUInt32LE();let Z;const K=t.readRemainingBytes();if(Z=(0,n.inflate)(K),Z.length<q)throw new Error("Compressed data appears to be smaller than expected? Received: "+Z.length+" expected: "+q);t=new a.BinaryReader(Z.buffer),t.seek(P);const Y=(0,o.readArray)(t,(e=>e.readUInt16LE()));t.seek(L);const X=(0,o.readArray)(t,u);t.seek(z);const J=(0,o.readArray)(t,(e=>e.readInt16LE()));t.seek(R);const Q=(0,o.readArray)(t,y);t.seek(S);const $=(0,o.readArray)(t,(e=>e.readInt16LE()));t.seek(A);const ee=(0,o.readArray)(t,(e=>e.readInt16LE()));t.seek(w);const te=(0,o.readArray)(t,d);t.seek(j);const re=(0,o.readArray)(t,g);t.seek(B);const ne=(0,o.readArray)(t,(e=>e.readUInt16LE()));t.seek(M);const ae=(0,o.readArray)(t,f);t.seek(N);const oe=(0,o.readArray)(t,(e=>e.readInt16LE()));t.seek(H);const ie=(0,o.readArray)(t,v);t.seek(G);const le=(0,o.readArray)(t,x);t.seek(V);const se=(0,o.readArray)(t,b);t.seek(F);const ue=(0,o.readArray)(t,(e=>e.readUInt16LE()));t.seek(C);const de=(0,o.readArray)(t,c);t.seek(D);const ce=(0,o.readArray)(t,(e=>e.readInt16LE()));t.seek(T);const he=(0,o.readArray)(t,(e=>e.readInt16LE()));t.seek(k);const fe=(0,o.readArray)(t,p);t.seek(W);const pe=(0,o.readArray)(t,(e=>e.readInt16LE()));t.seek(I);const me=(0,o.readArray)(t,m);t.seek(E);const ye=(0,o.readArray)(t,h);t.seek(U);const ge=(0,o.readArray)(t,(e=>e.readInt16LE()));t.seek(O);const _e=(0,o.readArray)(t,_);t.seek(l);return{flags:i,animationLookup:Y,animations:X,attachmentIdLookup:J,attachments:Q,boneCombos:$,boneIdLookup:ee,bones:te,colors:re,globalLoops:ne,materials:ae,particleEmitterGeosets:oe,particleEmitters:ie,particles:le,ribbonEmitters:se,skinTriangles:ue,submeshes:de,textureCombos:ce,textureIdLookup:he,textures:fe,textureTransformCombos:pe,textureTransforms:me,textureUnits:ye,textureWeightCombos:ge,textureWeights:_e,vertices:(0,o.readArray)(t,s)}},t.parseCM2BoneFile=function(e){let t;t=(0,n.inflate)(e);var r=new a.BinaryReader(t);return{boneIds:(0,o.readArray)(r,(e=>e.readUInt16LE())),boneOffsetMatrices:(0,o.readArray)(r,o.readFloat44)}};const n=r(1668),a=r(9266),o=r(4337);function i(e,t){return{keys:(0,o.readArray)(e,(e=>e.readInt16LE())),values:(0,o.readArray)(e,t)}}function l(e,t){const r={interpolationType:e.readInt16LE(),globalSequence:e.readInt16LE(),animations:(0,o.readArray)(e,(e=>function(e,t){const r={timeStamps:(0,o.readArray)(e,(e=>e.readInt32LE())),values:(0,o.readArray)(e,t)};return r}(e,t)))};return r}function s(e){return{position:(0,o.readFloat3)(e),normal:(0,o.readFloat3)(e),texCoords1:(0,o.readFloat2)(e),texCoords2:(0,o.readFloat2)(e),boneWeights:[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()],boneIndices:[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()]}}function u(e){return{id:e.readUInt16LE(),variationIndex:e.readUInt16LE(),duration:e.readUInt32LE(),flags:e.readUInt32LE(),frequency:e.readUInt16LE(),blendTimeIn:e.readUInt16LE(),blendTimeOut:e.readUInt16LE(),extentMin:(0,o.readFloat3)(e),extentMax:(0,o.readFloat3)(e),variationNext:e.readInt16LE(),aliasNext:e.readUInt16LE()}}function d(e){return{keyBoneId:e.readInt32LE(),flags:e.readUInt32LE(),parentBoneId:e.readInt16LE(),subMeshId:e.readInt16LE(),boneNameCRC:e.readUInt32LE(),pivot:(0,o.readFloat3)(e),translation:l(e,o.readFloat3),rotation:l(e,o.readQuaternion),scale:l(e,o.readFloat3)}}function c(e){return{submeshId:e.readUInt16LE(),level:e.readUInt16LE(),vertexStart:e.readUInt16LE(),vertexCount:e.readUInt16LE(),triangleStart:e.readUInt16LE(),triangleCount:e.readUInt16LE(),centerBoneIndex:e.readUInt16LE(),centerPosition:(0,o.readFloat3)(e),sortCenterPosition:(0,o.readFloat3)(e),sortRadius:e.readFloatLE()}}function h(e){return{flags:e.readUInt8(),priority:e.readUInt8(),shaderId:e.readUInt16LE(),skinSectionIndex:e.readUInt16LE(),flags2:e.readUInt16LE(),colorIndex:e.readInt16LE(),materialIndex:e.readUInt16LE(),materialLayer:e.readUInt16LE(),textureCount:e.readUInt16LE(),textureComboIndex:e.readUInt16LE(),textureCoordComboIndex:e.readUInt16LE(),textureWeightComboIndex:e.readUInt16LE(),textureTransformComboIndex:e.readUInt16LE()}}function f(e){return{flags:e.readUInt16LE(),blendingMode:e.readUInt16LE()}}function p(e){return{type:e.readInt32LE(),flags:e.readUInt32LE(),textureId:e.readUInt32LE()}}function m(e){return{translation:l(e,o.readFloat3),rotation:l(e,o.readFloat4),scaling:l(e,o.readFloat3)}}function y(e){return{id:e.readInt32LE(),bone:e.readInt32LE(),position:(0,o.readFloat3)(e)}}function g(e){return{color:l(e,o.readFloat3),alpha:l(e,(e=>e.readUInt16LE()))}}function _(e){return{weights:l(e,(e=>e.readUInt16LE()))}}function v(e){return{particleId:e.readInt32LE(),flags:e.readUInt32LE(),position:(0,o.readFloat3)(e),bone:e.readInt16LE(),texture:e.readInt16LE(),blendingType:e.readUInt8(),emitterType:e.readUInt8(),particleColorIndex:e.readUInt16LE(),textureTileRotation:e.readUInt16LE(),textureDimensionsRows:e.readUInt16LE(),textureDimensionsColumns:e.readUInt16LE(),lifespanVary:e.readFloatLE(),emissionRateVary:e.readFloatLE(),colorTrack:i(e,o.readFloat3),alphaTrack:i(e,(e=>e.readUInt16LE())),scaleTrack:i(e,o.readFloat2),scaleVary:(0,o.readFloat2)(e),headCellTrack:i(e,(e=>e.readUInt16LE())),tailCellTrack:i(e,(e=>e.readUInt16LE())),tailLength:e.readFloatLE(),twinkleSpeed:e.readFloatLE(),twinklePercent:e.readFloatLE(),twinkleScale:(0,o.readFloat2)(e),burstMultiplier:e.readFloatLE(),drag:e.readFloatLE(),baseSpin:e.readFloatLE(),baseSpinVary:e.readFloatLE(),spin:e.readFloatLE(),spinVary:e.readFloatLE(),tumbleModelRotationSpeedMin:(0,o.readFloat3)(e),tumbleModelRotationSpeedMax:(0,o.readFloat3)(e),windVector:(0,o.readFloat3)(e),windTime:e.readFloatLE(),followSpeed1:e.readFloatLE(),followScale1:e.readFloatLE(),followSpeed2:e.readFloatLE(),followScale2:e.readFloatLE(),multiTextureParamX:(0,o.readFloat2)(e),multiTextureParam0:[(0,o.readFloat2)(e),(0,o.readFloat2)(e)],multiTextureParam1:[(0,o.readFloat2)(e),(0,o.readFloat2)(e)],emissionSpeed:l(e,(e=>e.readFloatLE())),speedVariation:l(e,(e=>e.readFloatLE())),verticalRange:l(e,(e=>e.readFloatLE())),horizontalRange:l(e,(e=>e.readFloatLE())),gravity:l(e,o.readFloat3),lifespan:l(e,(e=>e.readFloatLE())),emissionAreaLength:l(e,(e=>e.readFloatLE())),emissionAreaWidth:l(e,(e=>e.readFloatLE())),zSource:l(e,(e=>e.readFloatLE())),emissionRate:l(e,(e=>e.readFloatLE())),splinePoints:(0,o.readArray)(e,o.readFloat3),enabledIn:l(e,(e=>e.readUInt8()))}}function x(e){return{zSource:e.readFloatLE(),colorMult:e.readFloatLE(),alphaMult:e.readFloatLE(),alphaCutoff:i(e,(e=>e.readUInt16LE()))}}function b(e){return{ribbonId:e.readInt32LE(),boneIndex:e.readInt32LE(),position:(0,o.readFloat3)(e),edgesPerSecond:e.readFloatLE(),edgeLifetime:e.readFloatLE(),gravity:e.readFloatLE(),textureRows:e.readInt16LE(),textureCols:e.readInt16LE(),priorityPlane:e.readInt16LE(),texSlotTrack:l(e,(e=>e.readUInt16LE())),visibilityTrack:l(e,(e=>e.readUInt8())),textureIndices:(0,o.readArray)(e,(e=>e.readInt16LE())),materialIndices:(0,o.readArray)(e,(e=>e.readInt16LE())),colorTrack:l(e,o.readFloat3),alphaTrack:l(e,(e=>e.readUInt16LE())),heightAboveTrack:l(e,(e=>e.readFloatLE())),heightBelowTrack:l(e,(e=>e.readFloatLE()))}}},6604:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Float44=t.Float33=void 0;const n=r(7518),a="undefined"!=typeof Float32Array?Float32Array:Array;var o,i;!function(e){function t(e){if(e)return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e;const t=new a(9);return a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}e.create=function(...e){const t=new a(9);for(let r=0;r<e.length&&r<9;r++)t[r]=e[r];return t},e.identity=t,e.from44=function(e,r){return(r=r||t())[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r},e.fromQuat=function(e,r){return(r=r||t())[0]=1-2*(e[1]*e[1]-e[2]*e[2]),r[1]=2*(e[1]*e[0]+e[3]*e[2]),r[2]=2*(e[2]*e[0]-e[3]*e[1]),r[3]=2*(e[1]*e[0]-e[3]*e[2]),r[4]=1-2*(e[0]*e[0]-e[2]*e[2]),r[5]=2*(e[2]*e[1]+e[3]*e[0]),r[6]=2*(e[2]*e[0]+e[3]*e[1]),r[7]=2*(e[2]*e[1]-e[3]*e[0]),r[8]=1-2*(e[0]*e[0]-e[1]*e[1]),r},e.copy=function(e,r){return(r=r||t())[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r},e.multiply=function(e,r,n){n=n||t();const a=e[0],o=e[1],i=e[2],l=e[3],s=e[4],u=e[5],d=e[6],c=e[7],h=e[8],f=r[0],p=r[1],m=r[2],y=r[3],g=r[4],_=r[5],v=r[6],x=r[7],b=r[8];return n[0]=f*a+p*l+m*d,n[1]=f*o+p*s+m*c,n[2]=f*i+p*u+m*h,n[3]=y*a+g*l+_*d,n[4]=y*o+g*s+_*c,n[5]=y*i+g*u+_*h,n[6]=v*a+x*l+b*d,n[7]=v*o+x*s+b*c,n[8]=v*i+x*u+b*h,n},e.scale=function(e,r,n){return(n=n||t())[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*r,n},e.transformDir=function(e,t,r){let n=e[0],a=e[1],o=e[2];return r[0]=n*t[0]+a*t[3]+o*t[6],r[1]=n*t[1]+a*t[4]+o*t[7],r[2]=n*t[2]+a*t[5]+o*t[8],r}}(o||(t.Float33=o={})),function(e){function t(e){if(e)return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e;const t=new a(16);return a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}e.identity=t,e.create=function(...e){const t=new a(16);for(let r=0;r<e.length&&r<16;r++)t[r]=e[r];return t},e.copy=function(e,r){return(r=r||t())[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},e.tranpose=function(e,r){if(e===(r=r||t())){let t=r[1];return e[1]=r[4],e[4]=t,t=r[2],e[2]=r[8],e[8]=t,t=e[3],e[3]=r[12],e[12]=t,t=e[6],e[6]=r[9],e[9]=t,t=e[7],e[7]=r[13],e[13]=t,t=e[11],e[11]=r[14],e[14]=t,r}return e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15],e},e.invert=function(e,r){r=r||t();const n=e[0],a=e[1],o=e[2],i=e[3],l=e[4],s=e[5],u=e[6],d=e[7],c=e[8],h=e[9],f=e[10],p=e[11],m=e[12],y=e[13],g=e[14],_=e[15];var v=n*s-a*l,x=n*u-o*l,b=n*d-i*l,F=a*u-o*s,C=a*d-i*s,w=o*d-i*u,S=c*y-h*m,A=c*g-f*m,E=c*_-p*m,M=h*g-f*y,k=h*_-p*y,D=f*_-p*g,T=v*D-x*k+b*M+F*E-C*A+w*S;return T?(T=1/T,r[0]=(s*D-u*k+d*M)*T,r[1]=(o*k-a*D-i*M)*T,r[2]=(y*w-g*C+_*F)*T,r[3]=(f*C-h*w-p*F)*T,r[4]=(u*E-l*D-d*A)*T,r[5]=(n*D-o*E+i*A)*T,r[6]=(g*b-m*w-_*x)*T,r[7]=(c*w-f*b+p*x)*T,r[8]=(l*k-s*E+d*S)*T,r[9]=(a*E-n*k-i*S)*T,r[10]=(m*C-y*b+_*v)*T,r[11]=(h*b-c*C-p*v)*T,r[12]=(s*A-l*M-u*S)*T,r[13]=(n*M-a*A+o*S)*T,r[14]=(y*x-m*F-g*v)*T,r[15]=(c*F-h*x+f*v)*T,r):(t(r),r)},e.multiply=function(e,r,n){n=n||t();const a=e[0],o=e[1],i=e[2],l=e[3],s=e[4],u=e[5],d=e[6],c=e[7],h=e[8],f=e[9],p=e[10],m=e[11],y=e[12],g=e[13],_=e[14],v=e[15],x=r[0],b=r[1],F=r[2],C=r[3],w=r[4],S=r[5],A=r[6],E=r[7],M=r[8],k=r[9],D=r[10],T=r[11],B=r[12],L=r[13],P=r[14],O=r[15];return n[0]=x*a+b*s+F*h+C*y,n[1]=x*o+b*u+F*f+C*g,n[2]=x*i+b*d+F*p+C*_,n[3]=x*l+b*c+F*m+C*v,n[4]=w*a+S*s+A*h+E*y,n[5]=w*o+S*u+A*f+E*g,n[6]=w*i+S*d+A*p+E*_,n[7]=w*l+S*c+A*m+E*v,n[8]=M*a+k*s+D*h+T*y,n[9]=M*o+k*u+D*f+T*g,n[10]=M*i+k*d+D*p+T*_,n[11]=M*l+k*c+D*m+T*v,n[12]=B*a+L*s+P*h+O*y,n[13]=B*o+L*u+P*f+O*g,n[14]=B*i+L*d+P*p+O*_,n[15]=B*l+L*c+P*m+O*v,n},e.translate=function(e,r,n){return e===(n=n||t())?(n[12]=e[0]*r[0]+e[4]*r[1]+e[8]*r[2]+e[12],n[13]=e[1]*r[0]+e[5]*r[1]+e[9]*r[2]+e[13],n[14]=e[2]*r[0]+e[6]*r[1]+e[10]*r[2]+e[14],n[15]=e[3]*r[0]+e[7]*r[1]+e[11]*r[2]+e[15]):(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[0]*r[0]+e[4]*r[1]+e[8]*r[2]+e[12],n[13]=e[1]*r[0]+e[5]*r[1]+e[9]*r[2]+e[13],n[14]=e[2]*r[0]+e[6]*r[1]+e[10]*r[2]+e[14],n[15]=e[3]*r[0]+e[7]*r[1]+e[11]*r[2]+e[15]),n},e.scale=function(e,r,n){(n=n||t())[0]=e[0]*r[0],n[1]=e[1]*r[0],n[2]=e[2]*r[0],n[3]=e[3]*r[0],n[4]=e[4]*r[1],n[5]=e[5]*r[1],n[6]=e[6]*r[1],n[7]=e[7]*r[1],n[8]=e[8]*r[2],n[9]=e[9]*r[2],n[10]=e[10]*r[2],n[11]=e[11]*r[2],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]},e.rotateX=function(e,r,n){e!==(n=n||t())&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]);const a=Math.sin(r),o=Math.cos(r),i=e[4],l=e[5],s=e[6],u=e[7],d=e[8],c=e[9],h=e[10],f=e[11];return n[4]=i*o+d*a,n[5]=l*o+c*a,n[6]=s*o+h*a,n[7]=u*o+f*a,n[8]=d*o-i*a,n[9]=c*o-l*a,n[10]=h*o-s*a,n[11]=f*o-u*a,n},e.rotateY=function(e,r,n){e!==(n=n||t())&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]);const a=Math.sin(r),o=Math.cos(r),i=e[0],l=e[1],s=e[2],u=e[3],d=e[8],c=e[9],h=e[10],f=e[11];return n[0]=i*o-d*a,n[1]=l*o-c*a,n[2]=s*o-h*a,n[3]=u*o-f*a,n[8]=i*a+d*o,n[9]=l*a+c*o,n[10]=s*a+h*o,n[11]=u*a+f*o,n},e.rotateZ=function(e,r,n){e!==(n=n||t())&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]);const a=Math.sin(r),o=Math.cos(r),i=e[0],l=e[1],s=e[2],u=e[3],d=e[4],c=e[5],h=e[6],f=e[7];return n[0]=i*o+d*a,n[1]=l*o+c*a,n[2]=s*o+h*a,n[3]=u*o+f*a,n[4]=d*o-i*a,n[5]=c*o-l*a,n[6]=h*o-s*a,n[7]=f*o-u*a,n},e.createWithTranslation=function(e,r){return(r=r||t())[12]=e[0],r[13]=e[1],r[14]=e[2],r},e.fromQuat=function(e,r){r=r||t();const n=e[0],a=e[1],o=e[2],i=e[3],l=n+n,s=a+a,u=o+o,d=n*l,c=n*s,h=n*u,f=a*s,p=a*u,m=o*u,y=i*l,g=i*s,_=i*u;return r[0]=1-(f+m),r[1]=c+_,r[2]=h-g,r[3]=0,r[4]=c-_,r[5]=1-(d+m),r[6]=p+y,r[7]=0,r[8]=h+g,r[9]=p-y,r[10]=1-(d+f),r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},e.getTranslation=function(e,t){return(t=t||n.Float3.zero())[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.transformPoint=function(e,t,r){r=r||n.Float3.zero();let a=e[0],o=e[1],i=e[2],l=t[3]*a+t[7]*o+t[11]*i+t[15];return l=l||1,r[0]=(t[0]*a+t[4]*o+t[8]*i+t[12])/l,r[1]=(t[1]*a+t[5]*o+t[9]*i+t[13])/l,r[2]=(t[2]*a+t[6]*o+t[10]*i+t[14])/l,r},e.transformDirection=function(e,t,r){r=r||n.Float4.zero();const a=e[0],o=e[1],i=e[2],l=e[3];return r[0]=t[0]*a+t[4]*o+t[8]*i+t[12]*l,r[1]=t[1]*a+t[5]*o+t[9]*i+t[13]*l,r[2]=t[2]*a+t[6]*o+t[10]*i+t[14]*l,r[3]=t[3]*a+t[7]*o+t[11]*i+t[15]*l,r},e.perspective=function(t,r,n,a,o){o=o||e.identity();const i=1/Math.tan(t/2);if(o[0]=i/r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,null!==a&&a!==1/0){const e=1/(n-a);o[10]=(a+n)*e,o[14]=2*a*n*e}else o[10]=-1,o[14]=-2*n;return o},e.getColumn=function(e,t){return n.Float4.create(e[4*t+0],e[4*t+1],e[4*t+2],0)},e.setColumn=function(e,t,r){for(let n=0;n<4;n++)e[4*t+n]=r[n]},e.lookAt=function(e,t,r,a){const o=n.Float3.normalize(n.Float3.subtract(e,t)),i=n.Float3.normalize(n.Float3.cross(r,o)),l=n.Float3.normalize(n.Float3.cross(o,i));return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=0,a[4]=l[0],a[5]=l[1],a[6]=l[2],a[7]=0,a[8]=o[0],a[9]=o[1],a[10]=o[2],a[11]=0,a[12]=e[0],a[13]=e[1],a[14]=e[2],a[15]=1,a}}(i||(t.Float44=i={}))},6677:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryReader=void 0,t.BinaryReader=class{constructor(e){this.dataView=new DataView(e),this.offset=0}readBool(){const e=0!=this.dataView.getUint8(this.offset);return this.offset+=1,e}readUInt8(){const e=this.dataView.getUint8(this.offset);return this.offset+=1,e}readInt8(){const e=this.dataView.getInt8(this.offset);return this.offset+=1,e}readUInt16BE(){const e=this.dataView.getUint16(this.offset);return this.offset+=2,e}readUInt16LE(){const e=this.dataView.getUint16(this.offset,!0);return this.offset+=2,e}readInt16BE(){const e=this.dataView.getInt16(this.offset);return this.offset+=2,e}readInt16LE(){const e=this.dataView.getInt16(this.offset,!0);return this.offset+=2,e}readUInt32BE(){const e=this.dataView.getUint32(this.offset);return this.offset+=4,e}readUInt32LE(){const e=this.dataView.getUint32(this.offset,!0);return this.offset+=4,e}readInt32BE(){const e=this.dataView.getInt32(this.offset,!0);return this.offset+=4,e}readInt32LE(){const e=this.dataView.getInt32(this.offset,!0);return this.offset+=4,e}readFloatBE(){const e=this.dataView.getFloat32(this.offset);return this.offset+=4,e}readFloatLE(){const e=this.dataView.getFloat32(this.offset,!0);return this.offset+=4,e}readRemainingBytes(){return new Uint8Array(this.dataView.buffer,this.offset)}seek(e){this.offset=e}}},6919:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function l(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WoWModelServerDataProvider=void 0;const a=r(6466),o=r(3474);t.WoWModelServerDataProvider=class{constructor(e,t){this.rootPath=e,this.progress=t}loadBoneFile(e){return n(this,void 0,void 0,(function*(){const t=`${this.rootPath}/modelviewer/bone/${e}.cbone`;try{const e=yield fetch(t);if(!e.ok)return null;const r=yield e.arrayBuffer();return(0,a.parseCM2BoneFile)(r)}catch(e){return null}}))}loadModelFile(e){return n(this,void 0,void 0,(function*(){const t=`${this.rootPath}/modelviewer/models/${e}.cm2`;try{const e=yield fetch(t);if(!e.ok)return null;const r=yield e.arrayBuffer();return(0,a.parseCM2File)(r)}catch(e){return null}}))}loadWorldModelFile(e){return n(this,void 0,void 0,(function*(){const t=`${this.rootPath}/modelviewer/models/${e}.cwmo`;try{const e=yield fetch(t);if(!e.ok)return null;const r=yield e.arrayBuffer();return(0,o.parseCWMOFile)(r)}catch(e){return null}}))}loadCharacterCustomizationMetadata(e){return n(this,void 0,void 0,(function*(){const t=`${this.rootPath}/modelviewer/meta/charactercustomization/${e}.json`;try{const e=yield fetch(t);return e.ok?yield e.json():null}catch(e){return null}}))}loadCharacterMetadata(e){return n(this,void 0,void 0,(function*(){const t=`${this.rootPath}/modelviewer/meta/character/${e}.json`;try{const e=yield fetch(t);return e.ok?yield e.json():null}catch(e){return null}}))}loadItemMetadata(e){return n(this,void 0,void 0,(function*(){const t=`${this.rootPath}/modelviewer/meta/item/${e}.json`;try{const e=yield fetch(t);return e.ok?yield e.json():null}catch(e){return null}}))}loadTexture(e){return new Promise(((t,r)=>{const n=`${this.rootPath}/modelviewer/textures/${e}.webp`,a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType="arraybuffer",a.onload=()=>{const e=new Blob([a.response]);t(window.URL.createObjectURL(e))},a.onprogress=t=>{this.progress&&this.progress.update(e,Math.floor(t.loaded/t.total*100))},a.onloadstart=()=>{this.progress&&this.progress.update(e,0)},a.onerror=e=>{t(null)},a.send()}))}loadItemvisualMetadata(e){return n(this,void 0,void 0,(function*(){const t=`${this.rootPath}/modelviewer/meta/itemvisual/${e}.json`;try{const e=yield fetch(t);return e.ok?yield e.json():null}catch(e){return null}}))}useProgressReporter(e){this.progress=e}}},6940:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(4510),t),a(r(9551),t),a(r(8803),t),a(r(9932),t)},7083:(e,t,r)=>{"use strict";const n=r(1447),a=r(9805),o=r(1996),i=r(4674),l=r(4442),s=r(7414),u=Object.prototype.toString,{Z_NO_FLUSH:d,Z_FINISH:c,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:m,Z_DATA_ERROR:y,Z_MEM_ERROR:g}=r(9681);function _(e){this.options=a.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;let r=n.inflateInit2(this.strm,t.windowBits);if(r!==h)throw new Error(i[r]);if(this.header=new s,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=n.inflateSetDictionary(this.strm,t.dictionary),r!==h)))throw new Error(i[r])}function v(e,t){const r=new _(t);if(r.push(e),r.err)throw r.msg||i[r.err];return r.result}_.prototype.push=function(e,t){const r=this.strm,a=this.options.chunkSize,i=this.options.dictionary;let l,s,_;if(this.ended)return!1;for(s=t===~~t?t:!0===t?c:d,"[object ArrayBuffer]"===u.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),l=n.inflate(r,s),l===p&&i&&(l=n.inflateSetDictionary(r,i),l===h?l=n.inflate(r,s):l===y&&(l=p));r.avail_in>0&&l===f&&r.state.wrap>0&&0!==e[r.next_in];)n.inflateReset(r),l=n.inflate(r,s);switch(l){case m:case y:case p:case g:return this.onEnd(l),this.ended=!0,!1}if(_=r.avail_out,r.next_out&&(0===r.avail_out||l===f))if("string"===this.options.to){let e=o.utf8border(r.output,r.next_out),t=r.next_out-e,n=o.buf2string(r.output,e);r.next_out=t,r.avail_out=a-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(n)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(l!==h||0!==_){if(l===f)return l=n.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},_.prototype.onData=function(e){this.chunks.push(e)},_.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},e.exports.Inflate=_,e.exports.inflate=v,e.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,v(e,t)},e.exports.ungzip=v,e.exports.constants=r(9681)},7229:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WMOModel=void 0;const a=r(8219),o=r(9266),i=r(2462),l=n(r(8344)),s=n(r(8389)),u=r(2690),d=r(9932);class c extends d.BaseRenderObject{constructor(e){super(),this.isModelDataLoaded=!1,this.isTexturesLoaded=!1,this.fileId=e,this.doodadSetId=0,this.currentLod=0,this.loadedTextures={},this.groupDoodads={}}initialize(e){super.initialize(e),this.shaderProgram=this.engine.getShaderProgram("WMO",s.default,l.default),this.engine.getWMOModelFile(this.fileId).then(this.onModelLoaded.bind(this))}update(e){if(super.update(e),this.isLoaded&&!this.isDisposing)for(const t of this.children)t.update(e)}draw(){if(!this.isLoaded||this.isDisposing)return;const e=this.engine.sceneCamera.getPosition();for(let t=0;t<this.modelData.groups.length;t++){const r=this.modelData.groups[t];if(r.lod===this.currentLod)for(let n=0;n<r.batches.length;n++){const o=r.batches[n],l=this.modelData.materials[o.materialId],s=(0,a.M2BlendModeToEGxBlend)(l.blendMode),d=(0,u.getWMOVertexShader)(l.shader),c=(0,u.getWMOPixelShader)(l.shader),h=!!(l.flags&i.WoWWorldModelMaterialMaterialFlags.Unlit),f=!!(l.flags&i.WoWWorldModelMaterialMaterialFlags.Unculled),p=new a.RenderingBatchRequest;p.useCounterClockWiseFrontFaces(!0),p.useBackFaceCulling(!f),p.useBlendMode(s),p.useDepthTest(!0),p.useDepthWrite(!0),p.useShaderProgram(this.shaderProgram),p.useUniforms({u_modelMatrix:this.modelMatrix,u_cameraPos:e,u_pixelShader:c,u_vertexShader:d,u_blendMode:l.blendMode,u_unlit:h,u_texture1:this.loadedTextures[l.texture1],u_texture2:this.loadedTextures[l.texture2],u_texture3:this.loadedTextures[l.texture3]}),p.useVertexArrayObject(this.groupVaos[t]),p.drawIndexedTriangles(2*o.startIndex,o.indexCount),this.engine.submitBatchRequest(p)}}for(const e of this.children)e.draw()}dispose(){if(super.dispose(),this.modelData=null,this.groupVaos)for(let e=0;e<this.groupVaos.length;e++)this.groupVaos[e]=null;this.groupVaos=null,this.shaderProgram=null}get isLoaded(){return this.isModelDataLoaded&&this.isTexturesLoaded&&this.children.every((e=>e.isLoaded))}onModelLoaded(e){if(this.modelData=e,null!=this.modelData){if(!this.isDisposing){this.parent||this.resizeForBounds(),this.loadTextures(),this.loadDoodads(),this.groupVaos=new Array(this.modelData.groups.length);for(let e=0;e<this.modelData.groups.length;e++){const t=this.engine.graphics.createVertexArrayObject(),r=this.uploadVertexDataForGroup(e),n=this.engine.graphics.createVertexIndexBuffer(!0);n.setData(new Uint16Array(this.modelData.groups[e].indices)),t.setIndexBuffer(n),t.addVertexDataBuffer(r),this.groupVaos[e]=t}this.isModelDataLoaded=!0}}else this.dispose()}uploadVertexDataForGroup(e){const t=this.modelData.groups[e],r=56,n=this.engine.graphics.createVertexDataBuffer([{index:this.shaderProgram.getAttribLocation("a_position"),size:3,type:a.BufferDataType.Float,normalized:!1,stride:r,offset:0},{index:this.shaderProgram.getAttribLocation("a_normal"),size:3,type:a.BufferDataType.Float,normalized:!1,stride:r,offset:12},{index:this.shaderProgram.getAttribLocation("a_color1"),size:4,type:a.BufferDataType.UInt8,normalized:!1,stride:r,offset:24},{index:this.shaderProgram.getAttribLocation("a_color2"),size:4,type:a.BufferDataType.UInt8,normalized:!1,stride:r,offset:28},{index:this.shaderProgram.getAttribLocation("a_texCoord1"),size:2,type:a.BufferDataType.Float,normalized:!1,stride:r,offset:32},{index:this.shaderProgram.getAttribLocation("a_texCoord2"),size:2,type:a.BufferDataType.Float,normalized:!1,stride:r,offset:40},{index:this.shaderProgram.getAttribLocation("a_texCoord3"),size:2,type:a.BufferDataType.Float,normalized:!1,stride:r,offset:48}],!0),i=t.vertices.length,l=new Uint8Array(r*i),s=new o.BinaryWriter(l.buffer),u=t.vertexColors.length/t.vertices.length;if(u!=Math.floor(u))throw new Error("Unexpected situation. Number of Vertex Colors is not cleanly divisible by number of vertices.");const d=t.uvList.length/t.vertices.length;if(d!=Math.floor(d))throw new Error("Unexpected situation. Number of UV coordinates is not cleanly divisible by number of vertices.");for(let e=0;e<t.vertices.length;e++)s.writeFloatLE(t.vertices[e][0]),s.writeFloatLE(t.vertices[e][1]),s.writeFloatLE(t.vertices[e][2]),s.writeFloatLE(t.normals[e][0]),s.writeFloatLE(t.normals[e][1]),s.writeFloatLE(t.normals[e][2]),s.writeUInt8(u>0?t.vertexColors[e][0]:0),s.writeUInt8(u>0?t.vertexColors[e][1]:0),s.writeUInt8(u>0?t.vertexColors[e][2]:0),s.writeUInt8(u>0?t.vertexColors[e][3]:255),s.writeUInt8(u>1?t.vertexColors[e+t.vertices.length][0]:0),s.writeUInt8(u>1?t.vertexColors[e+t.vertices.length][1]:0),s.writeUInt8(u>1?t.vertexColors[e+t.vertices.length][2]:0),s.writeUInt8(u>1?t.vertexColors[e+t.vertices.length][3]:255),s.writeFloatLE(d>0?t.uvList[e][0]:0),s.writeFloatLE(d>0?t.uvList[e][1]:0),s.writeFloatLE(d>1?t.uvList[e+t.vertices.length][0]:0),s.writeFloatLE(d>1?t.uvList[e+t.vertices.length][1]:0),s.writeFloatLE(d>2?t.uvList[e+2*t.vertices.length][0]:0),s.writeFloatLE(d>2?t.uvList[e+2*t.vertices.length][1]:0);return n.setData(l),n}loadDoodads(){const e=this.getDoodadSetRefs(),t=[];for(let r=0;r<this.modelData.groups.length;r++){const n=this.modelData.groups[r];this.groupDoodads[r]=[];const a=n.doodadReferences;for(let o of a)-1!==e.indexOf(o)&&(this.groupDoodads[r].push(o),n.lod===this.currentLod&&t.push(o))}for(const e of t){const t=this.modelData.doodadDefs[e],r=this.modelData.doodadIds[t.nameOffset];if(0===r)continue;const n=new a.M2Model(r);n.parent=this;const o=a.Float3.create(t.scale,t.scale,t.scale);n.setModelMatrix(t.position,t.rotation,o),n.initialize(this.engine),this.children.push(n)}}resizeForBounds(){const e=this.modelData.maxBoundingBox,t=this.modelData.minBoundingBox;this.engine.sceneCamera.resizeForBoundingBox([t,e])}loadTextures(){const e=[];this.loadedTextures[0]=this.engine.getUnknownTexture();for(let t=0;t<this.modelData.groups.length;t++){const r=this.modelData.groups[t];for(let t=0;t<r.batches.length;t++){const n=r.batches[t],a=this.modelData.materials[n.materialId];for(const t of[a.texture1,a.texture2,a.texture3])if(0!==t){const r=(a.flags&i.WoWWorldModelMaterialMaterialFlags.ClampS)>0,n=(a.flags&i.WoWWorldModelMaterialMaterialFlags.ClampT)>0,o=this.engine.getTexture(t,{clampS:r,clampT:n}).then((e=>{this.isDisposing||(this.loadedTextures[t]=e)}));e.push(o)}}}Promise.all(e).then((()=>{this.isTexturesLoaded=!0}))}getDoodadSetRefs(){let e=this.modelData.doodadSets[0];this.doodadSetId>this.modelData.doodadSets.length&&(this.doodadSetId=0);let t=Array.from({length:e.count},((t,r)=>r+e.startIndex));if(0!=this.doodadSetId){const e=this.modelData.doodadSets[this.doodadSetId];t.concat(Array.from({length:e.count},((t,r)=>r+e.startIndex)))}return t}}t.WMOModel=c},7243:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.M2Model=void 0;const a=r(2462),o=r(9266),i=r(8219),l=r(4741),s=n(r(3030)),u=n(r(1479)),d=r(4176),c=r(9932);class h extends c.BaseRenderObject{constructor(e){super(),this.fileId=e,this.isModelDataLoaded=!1,this.isTexturesLoaded=!1,this.isDisposing=!1,this.isMirrored=!1,this.modelViewMatrix=i.Float44.identity(),this.invModelViewMatrix=i.Float44.identity(),this.bonePositionBuffer=new Float32Array(4096),this.children=[]}get isLoaded(){return this.isModelDataLoaded&&this.isTexturesLoaded}initialize(e){super.initialize(e),this.shaderProgram=this.engine.getShaderProgram("M2",u.default,s.default),this.vao=this.engine.graphics.createVertexArrayObject(),this.vertexIndexBuffer=this.engine.graphics.createVertexIndexBuffer(!0),this.vertexDataBuffer=this.engine.graphics.createVertexDataBuffer([{index:this.shaderProgram.getAttribLocation("a_position"),size:3,type:i.BufferDataType.Float,normalized:!1,stride:48,offset:0},{index:this.shaderProgram.getAttribLocation("a_normal"),size:3,type:i.BufferDataType.Float,normalized:!1,stride:48,offset:12},{index:this.shaderProgram.getAttribLocation("a_bones"),size:4,type:i.BufferDataType.UInt8,normalized:!1,stride:48,offset:24},{index:this.shaderProgram.getAttribLocation("a_boneWeights"),size:4,type:i.BufferDataType.UInt8,normalized:!1,stride:48,offset:28},{index:this.shaderProgram.getAttribLocation("a_texcoord1"),size:2,type:i.BufferDataType.Float,normalized:!1,stride:48,offset:32},{index:this.shaderProgram.getAttribLocation("a_texcoord2"),size:2,type:i.BufferDataType.Float,normalized:!1,stride:48,offset:40}],!0),this.engine.getM2ModelFile(this.fileId).then(this.onModelLoaded.bind(this))}update(e){if(super.update(e),this.isLoaded&&!this.isDisposing){this.animationState.update(e),i.Float44.multiply(this.modelMatrix,this.engine.viewMatrix,this.modelViewMatrix),i.Float44.invert(this.modelViewMatrix,this.invModelViewMatrix);for(const e of this.boneData)e.hasUpdatedThisTick=!1;for(let e=0;e<this.modelData.bones.length;e++)this.updateBone(this.modelData.bones[e],e);for(let e=0;e<this.drawOrderTexUnits.length;e++)this.updateTextureUnit(this.modelData.textureUnits[e],e)}}draw(){if(!this.isLoaded||this.isDisposing)return;const e=Math.min(256,this.modelData.bones.length);for(let t=0;t<e;t++)this.bonePositionBuffer.set(this.boneData[t].positionMatrix,16*t);for(let e=0;e<this.modelData.textureUnits.length;e++)this.drawTextureUnit(this.modelData.textureUnits[e],e)}updateBone(e,t){const r=this.boneData[t];if(r.hasUpdatedThisTick)return;if(i.Float44.identity(r.positionMatrix),i.Float44.multiply(r.positionMatrix,this.modelViewMatrix,r.positionMatrix),e.parentBoneId>-1){this.updateBone(this.modelData.bones[e.parentBoneId],e.parentBoneId);let t=i.Float44.copy(this.boneData[e.parentBoneId].positionMatrix),n=i.Float44.copy(t);if(7&e.flags){if(i.Float44.multiply(this.modelViewMatrix,t,t),6&~e.flags)if(4&e.flags)for(let e=0;e<3;e++){const r=i.Float44.getColumn(this.modelViewMatrix,e),n=i.Float4.length(r),a=i.Float44.getColumn(t,e),o=i.Float4.length(a);i.Float4.scale(r,o/n,r),i.Float44.setColumn(t,e,r)}else for(let e=0;e<3;e++){const r=i.Float44.getColumn(this.modelViewMatrix,e),n=i.Float4.length(r),a=i.Float44.getColumn(t,e),o=i.Float4.length(a);i.Float4.scale(a,1/o*n,r),i.Float44.setColumn(t,e,r)}else for(let e=0;e<3;e++)i.Float44.setColumn(t,e,i.Float44.getColumn(this.modelViewMatrix,e));let r;if(1&e.flags)r=i.Float44.getColumn(this.modelViewMatrix,3);else{const r=i.Float4.create(e.pivot[0],e.pivot[1],e.pivot[2],1),a=i.Float4.create(e.pivot[0],e.pivot[1],e.pivot[2],0),o=i.Float4.identity();i.Float4.subtract(i.Float44.transformDirection(r,n),i.Float44.transformDirection(a,t),o),o[3]=1,i.Float44.setColumn(t,3,o)}r[3]=1,i.Float44.setColumn(t,3,r),i.Float44.multiply(this.invModelMatrix,t,t)}i.Float44.multiply(r.positionMatrix,t,r.positionMatrix)}let n=i.Float44.identity(),o=!1;if(640&e.flags){if(i.Float44.translate(n,e.pivot,n),this.animationState.hasAnimatedValuesForTrack(e.translation)){const t=this.animationState.getFloat3TrackValue(e.translation,i.Float3.zero());i.Float44.translate(n,t,n),o=!0}if(this.animationState.hasAnimatedValuesForTrack(e.rotation)){const t=this.animationState.getFloat4TrackValue(e.rotation,i.Float4.identity());t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],i.Float44.multiply(n,i.Float44.fromQuat(t),n),o=!0}if(this.animationState.hasAnimatedValuesForTrack(e.scale)){const t=this.animationState.getFloat3TrackValue(e.scale,i.Float3.one());i.Float44.scale(n,t,n),o=!0}i.Float44.translate(n,i.Float3.negate(e.pivot),n)}null!=r.boneOffsetMatrix&&(i.Float44.translate(n,e.pivot,n),i.Float44.multiply(n,r.boneOffsetMatrix,n),i.Float44.translate(n,i.Float3.negate(e.pivot),n)),i.Float44.multiply(r.positionMatrix,n,r.positionMatrix);const l=120&e.flags;if(l){const t=r.positionMatrix,s=i.Float44.copy(r.positionMatrix),u=i.Float3.create(i.Float4.length(i.Float44.getColumn(r.positionMatrix,0)),i.Float4.length(i.Float44.getColumn(r.positionMatrix,1)),i.Float4.length(i.Float44.getColumn(r.positionMatrix,2)));switch(l){case a.WoWBoneFlags.SphericalBillboard:if(o){const e=i.Float44.getColumn(n,0);i.Float44.setColumn(t,0,i.Float4.normalize(i.Float4.create(e[1],e[2],-e[0],0)));const r=i.Float44.getColumn(n,1);i.Float44.setColumn(t,1,i.Float4.normalize(this.isMirrored?i.Float4.create(-r[1],-r[2],r[0],0):i.Float4.create(r[1],r[2],-r[0],0)));const a=i.Float44.getColumn(n,2);i.Float44.setColumn(t,2,i.Float4.normalize(i.Float4.create(a[1],a[2],-a[0],0)))}else i.Float44.setColumn(t,0,i.Float4.create(0,0,-1,0)),i.Float44.setColumn(t,1,this.isMirrored?i.Float4.create(-1,0,0,0):i.Float4.create(1,0,0,0)),i.Float44.setColumn(t,2,i.Float4.create(0,1,0,0));case a.WoWBoneFlags.CylindricalBillboardLockX:{const e=i.Float4.normalize(i.Float44.getColumn(t,0));i.Float44.setColumn(t,0,e);const r=i.Float4.normalize(i.Float4.create(t[4],-t[0],0,0));i.Float44.setColumn(t,1,r);const n=i.Float4.cross(r,e);n[3]=0,i.Float44.setColumn(t,2,n)}case a.WoWBoneFlags.CylindricalBillboardLockY:{const e=i.Float4.normalize(i.Float44.getColumn(t,1));i.Float44.setColumn(t,1,e);const r=i.Float4.normalize(i.Float4.create(-t[5],t[1],0,0));i.Float44.setColumn(t,0,r);const n=i.Float4.cross(e,r);n[3]=0,i.Float44.setColumn(t,2,n)}case a.WoWBoneFlags.CylindricalBillboardLockZ:{const e=i.Float4.normalize(i.Float44.getColumn(t,2));i.Float44.setColumn(t,2,e);const r=i.Float4.normalize(i.Float4.create(t[9],t[8],0,0));i.Float44.setColumn(t,1,r);const n=i.Float4.cross(e,r);n[3]=0,i.Float44.setColumn(t,0,n)}}const d=i.Float4.create(e.pivot[0],e.pivot[1],e.pivot[2],1),c=i.Float4.create(e.pivot[0],e.pivot[1],e.pivot[2],0);i.Float44.setColumn(t,0,i.Float4.scale(i.Float44.getColumn(t,0),u[0])),i.Float44.setColumn(t,1,i.Float4.scale(i.Float44.getColumn(t,1),u[1])),i.Float44.setColumn(t,2,i.Float4.scale(i.Float44.getColumn(t,2),u[2]));const h=i.Float4.identity();i.Float4.subtract(i.Float44.transformDirection(d,s),i.Float44.transformDirection(c,t),h),h[3]=1,i.Float44.setColumn(t,3,h)}i.Float44.multiply(this.invModelViewMatrix,r.positionMatrix,r.positionMatrix),r.hasUpdatedThisTick=!0}updateTextureUnit(e,t){const r=this.textureUnitData[t];if(!r.texturesLoaded){const t=this.engine.getUnknownTexture();r.textures=[t,t,t,t],(e.textureComboIndex<0||e.textureComboIndex>this.modelData.textureCombos.length)&&(r.texturesLoaded=!0),r.texturesLoaded=!0;for(let t=0;t<e.textureCount;t++){const n=this.modelData.textureCombos[e.textureComboIndex+t];if(n>-1&&n<this.modelData.textures.length){const e=this.modelData.textures[n];if(!this.loadedTextures[e.textureId])return void(r.texturesLoaded=!1);r.textures[t]=this.loadedTextures[e.textureId]}}}i.Float4.set(r.color,1,1,1,1);const n=this.modelData.colors[e.colorIndex];if(n){let e=i.Float3.one(),t=1;this.animationState.hasAnimatedValuesForTrack(n.color)&&this.animationState.getFloat3TrackValue(n.color,i.Float3.one(),e),this.animationState.hasAnimatedValuesForTrack(n.alpha)&&(t=this.animationState.getNumberTrackValue(n.alpha)/32767),r.color[0]=e[0],r.color[1]=e[1],r.color[2]=e[2],r.color[3]=t}for(let t=0;t<e.textureCount;t++)r.textureWeights[t]=1;if(e.textureWeightComboIndex>-1&&e.textureWeightComboIndex<this.modelData.textureWeightCombos.length)for(let t=0;t<e.textureCount;t++){const n=this.modelData.textureWeightCombos[e.textureWeightComboIndex+t];if(n>-1&&n<this.modelData.textureWeights.length){const e=this.modelData.textureWeights[n];if(this.animationState.hasAnimatedValuesForTrack(e.weights)){const n=this.animationState.getNumberTrackValue(e.weights,32767)/32767;r.textureWeights[t]=n}}}if(r.color[3]*=r.textureWeights[0],e.textureTransformComboIndex>-1&&e.textureTransformComboIndex<this.modelData.textureTransformCombos.length)for(let t=0;t<e.textureCount;t++){const n=r.textureMatrices[t];i.Float44.identity(n);let a=this.modelData.textureTransformCombos[e.textureTransformComboIndex+t];if(a>-1&&a<this.modelData.textureTransforms.length){const e=this.modelData.textureTransforms[a];if(i.Float44.translate(n,i.Float3.create(.5,.5,0),n),this.animationState.hasAnimatedValuesForTrack(e.scaling)){const t=this.animationState.getFloat3TrackValue(e.scaling);i.Float44.scale(n,t,n)}if(this.animationState.hasAnimatedValuesForTrack(e.rotation)){const t=this.animationState.getFloat4TrackValue(e.rotation);i.Float44.multiply(n,i.Float44.fromQuat(t),n)}if(this.animationState.hasAnimatedValuesForTrack(e.translation)){const t=this.animationState.getFloat3TrackValue(e.translation);i.Float44.translate(n,t,n)}i.Float44.translate(n,i.Float3.create(-.5,-.5,0),n)}}}drawTextureUnit(e,t){const r=this.modelData.materials[e.materialIndex],n=this.textureUnitData[t],o=(0,i.M2BlendModeToEGxBlend)(r.blendingMode);if(!n.texturesLoaded)return;const l=new i.RenderingBatchRequest;l.useVertexArrayObject(this.vao),l.useShaderProgram(this.shaderProgram),l.useBackFaceCulling(!(4&r.flags)),l.useCounterClockWiseFrontFaces(!this.isMirrored),l.useBlendMode(o),l.useDepthTest(!(a.WoWMaterialFlags.DepthTest&r.flags)),l.useDepthWrite(!(a.WoWMaterialFlags.DepthWrite&r.flags)),l.useColorMask(i.ColorMask.Alpha|i.ColorMask.Blue|i.ColorMask.Green|i.ColorMask.Red),l.useUniforms({u_boneMatrices:this.bonePositionBuffer,u_modelMatrix:this.modelMatrix,u_textureTransformMatrix1:n.textureMatrices[0],u_textureTransformMatrix2:n.textureMatrices[1],u_color:n.color,u_vertexShader:(0,d.getM2VertexShaderId)(e.shaderId,e.textureCount),u_blendMode:o,u_pixelShader:(0,d.getM2PixelShaderId)(e.shaderId,e.textureCount),u_unlit:!!(a.WoWMaterialFlags.Unlit&r.flags),u_texture1:n.textures[0],u_texture2:n.textures[1],u_texture3:n.textures[2],u_texture4:n.textures[3],u_textureWeights:n.textureWeights});const s=this.modelData.submeshes[e.skinSectionIndex];l.drawIndexedTriangles(2*(s.triangleStart+65536*s.level),s.triangleCount),this.engine.submitBatchRequest(l)}resizeForBounds(){const e=this.animationState.currentAnimation.extentMax,t=this.animationState.currentAnimation.extentMin;this.engine.sceneCamera.resizeForBoundingBox([t,e])}dispose(){super.dispose(),this.modelData=null,this.shaderProgram=null,this.vertexDataBuffer=null,this.vertexIndexBuffer=null,this.vao=null,this.bonePositionBuffer=null,this.animationState=null,this.loadedTextures=null,this.textureUnitData=null,this.boneData=null,this.modelMatrix=null,this.modelViewMatrix=null,this.invModelMatrix=null,this.invModelViewMatrix=null,this.drawOrderTexUnits=null}onModelLoaded(e){if(null!==e){if(!this.isDisposing){this.modelData=e,this.animationState=new l.AnimationState(this),this.animationState.useAnimation(0),this.parent||this.resizeForBounds(),this.loadTextures(),this.uploadVertexData(this.modelData.vertices),this.vertexIndexBuffer.setData(new Uint16Array(this.modelData.skinTriangles)),this.vao.setIndexBuffer(this.vertexIndexBuffer),this.vao.addVertexDataBuffer(this.vertexDataBuffer),this.boneData=new Array(this.modelData.bones.length);for(let e=0;e<this.modelData.bones.length;e++)this.boneData[e]={boneOffsetMatrix:null,hasUpdatedThisTick:!1,positionMatrix:i.Float44.identity()};this.textureUnitData=new Array(this.modelData.textureUnits.length);for(let e=0;e<this.modelData.textureUnits.length;e++)this.textureUnitData[e]={color:i.Float4.one(),textureMatrices:[i.Float44.identity(),i.Float44.identity()],textures:[],texturesLoaded:!1,textureWeights:i.Float4.one()};this.drawOrderTexUnits=this.modelData.textureUnits.sort(((e,t)=>e.priority!=t.priority?e.priority-t.priority:this.modelData.submeshes[e.skinSectionIndex].submeshId-this.modelData.submeshes[t.skinSectionIndex].submeshId)),this.isModelDataLoaded=!0}}else this.dispose()}loadTextures(){this.loadedTextures={};for(let e=0;e<this.modelData.textures.length;e++){const t=this.modelData.textures[e].textureId;t>0?this.engine.getTexture(t).then((e=>{this.isDisposing||(this.loadedTextures[t]=e)})):this.loadedTextures[e]=void 0}Promise.all([]).then((()=>{this.isTexturesLoaded=!0}))}uploadVertexData(e){const t=48*e.length,r=new Uint8Array(t),n=new o.BinaryWriter(r.buffer);for(let t=0;t<e.length;++t)n.writeFloatLE(e[t].position[0]),n.writeFloatLE(e[t].position[1]),n.writeFloatLE(e[t].position[2]),n.writeFloatLE(e[t].normal[0]),n.writeFloatLE(e[t].normal[1]),n.writeFloatLE(e[t].normal[2]),n.writeUInt8(e[t].boneIndices[0]),n.writeUInt8(e[t].boneIndices[1]),n.writeUInt8(e[t].boneIndices[2]),n.writeUInt8(e[t].boneIndices[3]),n.writeUInt8(e[t].boneWeights[0]),n.writeUInt8(e[t].boneWeights[1]),n.writeUInt8(e[t].boneWeights[2]),n.writeUInt8(e[t].boneWeights[3]),n.writeFloatLE(e[t].texCoords1[0]),n.writeFloatLE(e[t].texCoords1[1]),n.writeFloatLE(e[t].texCoords2[0]),n.writeFloatLE(e[t].texCoords2[1]);this.vertexDataBuffer.setData(r)}}t.M2Model=h},7293:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function l(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderingEngine=void 0;const a=r(1278),o=r(1017),i=r(5053),l=-123,s="dataFetching",u="Loading model data...";t.RenderingEngine=class{constructor(e,t,r,n){this.graphics=e,this.dataLoader=t,this.requestFrame=r,this.progress=n.progress,this.dataLoader.useProgressReporter(n.progress),this.errorHandler=n.errorHandler,this.containerElement=n.container,this.sceneObjects=[],this.viewMatrix=a.Float44.identity(),this.invViewMatrix=a.Float44.identity(),this.projectionMatrix=a.Float44.identity();const o=n.cacheTtl?n.cacheTtl:9e5;this.textureCache=new i.SimpleCache(o),this.shaderCache=new i.SimpleCache(o),this.wmoCache=new i.SimpleCache(o),this.m2Cache=new i.SimpleCache(o),this.runningRequests={},this.batchRequests=[],this.clearColor=n.clearColor?n.clearColor:a.Float4.create(.1,.1,.1,1),this.fov=n.cameraFov?n.cameraFov:60,this.ambientColor=n.ambientColor?n.ambientColor:a.Float4.create(1/3,1/3,1/3,1),this.lightColor=n.lightColor?n.lightColor:a.Float4.one(),this.lightDir=a.Float3.normalize(n.lightDirection?n.lightDirection:[0,0,1]),this.lightingDisabled=!!n.disableLighting&&n.disableLighting,this.framesDrawn=0,this.timeElapsed=0,this.maxFpsCounterSize=100,this.fpsCounter=[],document&&this.containerElement&&(this.debugContainer=document.createElement("div"),this.debugContainer.style.position="absolute",this.debugContainer.style.left="0",this.debugContainer.style.top="0",this.debugContainer.style.padding="1em",this.fpsElement=document.createElement("p"),this.fpsElement.style.color="white",this.fpsElement.style.margin="0",this.fpsElement.style.display="none",this.debugContainer.append(this.fpsElement),this.containerElement.append(this.debugContainer))}dispose(){this.viewMatrix=null,this.invViewMatrix=null,this.sceneCamera.dispose();for(const e of this.sceneObjects)e.dispose()}now(){return window.performance&&window.performance.now?window.performance.now():Date.now()}draw(e){var t;try{const t=e-this.lastTime;this.lastTime=e,this.graphics.startFrame(this.width,this.height),this.graphics.clearFrame(this.clearColor),this.sceneCamera.update(t),a.Float44.copy(this.sceneCamera.getViewMatrix(),this.viewMatrix),a.Float44.invert(this.viewMatrix,this.invViewMatrix),this.textureCache.update(t),this.wmoCache.update(t),this.m2Cache.update(t);for(const e of this.sceneObjects)e.update(t);for(const e of this.sceneObjects)e.draw();const r=this.batchRequests.sort(((e,t)=>{const r=(e.blendMode>o.GxBlend.GxBlend_Opaque?e.blendMode==o.GxBlend.GxBlend_AlphaKey?1:2:0)-(t.blendMode>o.GxBlend.GxBlend_Opaque?t.blendMode==o.GxBlend.GxBlend_AlphaKey?1:2:0);return 0!=r?r:e.priority-t.priority}));for(const e of r)e.submit(this.graphics);if(this.batchRequests=[],this.framesDrawn++,this.timeElapsed+=t,this.fpsElement){this.fpsCounter.push(1/(t/1e3)),this.fpsCounter.length>this.maxFpsCounterSize&&this.fpsCounter.splice(0,1);const e=this.fpsCounter.reduce(((e,t)=>e+t),0)/this.fpsCounter.length;this.fpsElement.textContent="FPS: "+Math.floor(e)}}catch(e){null===(t=this.errorHandler)||void 0===t||t.call(this,"rendering",e.toString())}}start(){this.lastTime=this.now(),this.sceneCamera.initialize(this),a.Float44.copy(this.sceneCamera.getViewMatrix(),this.viewMatrix),a.Float44.invert(this.viewMatrix,this.invViewMatrix);var e=this.width/this.height;a.Float44.perspective(Math.PI/180*this.fov,e,.1,2e3,this.projectionMatrix);const t=this,r=()=>{if(t.isDisposing)return;const e=t.now();t.draw(e),this.requestFrame(r)};r()}showFps(){this.fpsElement&&(this.fpsElement.style.display="block")}hideFps(){this.fpsElement&&(this.fpsElement.style.display="none")}resize(e,t){this.height=t,this.width=e;var r=this.width/this.height;a.Float44.perspective(Math.PI/180*this.fov,r,.1,2e3,this.projectionMatrix)}switchCamera(e){e.initialize(this),e.resizeForBoundingBox(this.sceneCamera.getBoundingBox()),this.sceneCamera.dispose(),this.sceneCamera=e}addSceneObject(e,t){e.initialize(this),this.sceneObjects.push(e)}removeSceneObject(e){this.sceneObjects=this.sceneObjects.filter((t=>t!=e)),e.dispose()}getTexture(e,t){return new Promise(((r,n)=>{var a,o;const i=n=>{var a,o;if(null===n)return null===(a=this.errorHandler)||void 0===a||a.call(this,s,"Unable to retrieve image data for file: "+e),void r(this.getUnknownTexture());null===(o=this.progress)||void 0===o||o.removeFileIdFromOperation(e);const i=new Image;i.onload=()=>{const n=this.graphics.createTextureFromImg(i,t);this.textureCache.store(e,n),delete this.runningRequests[e],r(n)},i.onerror=t=>{var n;null===(n=this.errorHandler)||void 0===n||n.call(this,"dataProcessing","Unable to process image data for file: "+e),r(null)},i.src=n};if(this.runningRequests[e])return void this.runningRequests[e].then(i);if(this.textureCache.contains(e))return void r(this.textureCache.get(e));null===(a=this.progress)||void 0===a||a.setOperation(u),null===(o=this.progress)||void 0===o||o.addFileIdToOperation(e);const l=this.dataLoader.loadTexture(e);this.runningRequests[e]=l,l.then(i)}))}getUnknownTexture(){if(this.textureCache.contains(l))return this.textureCache.get(l);const e=this.graphics.createSolidColorTexture(a.Float4.create(0,1,0,1));return this.textureCache.store(l,e,-1),e}submitBatchRequest(e){e.useUniforms({u_ambientColor:this.ambientColor,u_lightColor:this.lightColor,u_lightDir:this.lightDir,u_viewMatrix:this.viewMatrix,u_projectionMatrix:this.projectionMatrix}),this.lightingDisabled&&e.useUniforms({u_unlit:!0}),this.batchRequests.push(e)}getShaderProgram(e,t,r){if(this.shaderCache.contains(e))return this.shaderCache.get(e);const n=this.graphics.createShaderProgram(t,r);return this.shaderCache.store(e,n,-1),n}getM2ModelFile(e){return n(this,void 0,void 0,(function*(){var t,r,n,a;if(this.runningRequests[e])return yield this.runningRequests[e];if(this.m2Cache.contains(e))return this.m2Cache.get(e);null===(t=this.progress)||void 0===t||t.setOperation(u),null===(r=this.progress)||void 0===r||r.addFileIdToOperation(e);const o=this.dataLoader.loadModelFile(e);this.runningRequests[e]=o;const i=yield o;return null===i&&(null===(n=this.errorHandler)||void 0===n||n.call(this,s,"Unable to retrieve M2 data for file: "+e)),delete this.runningRequests[e],this.m2Cache.store(e,i),null===(a=this.progress)||void 0===a||a.removeFileIdFromOperation(e),i}))}getWMOModelFile(e){return n(this,void 0,void 0,(function*(){var t,r,n,a,o;if(this.runningRequests[e])return yield this.runningRequests[e];if(this.wmoCache.contains(e))return this.wmoCache.get(e);null===(t=this.progress)||void 0===t||t.setOperation(u),null===(r=this.progress)||void 0===r||r.addFileIdToOperation(e);const i=this.dataLoader.loadWorldModelFile(e);this.runningRequests[e]=i;const l=yield i;return null===l&&(null===(n=this.errorHandler)||void 0===n||n.call(this,s,"Unable to retrieve WMO data for file: "+e)),this.wmoCache.store(e,l),delete this.runningRequests[e],null===(a=this.progress)||void 0===a||a.removeFileIdFromOperation(e),null===(o=this.progress)||void 0===o||o.finishOperation(),l}))}}},7414:e=>{"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},7518:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Float2=t.Float3=t.Float4=void 0;const r="undefined"!=typeof Float32Array?Float32Array:Array;var n,a,o;!function(e){function t(e){return e?(e[0]=0,e[1]=0,e[2]=0,e[3]=0,e):a(0,0,0,0)}function n(e){if(e)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e;const t=new r(4);return r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=1),t}function a(e,t,n,a){const o=new r(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=a,o}function o(e,t,r){return(r=r||n())[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r}function i(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}e.zero=t,e.one=function(e){return e?(e[0]=1,e[1]=1,e[2]=1,e[3]=1,e):a(1,1,1,1)},e.identity=n,e.create=a,e.copy=function(e,t){return(t=t||n())[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(e,t,r,n,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e},e.add=function(e,t,r){return(r=r||n())[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r},e.subtract=function(e,t,r){return(r=r||n())[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r},e.scale=o,e.length=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.normalize=function(e,t){t=t||n();let r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3];return r>0&&(r=1/Math.sqrt(r)),o(e,r,t)},e.dot=i,e.lerp=function(e,t,r,a){a=a||n();let o,l,s=e[0],u=e[1],d=e[2],c=e[3],h=t[0],f=t[1],p=t[2],m=t[3],y=i(e,t);if(y<0&&(y=-y,h=-h,f=-f,p=-p,m=-m),1-y>1e-6){const e=Math.acos(y),t=Math.sin(e);o=Math.sin((1-r)*e)/t,l=Math.sin(r*e)/t}else o=1-r,l=r;return a[0]=o*s+l*h,a[1]=o*u+l*f,a[2]=o*d+l*p,a[3]=o*c+l*m,a},e.cross=function(e,r,n){n=n||t();let a=e[0],o=e[1],i=e[2],l=r[0],s=r[1],u=r[2];return n[0]=o*u-i*s,n[1]=i*l-a*u,n[2]=a*s-o*l,n[3]=0,n},e.createQuat=function(e,t,r){r=r||n(),t*=.5;let a=Math.sin(t);return r[0]=a*e[0],r[1]=a*e[1],r[2]=a*e[2],r[3]=Math.cos(t),r},e.quatFromEulers=function(e,t,r,a){a=a||n();const o=Math.cos(e/2),i=Math.sin(e/2),l=Math.cos(t/2),s=Math.sin(t/2),u=Math.cos(r/2),d=Math.sin(r/2);return a[0]=o*l*u+i*s*d,a[1]=i*l*u-o*s*d,a[2]=o*s*u+i*l*d,a[3]=o*l*d-i*s*u,a},e.quatMultiply=function(e,t,r){r=r||n();const a=e[0],o=e[1],i=e[2],l=e[3],s=t[0],u=t[1],d=t[2],c=t[3];return r[0]=a*s-o*u-i*d-l*c,r[1]=a*u+o*s-i*c+l*d,r[2]=a*d+o*c+i*s-l*u,r[3]=a*c-o*d+i*u+l*s,r},e.quatInvert=function(e,t){return(t=t||n())[0]=e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}}(n||(t.Float4=n={})),function(e){function t(e){return e?(e[0]=0,e[1]=0,e[2]=0,e):n(0,0,0)}function n(e,t,n){const a=new r(3);return a[0]=e,a[1]=t,a[2]=n,a}function a(e,r,n){return(n=n||t())[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n}e.zero=t,e.one=function(e){return e?(e[0]=1,e[1]=1,e[2]=1,e):n(1,1,1)},e.create=n,e.copy=function(e,r){return(r=r||t())[0]=e[0],r[1]=e[1],r[2]=e[2],r},e.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},e.add=function(e,r,n){return(n=n||t())[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n},e.subtract=function(e,r,n){return(n=n||t())[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n},e.scale=a,e.length=function(e){return Math.hypot(e[0],e[1],e[2])},e.normalize=function(e,r){r=r||t();let n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];return n>0&&(n=1/Math.sqrt(n)),a(e,n,r)},e.multiply=function(e,r,n){return(n=n||t())[0]=e[0]*r[0],n[1]=e[1]*r[1],n[2]=e[2]*r[2],n},e.negate=function(e,r){return(r=r||t())[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.cross=function(e,r,n){n=n||t();let a=e[0],o=e[1],i=e[2],l=r[0],s=r[1],u=r[2];return n[0]=o*u-i*s,n[1]=i*l-a*u,n[2]=a*s-o*l,n},e.lerp=function(e,r,n,a){return(a=a||t())[0]=e[0]+n*(r[0]-e[0]),a[1]=e[1]+n*(r[1]-e[1]),a[2]=e[2]+n*(r[2]-e[2]),a},e.fromSpherical=function(e,r,n,a){return(a=a||t())[0]=e*Math.sin(r)*Math.cos(n),a[1]=e*Math.sin(r)*Math.sin(n),a[2]=e*Math.cos(r),a}}(a||(t.Float3=a={})),function(e){function t(e){if(e)return e[0]=0,e[1]=0,e;const t=new r(2);return r!=Float32Array&&(t[0]=0,t[1]=0),t}e.zero=t,e.create=function(e,t){const n=new r(2);return n[0]=e,n[1]=t,n},e.copy=function(e,r){return(r=r||t())[0]=e[0],r[1]=e[1],r},e.set=function(e,t,r){return e[0]=t,e[1]=r,e},e.add=function(e,r,n){return(n=n||t())[0]=e[0]+r[0],n[1]=e[1]+r[1],n},e.subtract=function(e,r,n){return(n=n||t())[0]=e[0]-r[0],n[1]=e[1]-r[1],n},e.scale=function(e,r,n){return(n=n||t())[0]=e[0]*r,n[1]=e[1]*r,n},e.multiply=function(e,r,n){return(n=n||t())[0]=e[0]*r[0],n[1]=e[1]*r[1],n},e.negate=function(e,r){return(r=r||t())[0]=-e[0],r[1]=-e[1],r},e.lerp=function(e,r,n,a){return(a=a||t())[0]=e[0]+n*(r[0]-e[0]),a[1]=e[0]+n*(r[1]-e[1]),a}}(o||(t.Float2=o={}))},7604:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WoWModelViewer=void 0;const n=r(8219),a=r(6303);t.WoWModelViewer=class{constructor(e){var t,r,n;if(!(null==e?void 0:e.dataLoader))throw"dataLoader is a required argument for WoWModelViewer";if(!document&&!(null===(t=null==e?void 0:e.canvas)||void 0===t?void 0:t.createCanvas))throw"canvas.createCanvas is a required argument for WoWModelViewer when running outside of a browser context";if(!(null===(r=null==e?void 0:e.canvas)||void 0===r?void 0:r.container)&&!(null===(n=null==e?void 0:e.canvas)||void 0===n?void 0:n.createCanvas))throw"canvas.container is a required argument for WoWModelViewer when not providing a canvas via canvas.createCanvas";this.options=e,this.initialize()}addM2Model(e){this.addSceneObject(new n.M2Model(e))}addWMOModel(e){this.addSceneObject(new n.WMOModel(e))}addSceneObject(e){this.renderEngine.addSceneObject(e,0)}removeModelByFileId(e){const t=this.renderEngine.sceneObjects.find((t=>t.fileId===e));t&&this.removeSceneObject(t)}removeSceneObject(e){this.renderEngine.removeSceneObject(e)}useCamera(e){this.renderEngine.switchCamera(e)}useCameraFov(e){this.renderEngine.fov=e,this.renderEngine.resize(this.width,this.height)}useLightDirection(e){this.renderEngine.lightDir=n.Float3.normalize(e)}useLightColor(e){this.renderEngine.lightColor=e}useAmbientColor(e){this.renderEngine.ambientColor=e}useClearColor(e){this.renderEngine.clearColor=e}disableLighting(){this.renderEngine.lightingDisabled=!0}enableLighting(){this.renderEngine.lightingDisabled=!1}showFps(){this.renderEngine.showFps()}hideFps(){this.renderEngine.hideFps()}initialize(){var e,t,r,o,i,l,s,u,d;if(this.options.canvas.createCanvas?this.canvas=this.options.canvas.createCanvas():this.canvas=document.createElement("canvas"),document){const e=this.options.canvas.container?this.options.canvas.container:this.canvas.parentElement;e&&(this.width=e.getBoundingClientRect().width,this.height=e.getBoundingClientRect().height,this.viewerContainer=document.createElement("div"),this.viewerContainer.className="wmvts-container",this.viewerContainer.style.lineHeight="0",this.viewerContainer.style.position="relative",e.append(this.viewerContainer),this.viewerContainer.append(this.canvas),this.options.canvas.resizeToContainer)&&new ResizeObserver((()=>{this.width=this.viewerContainer.getBoundingClientRect().width,this.height=this.viewerContainer.getBoundingClientRect().height,this.resize(this.width,this.height)})).observe(this.viewerContainer)}this.options.canvas.width&&(this.width=this.options.canvas.width),this.options.canvas.height&&(this.height=this.options.canvas.height);const c=this.options.canvas.requestFrame?this.options.canvas.requestFrame:window.requestAnimationFrame.bind(window);let h=this.canvas.getContext("webgl",{alpha:!0,premultipliedAlpha:!1});const f=new n.WebGlGraphics(h);if(this.renderEngine=new n.RenderingEngine(f,this.options.dataLoader,c,{progress:this.options.progressReporter,container:this.viewerContainer,errorHandler:this.options.onError,ambientColor:null===(e=this.options.scene)||void 0===e?void 0:e.ambientColor,cacheTtl:null===(t=this.options.misc)||void 0===t?void 0:t.cacheTtl,cameraFov:null===(r=this.options.scene)||void 0===r?void 0:r.cameraFov,clearColor:null===(o=this.options.canvas)||void 0===o?void 0:o.clearColor,lightColor:null===(i=this.options.scene)||void 0===i?void 0:i.lightColor,lightDirection:null===(l=this.options.scene)||void 0===l?void 0:l.lightDirection,disableLighting:null===(s=this.options.scene)||void 0===s?void 0:s.disableLighting}),this.resize(this.width,this.height),this.renderEngine.sceneCamera=null!==(d=null===(u=this.options.scene)||void 0===u?void 0:u.camera)&&void 0!==d?d:new a.Camera,this.options.scene&&this.options.scene.objects)for(const e of this.options.scene.objects)this.renderEngine.addSceneObject(e,0);this.renderEngine.start()}resize(e,t){this.renderEngine&&this.renderEngine.width===e&&this.renderEngine.height===t||(this.canvas.width=e,this.canvas.height=t,this.renderEngine.resize(e,t))}}},7690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CachedGraphics=void 0,t.CachedGraphics=class{constructor(){}startFrame(e,t){this.lastUsedShaderProgram=void 0,this.lastUsedVertexDataBuffer=void 0,this.lastUsedVertexIndexBuffer=void 0,this.lastUsedVertexArrayObject=void 0,this.lastUsedBlendMode=void 0,this.lastUsedDepthWrite=void 0,this.lastUsedDepthTest=void 0,this.lastUsedColorMask=void 0,this.lastUsedBackFaceCulling=void 0,this.lastUsedCounterClockWiseFrontFaces=void 0}useBlendMode(e){this.lastUsedBlendMode!=e&&(this.activateBlendMode(e),this.lastUsedBlendMode=e)}useDepthWrite(e){this.lastUsedDepthWrite!=e&&(this.activateDepthWrite(e),this.lastUsedDepthWrite=e)}useDepthTest(e){this.lastUsedDepthTest!=e&&(this.activateDepthTest(e),this.lastUsedDepthWrite=e)}useBackFaceCulling(e){this.lastUsedBackFaceCulling!=e&&(this.activateBackFaceCulling(e),this.lastUsedBackFaceCulling=e)}useCounterClockWiseFrontFaces(e){this.lastUsedCounterClockWiseFrontFaces!=e&&(this.activateCounterClockWiseFrontFaces(e),this.lastUsedCounterClockWiseFrontFaces=e)}useColorMask(e){this.lastUsedColorMask!=e&&(this.activateColorMask(e),this.lastUsedColorMask=e)}useVertexIndexBuffer(e){e!=this.lastUsedVertexIndexBuffer&&(e?e.bind():this.lastUsedVertexIndexBuffer.unbind(),this.lastUsedVertexIndexBuffer=e)}useVertexDataBuffer(e){e!=this.lastUsedVertexDataBuffer&&(e?e.bind():this.lastUsedVertexDataBuffer.unbind(),this.lastUsedVertexDataBuffer=e)}useShaderProgram(e){e!=this.lastUsedShaderProgram&&(e?e.bind():this.lastUsedShaderProgram.unbind(),this.lastUsedShaderProgram=e)}useVertexArrayObject(e){e!=this.lastUsedVertexArrayObject&&(e?e.bind():this.lastUsedVertexArrayObject.unbind(),this.lastUsedVertexArrayObject=e)}}},7716:(e,t)=>{"use strict";var r,n,a,o,i,l;Object.defineProperty(t,"__esModule",{value:!0}),t.WoWParticleFlags=t.WoWTextureFlags=t.WoWTextureType=t.WoWMaterialFlags=t.WoWBoneFlags=t.WoWAnimationFlags=void 0,function(e){e[e.Init=1]="Init",e[e.Unk_0x2=2]="Unk_0x2",e[e.Unk_0x4=4]="Unk_0x4",e[e.Unk_0x8=8]="Unk_0x8",e[e.LowPrioritySequence=16]="LowPrioritySequence",e[e.PrimaryBoneSequence=32]="PrimaryBoneSequence",e[e.IsAlias=64]="IsAlias",e[e.BlendedAnimation=128]="BlendedAnimation",e[e.SequenceInModel=256]="SequenceInModel",e[e.BlendTimeInAndOut=512]="BlendTimeInAndOut",e[e.Unk_0x400=1024]="Unk_0x400",e[e.Unk_0x800=2048]="Unk_0x800",e[e.Unk_0x1000=4096]="Unk_0x1000",e[e.Unk_0x2000=8192]="Unk_0x2000"}(r||(t.WoWAnimationFlags=r={})),function(e){e[e.IgnoreParentTranslate=1]="IgnoreParentTranslate",e[e.IgnoreParentScale=2]="IgnoreParentScale",e[e.IgnoreParentRotation=4]="IgnoreParentRotation",e[e.SphericalBillboard=8]="SphericalBillboard",e[e.CylindricalBillboardLockX=16]="CylindricalBillboardLockX",e[e.CylindricalBillboardLockY=32]="CylindricalBillboardLockY",e[e.CylindricalBillboardLockZ=64]="CylindricalBillboardLockZ",e[e.Unk_0x80=128]="Unk_0x80",e[e.UNK_0x100=256]="UNK_0x100",e[e.Transformed=512]="Transformed",e[e.KinematicBone=1024]="KinematicBone",e[e.HelmetAnimScaled=4096]="HelmetAnimScaled",e[e.SomethingSequenceId=8192]="SomethingSequenceId"}(n||(t.WoWBoneFlags=n={})),function(e){e[e.None=0]="None",e[e.Unlit=1]="Unlit",e[e.Unfogged=2]="Unfogged",e[e.TwoSided=4]="TwoSided",e[e.DepthTest=8]="DepthTest",e[e.DepthWrite=16]="DepthWrite",e[e.Unknown_0x40=64]="Unknown_0x40",e[e.Unknown_0x80=128]="Unknown_0x80",e[e.Unknown_0x100=256]="Unknown_0x100",e[e.Unknown_0x200=512]="Unknown_0x200",e[e.Unknown_0x400=1024]="Unknown_0x400",e[e.PreventAlphaForCustomElements=2048]="PreventAlphaForCustomElements"}(a||(t.WoWMaterialFlags=a={})),function(e){e[e.None=0]="None",e[e.Skin=1]="Skin",e[e.ObjectSkin=2]="ObjectSkin",e[e.WeaponBlade=3]="WeaponBlade",e[e.WeaponHandle=4]="WeaponHandle",e[e.Environment=5]="Environment",e[e.CharHair=6]="CharHair",e[e.CharFacialHair=7]="CharFacialHair",e[e.SkinExtra=8]="SkinExtra",e[e.UISkin=9]="UISkin",e[e.TaurenMane=10]="TaurenMane",e[e.Monster1=11]="Monster1",e[e.Monster2=12]="Monster2",e[e.Monster3=13]="Monster3",e[e.ItemIcon=14]="ItemIcon",e[e.GuildBackgroundColor=15]="GuildBackgroundColor",e[e.GuildEmblemColor=16]="GuildEmblemColor",e[e.GuildBorderColor=17]="GuildBorderColor",e[e.GuildEmblem=18]="GuildEmblem",e[e.CharEyes=19]="CharEyes",e[e.CharJewelry=20]="CharJewelry",e[e.CharSecondarySkin=21]="CharSecondarySkin",e[e.CharSecondaryHair=22]="CharSecondaryHair",e[e.CharSecondaryArmor=23]="CharSecondaryArmor",e[e.Unknown24=24]="Unknown24",e[e.Unknown25=25]="Unknown25",e[e.Unknown26=26]="Unknown26"}(o||(t.WoWTextureType=o={})),function(e){e[e.None=0]="None",e[e.TextureWrapX=1]="TextureWrapX",e[e.TextureWrapY=2]="TextureWrapY"}(i||(t.WoWTextureFlags=i={})),function(e){e[e.AffectedByLighting=1]="AffectedByLighting",e[e.Unknown_0x02=2]="Unknown_0x02",e[e.OrientationIsAffectedByPlayerOrientation=4]="OrientationIsAffectedByPlayerOrientation",e[e.TravelUpInWorldspace=8]="TravelUpInWorldspace",e[e.DoNotTrail=16]="DoNotTrail",e[e.Unlightning=32]="Unlightning",e[e.UseBurstMulitpler=64]="UseBurstMulitpler",e[e.ParticlesInModelSpace=128]="ParticlesInModelSpace",e[e.Unknown_0x100=256]="Unknown_0x100",e[e.Unknown_0x200=512]="Unknown_0x200",e[e.PinnedParticles=1024]="PinnedParticles",e[e.Unknown_0x800=2048]="Unknown_0x800",e[e.XYQuadParticles=4096]="XYQuadParticles",e[e.ClampToGround=8192]="ClampToGround",e[e.Unknown_0x4000=16384]="Unknown_0x4000",e[e.Unknown_0x8000=32768]="Unknown_0x8000",e[e.ChooseRandomTexture=65536]="ChooseRandomTexture",e[e.OutwardParticles=131072]="OutwardParticles",e[e.Unknown_0x40000=262144]="Unknown_0x40000",e[e.ScaleVaryAffectsXAndYIndependently=524288]="ScaleVaryAffectsXAndYIndependently",e[e.Unknown_0x100000=1048576]="Unknown_0x100000",e[e.RandomFlipBookStart=2097152]="RandomFlipBookStart",e[e.IgnoreDistance=4194304]="IgnoreDistance",e[e.GravityValuesAreCompressedVectors=8388608]="GravityValuesAreCompressedVectors",e[e.BoneGeneratorIsBoneAndNotJoint=16777216]="BoneGeneratorIsBoneAndNotJoint",e[e.Unknown_0x2000000=33554432]="Unknown_0x2000000",e[e.DoNotThrottleEmissionRateBasedOnDistance=67108864]="DoNotThrottleEmissionRateBasedOnDistance",e[e.Unknown_0x8000000=134217728]="Unknown_0x8000000",e[e.UsesMultiTexturing=268435456]="UsesMultiTexturing"}(l||(t.WoWParticleFlags=l={}))},7983:function(e){var t;"undefined"!=typeof self&&self,t=()=>(()=>{"use strict";var e={"./src/attributes.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0,t.createAttribsFromArrays=B,t.createBufferFromArray=P,t.createBufferFromTypedArray=b,t.createBufferInfoFromArrays=function(e,t,r){var n=B(e,t),o=Object.assign({},r||{});o.attribs=Object.assign({},r?r.attribs:{},n);var i=t.indices;if(i){var l=E(i,"indices");o.indices=b(e,l,d),o.numElements=l.length,o.elementType=a.getGLTypeForTypedArray(l)}else o.numElements||(o.numElements=function(e,t){var r,n;for(n=0;n<L.length&&!((r=L[n])in t)&&!((r=v.attribPrefix+r)in t);++n);n===L.length&&(r=Object.keys(t)[0]);var a=t[r];if(!a.buffer)return 1;e.bindBuffer(u,a.buffer);var o=e.getBufferParameter(u,c);e.bindBuffer(u,null);var i,l=o/((i=a.type)===h||i===f?1:i===p||i===m?2:i===y||i===g||i===_?4:0),s=a.numComponents||a.size,d=l/s;if(d%1!=0)throw new Error("numComponents ".concat(s," not correct for length ").concat(length));return d}(e,o.attribs));return o},t.createBuffersFromArrays=function(e,t){var r={};return Object.keys(t).forEach((function(n){r[n]=P(e,t[n],n)})),t.indices?(r.numElements=t.indices.length,r.elementType=a.getGLTypeForTypedArray(E(t.indices),"indices")):r.numElements=function(e){var t,r;for(r=0;r<L.length&&!((t=L[r])in e);++r);r===L.length&&(t=Object.keys(e)[0]);var n=e[t],a=C(n).length;if(void 0===a)return 1;var o=A(n,t),i=a/o;if(a%o>0)throw new Error("numComponents ".concat(o," not correct for length ").concat(a));return i}(t),r},t.getArray_=C,t.getNumComponents_=A,t.setAttribInfoBufferFromArray=function(e,t,r,n){r=E(r),void 0!==n?(e.bindBuffer(u,t.buffer),e.bufferSubData(u,n,r)):x(e,u,t.buffer,r,t.drawType)},t.setAttributeDefaults_=function(e){o.copyExistingProperties(e,v)},t.setAttributePrefix=function(e){v.attribPrefix=e};var a=l(r("./src/typedarrays.js")),o=l(r("./src/helper.js"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=o?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(a,l,s):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}var s=35044,u=34962,d=34963,c=34660,h=5120,f=5121,p=5122,m=5123,y=5124,g=5125,_=5126,v={attribPrefix:""};function x(e,t,r,n,a){e.bindBuffer(t,r),e.bufferData(t,n,a||s)}function b(e,t,r,n){if(o.isBuffer(e,t))return t;r=r||u;var a=e.createBuffer();return x(e,r,a,t,n),a}function F(e){return"indices"===e}function C(e){return e.length?e:e.data}var w=/coord|texture/i,S=/color|colour/i;function A(e,t,r){return e.numComponents||e.size||function(e,t){var r;if(t%(r=w.test(e)?2:S.test(e)?4:3)>0)throw new Error("Can not guess numComponents for attribute '".concat(e,"'. Tried ").concat(r," but ").concat(t," values is not evenly divisible by ").concat(r,". You should specify it."));return r}(t,r||C(e).length)}function E(e,t){if(a.isArrayBuffer(e))return e;if(a.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var r=e.type?M(e.type):void 0;return r||(r=F(t)?Uint16Array:Float32Array),new r(e.data)}function M(e){return"number"==typeof e?a.getTypedArrayTypeForGLType(e):e||Float32Array}function k(e,t){return{buffer:t.buffer,numValues:24,type:(r=t.type,"number"==typeof r?r:r?a.getGLTypeForTypedArrayType(r):_),arrayType:M(t.type)};var r}function D(e,t){var r=t.data||t,n=M(t.type),o=r*n.BYTES_PER_ELEMENT,i=e.createBuffer();return e.bindBuffer(u,i),e.bufferData(u,o,t.drawType||s),{buffer:i,numValues:r,type:a.getGLTypeForTypedArrayType(n),arrayType:n}}function T(e,t,r){var n=E(t,r);return{arrayType:n.constructor,buffer:b(e,n,void 0,t.drawType),type:a.getGLTypeForTypedArray(n),numValues:0}}function B(e,t){var r={};return Object.keys(t).forEach((function(n){if(!F(n)){var o=t[n],i=o.attrib||o.name||o.attribName||v.attribPrefix+n;if(o.value){if(!Array.isArray(o.value)&&!a.isArrayBuffer(o.value))throw new Error("array.value is not array or typedarray");r[i]={value:o.value}}else{var l=(o.buffer&&o.buffer instanceof WebGLBuffer?k:"number"==typeof o||"number"==typeof o.data?D:T)(e,o,n),s=l.buffer,u=l.type,d=l.numValues,c=l.arrayType,h=void 0!==o.normalize?o.normalize:(p=c)===Int8Array||p===Uint8Array,f=A(o,n,d);r[i]={buffer:s,numComponents:f,type:u,normalize:h,stride:o.stride||0,offset:o.offset||0,divisor:void 0===o.divisor?void 0:o.divisor,drawType:o.drawType}}}var p})),e.bindBuffer(u,null),r}var L=["position","positions","a_position"];function P(e,t,r){var n="indices"===r?d:u;return b(e,E(t,r),n)}},"./src/draw.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0,t.drawBufferInfo=s,t.drawObjectList=function(e,t){var r=null,n=null;t.forEach((function(t){if(!1!==t.active){var o=t.programInfo,l=t.vertexArrayInfo||t.bufferInfo,u=!1,d=void 0===t.type?i:t.type;o!==r&&(r=o,e.useProgram(o.program),u=!0),(u||l!==n)&&(n&&n.vertexArrayObject&&!l.vertexArrayObject&&e.bindVertexArray(null),n=l,a.setBuffersAndAttributes(e,o,l)),a.setUniforms(o,t.uniforms),s(e,l,d,t.count,t.offset,t.instanceCount)}})),n&&n.vertexArrayObject&&e.bindVertexArray(null)};var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=i?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(a,l,s):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r("./src/programs.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var i=4,l=5123;function s(e,t,r,n,a,o){r=void 0===r?i:r;var s=t.indices,u=t.elementType,d=void 0===n?t.numElements:n;a=void 0===a?0:a,u||s?void 0!==o?e.drawElementsInstanced(r,d,void 0===u?l:t.elementType,a,o):e.drawElements(r,d,void 0===u?l:t.elementType,a):void 0!==o?e.drawArraysInstanced(r,a,d,o):e.drawArrays(r,a,d)}},"./src/framebuffers.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0,t.bindFramebufferInfo=function(e,t,r){r=r||s,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},t.createFramebufferInfo=function(e,t,r,n){var i=s,l=e.createFramebuffer();e.bindFramebuffer(i,l),r=r||e.drawingBufferWidth,n=n||e.drawingBufferHeight;var h=[],f={framebuffer:l,attachments:[],width:r,height:n};return(t=t||y).forEach((function(t,l){var s=t.attachment,y=t.samples,x=t.format,b=t.attachmentPoint||function(e,t){return g[e]||g[t]}(x,t.internalFormat);if(b||(b=c+l),function(e){return e>=c&&e<c+v}(b)&&h.push(b),!s)if(void 0!==y||function(e){return _[e]}(x))s=e.createRenderbuffer(),e.bindRenderbuffer(u,s),y>1?e.renderbufferStorageMultisample(u,y,x,r,n):e.renderbufferStorage(u,x,r,n);else{var F=Object.assign({},t);F.width=r,F.height=n,void 0===F.auto&&(F.auto=!1,F.min=F.min||F.minMag||m,F.mag=F.mag||F.minMag||m,F.wrapS=F.wrapS||F.wrap||p,F.wrapT=F.wrapT||F.wrap||p),s=a.createTexture(e,F)}if(o.isRenderbuffer(e,s))e.framebufferRenderbuffer(i,b,u,s);else{if(!o.isTexture(e,s))throw new Error("unknown attachment type");void 0!==t.layer?e.framebufferTextureLayer(i,b,s,t.level||0,t.layer):e.framebufferTexture2D(i,b,t.target||d,s,t.level||0)}f.attachments.push(s)})),e.drawBuffers&&e.drawBuffers(h),f},t.resizeFramebufferInfo=function(e,t,r,n,i){n=n||e.drawingBufferWidth,i=i||e.drawingBufferHeight,t.width=n,t.height=i,(r=r||y).forEach((function(r,l){var s=t.attachments[l],d=r.format,c=r.samples;if(void 0!==c||o.isRenderbuffer(e,s))e.bindRenderbuffer(u,s),c>1?e.renderbufferStorageMultisample(u,c,d,n,i):e.renderbufferStorage(u,d,n,i);else{if(!o.isTexture(e,s))throw new Error("unknown attachment type");a.resizeTexture(e,s,r,n,i)}}))};var a=l(r("./src/textures.js")),o=l(r("./src/helper.js"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=o?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(a,l,s):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}var s=36160,u=36161,d=3553,c=36064,h=36096,f=33306,p=33071,m=9729,y=[{format:6408,type:5121,min:m,wrap:p},{format:34041}],g={};g[34041]=f,g[6401]=36128,g[36168]=36128,g[6402]=h,g[33189]=h,g[33190]=h,g[36012]=h,g[35056]=f,g[36013]=f;var _={32854:!0,32855:!0,36194:!0,34041:!0,33189:!0,6401:!0,36168:!0},v=32},"./src/helper.js":(e,t)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.__esModule=!0,t.copyExistingProperties=function(e,t){Object.keys(t).forEach((function(r){t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(t[r]=e[r])}))},t.copyNamedProperties=function(e,t,r){e.forEach((function(e){var n=t[e];void 0!==n&&(r[e]=n)}))},t.error=function(){var e;(e=console).error.apply(e,arguments)},t.isBuffer=function(e,t){return"undefined"!=typeof WebGLBuffer&&a(t,"WebGLBuffer")},t.isRenderbuffer=function(e,t){return"undefined"!=typeof WebGLRenderbuffer&&a(t,"WebGLRenderbuffer")},t.isSampler=function(e,t){return"undefined"!=typeof WebGLSampler&&a(t,"WebGLSampler")},t.isShader=function(e,t){return"undefined"!=typeof WebGLShader&&a(t,"WebGLShader")},t.isTexture=function(e,t){return"undefined"!=typeof WebGLTexture&&a(t,"WebGLTexture")},t.warn=function(){var e;(e=console).warn.apply(e,arguments)};var n=new Map;function a(e,t){if(!e||"object"!==r(e))return!1;var a=n.get(t);a||(a=new WeakMap,n.set(t,a));var o=a.get(e);if(void 0===o){var i=Object.prototype.toString.call(e);o=i.substring(8,i.length-1)===t,a.set(e,o)}return o}},"./src/m4.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0,t.axisRotate=function(e,t,r,n){n=n||new u(16);var a=t[0],o=t[1],i=t[2],l=Math.sqrt(a*a+o*o+i*i),s=(a/=l)*a,d=(o/=l)*o,c=(i/=l)*i,h=Math.cos(r),f=Math.sin(r),p=1-h,m=s+(1-s)*h,y=a*o*p+i*f,g=a*i*p-o*f,_=a*o*p-i*f,v=d+(1-d)*h,x=o*i*p+a*f,b=a*i*p+o*f,F=o*i*p-a*f,C=c+(1-c)*h,w=e[0],S=e[1],A=e[2],E=e[3],M=e[4],k=e[5],D=e[6],T=e[7],B=e[8],L=e[9],P=e[10],O=e[11];return n[0]=m*w+y*M+g*B,n[1]=m*S+y*k+g*L,n[2]=m*A+y*D+g*P,n[3]=m*E+y*T+g*O,n[4]=_*w+v*M+x*B,n[5]=_*S+v*k+x*L,n[6]=_*A+v*D+x*P,n[7]=_*E+v*T+x*O,n[8]=b*w+F*M+C*B,n[9]=b*S+F*k+C*L,n[10]=b*A+F*D+C*P,n[11]=b*E+F*T+C*O,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},t.axisRotation=function(e,t,r){r=r||new u(16);var n=e[0],a=e[1],o=e[2],i=Math.sqrt(n*n+a*a+o*o),l=(n/=i)*n,s=(a/=i)*a,d=(o/=i)*o,c=Math.cos(t),h=Math.sin(t),f=1-c;return r[0]=l+(1-l)*c,r[1]=n*a*f+o*h,r[2]=n*o*f-a*h,r[3]=0,r[4]=n*a*f-o*h,r[5]=s+(1-s)*c,r[6]=a*o*f+n*h,r[7]=0,r[8]=n*o*f+a*h,r[9]=a*o*f-n*h,r[10]=d+(1-d)*c,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},t.copy=d,t.create=function(){return new u(16).fill(0)},t.frustum=function(e,t,r,n,a,o,i){var l=t-e,s=n-r,d=a-o;return(i=i||new u(16))[0]=2*a/l,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*a/s,i[6]=0,i[7]=0,i[8]=(e+t)/l,i[9]=(n+r)/s,i[10]=o/d,i[11]=-1,i[12]=0,i[13]=0,i[14]=a*o/d,i[15]=0,i},t.getAxis=function(e,t,r){var n=4*t;return(r=r||a.create())[0]=e[n+0],r[1]=e[n+1],r[2]=e[n+2],r},t.getTranslation=function(e,t){return(t=t||a.create())[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.identity=c,t.inverse=h,t.lookAt=function(e,t,r,n){return n=n||new u(16),i=i||a.create(),l=l||a.create(),s=s||a.create(),a.normalize(a.subtract(e,t,s),s),a.normalize(a.cross(r,s,i),i),a.normalize(a.cross(s,i,l),l),n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=0,n[4]=l[0],n[5]=l[1],n[6]=l[2],n[7]=0,n[8]=s[0],n[9]=s[1],n[10]=s[2],n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},t.multiply=function(e,t,r){r=r||new u(16);var n=e[0],a=e[1],o=e[2],i=e[3],l=e[4],s=e[5],d=e[6],c=e[7],h=e[8],f=e[9],p=e[10],m=e[11],y=e[12],g=e[13],_=e[14],v=e[15],x=t[0],b=t[1],F=t[2],C=t[3],w=t[4],S=t[5],A=t[6],E=t[7],M=t[8],k=t[9],D=t[10],T=t[11],B=t[12],L=t[13],P=t[14],O=t[15];return r[0]=n*x+l*b+h*F+y*C,r[1]=a*x+s*b+f*F+g*C,r[2]=o*x+d*b+p*F+_*C,r[3]=i*x+c*b+m*F+v*C,r[4]=n*w+l*S+h*A+y*E,r[5]=a*w+s*S+f*A+g*E,r[6]=o*w+d*S+p*A+_*E,r[7]=i*w+c*S+m*A+v*E,r[8]=n*M+l*k+h*D+y*T,r[9]=a*M+s*k+f*D+g*T,r[10]=o*M+d*k+p*D+_*T,r[11]=i*M+c*k+m*D+v*T,r[12]=n*B+l*L+h*P+y*O,r[13]=a*B+s*L+f*P+g*O,r[14]=o*B+d*L+p*P+_*O,r[15]=i*B+c*L+m*P+v*O,r},t.negate=function(e,t){return(t=t||new u(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},t.ortho=function(e,t,r,n,a,o,i){return(i=i||new u(16))[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(n-r),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(a-o),i[11]=0,i[12]=(t+e)/(e-t),i[13]=(n+r)/(r-n),i[14]=(o+a)/(a-o),i[15]=1,i},t.perspective=function(e,t,r,n,a){a=a||new u(16);var o=Math.tan(.5*Math.PI-.5*e),i=1/(r-n);return a[0]=o/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(r+n)*i,a[11]=-1,a[12]=0,a[13]=0,a[14]=r*n*i*2,a[15]=0,a},t.rotateX=function(e,t,r){r=r||new u(16);var n=e[4],a=e[5],o=e[6],i=e[7],l=e[8],s=e[9],d=e[10],c=e[11],h=Math.cos(t),f=Math.sin(t);return r[4]=h*n+f*l,r[5]=h*a+f*s,r[6]=h*o+f*d,r[7]=h*i+f*c,r[8]=h*l-f*n,r[9]=h*s-f*a,r[10]=h*d-f*o,r[11]=h*c-f*i,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.rotateY=function(e,t,r){r=r||new u(16);var n=e[0],a=e[1],o=e[2],i=e[3],l=e[8],s=e[9],d=e[10],c=e[11],h=Math.cos(t),f=Math.sin(t);return r[0]=h*n-f*l,r[1]=h*a-f*s,r[2]=h*o-f*d,r[3]=h*i-f*c,r[8]=h*l+f*n,r[9]=h*s+f*a,r[10]=h*d+f*o,r[11]=h*c+f*i,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.rotateZ=function(e,t,r){r=r||new u(16);var n=e[0],a=e[1],o=e[2],i=e[3],l=e[4],s=e[5],d=e[6],c=e[7],h=Math.cos(t),f=Math.sin(t);return r[0]=h*n+f*l,r[1]=h*a+f*s,r[2]=h*o+f*d,r[3]=h*i+f*c,r[4]=h*l-f*n,r[5]=h*s-f*a,r[6]=h*d-f*o,r[7]=h*c-f*i,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.rotationX=function(e,t){t=t||new u(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationY=function(e,t){t=t||new u(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.rotationZ=function(e,t){t=t||new u(16);var r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.scale=function(e,t,r){r=r||new u(16);var n=t[0],a=t[1],o=t[2];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=n*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=a*e[6],r[7]=a*e[7],r[8]=o*e[8],r[9]=o*e[9],r[10]=o*e[10],r[11]=o*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},t.scaling=function(e,t){return(t=t||new u(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.setAxis=function(e,t,r,n){n!==e&&(n=d(e,n));var a=4*r;return n[a+0]=t[0],n[a+1]=t[1],n[a+2]=t[2],n},t.setDefaultType=function(e){var t=u;return u=e,t},t.setTranslation=function(e,t,r){return e!==(r=r||c())&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11]),r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},t.transformDirection=function(e,t,r){r=r||a.create();var n=t[0],o=t[1],i=t[2];return r[0]=n*e[0]+o*e[4]+i*e[8],r[1]=n*e[1]+o*e[5]+i*e[9],r[2]=n*e[2]+o*e[6]+i*e[10],r},t.transformNormal=function(e,t,r){r=r||a.create();var n=h(e),o=t[0],i=t[1],l=t[2];return r[0]=o*n[0]+i*n[1]+l*n[2],r[1]=o*n[4]+i*n[5]+l*n[6],r[2]=o*n[8]+i*n[9]+l*n[10],r},t.transformPoint=function(e,t,r){r=r||a.create();var n=t[0],o=t[1],i=t[2],l=n*e[3]+o*e[7]+i*e[11]+e[15];return r[0]=(n*e[0]+o*e[4]+i*e[8]+e[12])/l,r[1]=(n*e[1]+o*e[5]+i*e[9]+e[13])/l,r[2]=(n*e[2]+o*e[6]+i*e[10]+e[14])/l,r},t.translate=function(e,t,r){r=r||new u(16);var n=t[0],a=t[1],o=t[2],i=e[0],l=e[1],s=e[2],d=e[3],c=e[4],h=e[5],f=e[6],p=e[7],m=e[8],y=e[9],g=e[10],_=e[11],v=e[12],x=e[13],b=e[14],F=e[15];return e!==r&&(r[0]=i,r[1]=l,r[2]=s,r[3]=d,r[4]=c,r[5]=h,r[6]=f,r[7]=p,r[8]=m,r[9]=y,r[10]=g,r[11]=_),r[12]=i*n+c*a+m*o+v,r[13]=l*n+h*a+y*o+x,r[14]=s*n+f*a+g*o+b,r[15]=d*n+p*a+_*o+F,r},t.translation=function(e,t){return(t=t||new u(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},t.transpose=function(e,t){var r;if((t=t||new u(16))===e)return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,t;var n=e[0],a=e[1],o=e[2],i=e[3],l=e[4],s=e[5],d=e[6],c=e[7],h=e[8],f=e[9],p=e[10],m=e[11],y=e[12],g=e[13],_=e[14],v=e[15];return t[0]=n,t[1]=l,t[2]=h,t[3]=y,t[4]=a,t[5]=s,t[6]=f,t[7]=g,t[8]=o,t[9]=d,t[10]=p,t[11]=_,t[12]=i,t[13]=c,t[14]=m,t[15]=v,t};var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=i?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(a,l,s):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r("./src/v3.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var i,l,s,u=Float32Array;function d(e,t){return(t=t||new u(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function c(e){return(e=e||new u(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function h(e,t){t=t||new u(16);var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],l=e[5],s=e[6],d=e[7],c=e[8],h=e[9],f=e[10],p=e[11],m=e[12],y=e[13],g=e[14],_=e[15],v=f*_,x=g*p,b=s*_,F=g*d,C=s*p,w=f*d,S=a*_,A=g*o,E=a*p,M=f*o,k=a*d,D=s*o,T=c*y,B=m*h,L=i*y,P=m*l,O=i*h,U=c*l,I=r*y,W=m*n,R=r*h,z=c*n,j=r*l,H=i*n,N=v*l+F*h+C*y-(x*l+b*h+w*y),G=x*n+S*h+M*y-(v*n+A*h+E*y),V=b*n+A*l+k*y-(F*n+S*l+D*y),q=w*n+E*l+D*h-(C*n+M*l+k*h),Z=1/(r*N+i*G+c*V+m*q);return t[0]=Z*N,t[1]=Z*G,t[2]=Z*V,t[3]=Z*q,t[4]=Z*(x*i+b*c+w*m-(v*i+F*c+C*m)),t[5]=Z*(v*r+A*c+E*m-(x*r+S*c+M*m)),t[6]=Z*(F*r+S*i+D*m-(b*r+A*i+k*m)),t[7]=Z*(C*r+M*i+k*c-(w*r+E*i+D*c)),t[8]=Z*(T*d+P*p+O*_-(B*d+L*p+U*_)),t[9]=Z*(B*o+I*p+z*_-(T*o+W*p+R*_)),t[10]=Z*(L*o+W*d+j*_-(P*o+I*d+H*_)),t[11]=Z*(U*o+R*d+H*p-(O*o+z*d+j*p)),t[12]=Z*(L*f+U*g+B*s-(O*g+T*s+P*f)),t[13]=Z*(R*g+T*a+W*f-(I*f+z*g+B*a)),t[14]=Z*(I*s+H*g+P*a-(j*g+L*a+W*s)),t[15]=Z*(j*f+O*a+z*s-(R*s+H*f+U*a)),t}},"./src/primitives.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0,t.concatVertices=function(e){for(var t,r={},n=function(){var n=e[a];Object.keys(n).forEach((function(e){r[e]||(r[e]=[]),t||"indices"===e||(t=e);var a=n[e],o=h(a,e),i=c(a).length/o;r[e].push(i)}))},a=0;a<e.length;++a)n();var o=r[t],i={};return Object.keys(r).forEach((function(t){var r=function(t){for(var r,n=0,a=0;a<e.length;++a){var o=e[a][t];n+=c(o).length,r&&!o.data||(r=o)}return{length:n,spec:r}}(t),n=W(r.spec,r.length);!function(t,r,n){for(var a=0,o=0,i=0;i<e.length;++i){var l=e[i][t],s=c(l);"indices"===t?(I(s,n,o,a),a+=r[i]):I(s,n,o),o+=s.length}}(t,o,c(n)),i[t]=n})),i},t.create3DFBuffers=t.create3DFBufferInfo=void 0,t.create3DFVertices=k,t.createAugmentedTypedArray=p,t.createCrescentBuffers=t.createCrescentBufferInfo=void 0,t.createCrescentVertices=D,t.createCubeBuffers=t.createCubeBufferInfo=t.createCresentVertices=t.createCresentBuffers=t.createCresentBufferInfo=void 0,t.createCubeVertices=A,t.createCylinderBuffers=t.createCylinderBufferInfo=void 0,t.createCylinderVertices=T,t.createDiscBuffers=t.createDiscBufferInfo=void 0,t.createDiscVertices=L,t.createPlaneBuffers=t.createPlaneBufferInfo=void 0,t.createPlaneVertices=C,t.createSphereBuffers=t.createSphereBufferInfo=void 0,t.createSphereVertices=w,t.createTorusBuffers=t.createTorusBufferInfo=void 0,t.createTorusVertices=B,t.createTruncatedConeBuffers=t.createTruncatedConeBufferInfo=void 0,t.createTruncatedConeVertices=E,t.createXYQuadBuffers=t.createXYQuadBufferInfo=void 0,t.createXYQuadVertices=F,t.deindexVertices=function(e){var t=e.indices,r={},n=t.length;return Object.keys(e).filter(m).forEach((function(a){for(var o=e[a],i=o.numComponents,l=p(i,n,o.constructor),s=0;s<n;++s)for(var u=t[s]*i,d=0;d<i;++d)l.push(o[u+d]);r[a]=l})),r},t.duplicateVertices=function(e){var t={};return Object.keys(e).forEach((function(r){var n=e[r],a=c(n),o=W(n,a.length);I(a,c(o),0),t[r]=o})),t},t.flattenNormals=function(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var t=e.normal,r=t.length,n=0;n<r;n+=9){var a=t[n+0],o=t[n+1],i=t[n+2],l=t[n+3],s=t[n+4],u=t[n+5],d=a+l+t[n+6],c=o+s+t[n+7],h=i+u+t[n+8],f=Math.sqrt(d*d+c*c+h*h);d/=f,c/=f,h/=f,t[n+0]=d,t[n+1]=c,t[n+2]=h,t[n+3]=d,t[n+4]=c,t[n+5]=h,t[n+6]=d,t[n+7]=c,t[n+8]=h}return e},t.makeRandomVertexColors=function(e,t){t=t||{};var r=e.position.numElements,n=p(4,r,Uint8Array),a=t.rand||function(e,t){return t<3?256*Math.random()|0:255};if(e.color=n,e.indices)for(var o=0;o<r;++o)n.push(a(o,0),a(o,1),a(o,2),a(o,3));else for(var i=t.vertsPerColor||3,l=r/i,s=0;s<l;++s)for(var u=[a(s,0),a(s,1),a(s,2),a(s,3)],d=0;d<i;++d)n.push(u);return e},t.reorientDirections=_,t.reorientNormals=v,t.reorientPositions=x,t.reorientVertices=b;var a=d(r("./src/attributes.js")),o=d(r("./src/helper.js")),i=d(r("./src/typedarrays.js")),l=d(r("./src/m4.js")),s=d(r("./src/v3.js"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}var c=a.getArray_,h=a.getNumComponents_;function f(e,t){var r=0;return e.push=function(){for(var t=0;t<arguments.length;++t){var n=arguments[t];if(n instanceof Array||i.isArrayBuffer(n))for(var a=0;a<n.length;++a)e[r++]=n[a];else e[r++]=n}},e.reset=function(e){r=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function p(e,t,r){return f(new(r||Float32Array)(e*t),e)}function m(e){return"indices"!==e}function y(e,t,r){for(var n=e.length,a=new Float32Array(3),o=0;o<n;o+=3)r(t,[e[o],e[o+1],e[o+2]],a),e[o]=a[0],e[o+1]=a[1],e[o+2]=a[2]}function g(e,t,r){r=r||s.create();var n=t[0],a=t[1],o=t[2];return r[0]=n*e[0]+a*e[1]+o*e[2],r[1]=n*e[4]+a*e[5]+o*e[6],r[2]=n*e[8]+a*e[9]+o*e[10],r}function _(e,t){return y(e,t,l.transformDirection),e}function v(e,t){return y(e,l.inverse(t),g),e}function x(e,t){return y(e,t,l.transformPoint),e}function b(e,t){return Object.keys(e).forEach((function(r){var n=e[r];r.indexOf("pos")>=0?x(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?_(n,t):r.indexOf("norm")>=0&&v(n,t)})),e}function F(e,t,r){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(r=r||0)+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function C(e,t,r,n,a){e=e||1,t=t||1,r=r||1,n=n||1,a=a||l.identity();for(var o=(r+1)*(n+1),i=p(3,o),s=p(3,o),u=p(2,o),d=0;d<=n;d++)for(var c=0;c<=r;c++){var h=c/r,f=d/n;i.push(e*h-.5*e,0,t*f-.5*t),s.push(0,1,0),u.push(h,f)}for(var m=r+1,y=p(3,r*n*2,Uint16Array),g=0;g<n;g++)for(var _=0;_<r;_++)y.push((g+0)*m+_,(g+1)*m+_,(g+0)*m+_+1),y.push((g+1)*m+_,(g+1)*m+_+1,(g+0)*m+_+1);return b({position:i,normal:s,texcoord:u,indices:y},a)}function w(e,t,r,n,a,o,i){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,o=o||0;for(var l=(a=a||Math.PI)-n,s=(i=i||2*Math.PI)-o,u=(t+1)*(r+1),d=p(3,u),c=p(3,u),h=p(2,u),f=0;f<=r;f++)for(var m=0;m<=t;m++){var y=m/t,g=f/r,_=s*y+o,v=l*g+n,x=Math.sin(_),b=Math.cos(_),F=Math.sin(v),C=b*F,w=Math.cos(v),S=x*F;d.push(e*C,e*w,e*S),c.push(C,w,S),h.push(1-y,g)}for(var A=t+1,E=p(3,t*r*2,Uint16Array),M=0;M<t;M++)for(var k=0;k<r;k++)E.push((k+0)*A+M,(k+0)*A+M+1,(k+1)*A+M),E.push((k+1)*A+M,(k+0)*A+M+1,(k+1)*A+M+1);return{position:d,normal:c,texcoord:h,indices:E}}var S=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function A(e){for(var t=(e=e||1)/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],a=[[1,0],[0,0],[0,1],[1,1]],o=p(3,24),i=p(3,24),l=p(2,24),s=p(3,12,Uint16Array),u=0;u<6;++u){for(var d=S[u],c=0;c<4;++c){var h=r[d[c]],f=n[u],m=a[c];o.push(h),i.push(f),l.push(m)}var y=4*u;s.push(y+0,y+1,y+2),s.push(y+0,y+2,y+3)}return{position:o,normal:i,texcoord:l,indices:s}}function E(e,t,r,n,a,o,i){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(a<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var l=void 0===o||o,s=void 0===i||i,u=(l?2:0)+(s?2:0),d=(n+1)*(a+1+u),c=p(3,d),h=p(3,d),f=p(2,d),m=p(3,n*(a+u/2)*2,Uint16Array),y=n+1,g=Math.atan2(e-t,r),_=Math.cos(g),v=Math.sin(g),x=a+(s?2:0),b=l?-2:0;b<=x;++b){var F=b/a,C=r*F,w=void 0;b<0?(C=0,F=1,w=e):b>a?(C=r,F=1,w=t):w=e+b/a*(t-e),-2!==b&&b!==a+2||(w=0,F=0),C-=r/2;for(var S=0;S<y;++S){var A=Math.sin(S*Math.PI*2/n),E=Math.cos(S*Math.PI*2/n);c.push(A*w,C,E*w),b<0?h.push(0,-1,0):b>a?h.push(0,1,0):0===w?h.push(0,0,0):h.push(A*_,v,E*_),f.push(S/n,1-F)}}for(var M=0;M<a+u;++M)if(!(1===M&&l||M===a+u-2&&s))for(var k=0;k<n;++k)m.push(y*(M+0)+0+k,y*(M+0)+1+k,y*(M+1)+1+k),m.push(y*(M+0)+0+k,y*(M+1)+1+k,y*(M+1)+0+k);return{position:c,normal:h,texcoord:f,indices:m}}function M(e,t){t=t||[];for(var r=[],n=0;n<e.length;n+=4){var a=e[n],o=e.slice(n+1,n+4);o.push.apply(o,t);for(var i=0;i<a;++i)r.push.apply(r,o)}return r}function k(){var e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=M([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=M([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,a={position:p(3,n),texcoord:p(2,n),normal:p(3,n),color:p(4,n,Uint8Array),indices:p(3,n/3,Uint16Array)};a.position.push(e),a.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),a.normal.push(t),a.color.push(r);for(var o=0;o<n;++o)a.indices.push(o);return a}function D(e,t,r,n,a,o,i){if(a<=0)throw new Error("subdivisionDown must be > 0");var l=(i=i||1)-(o=o||0),u=2*(a+1)*4,d=p(3,u),c=p(3,u),h=p(2,u);function f(e,t,r){return e+(t-e)*r}function m(t,r,i,u,p,m){for(var y=0;y<=a;y++){var g=r/1,_=y/a,v=2*(g-.5),x=(o+_*l)*Math.PI,b=Math.sin(x),F=Math.cos(x),C=f(e,t,b),w=v*n,S=F*e,A=b*C;d.push(w,S,A);var E=s.add(s.multiply([0,b,F],i),u);c.push(E),h.push(g*p+m,_)}}for(var y=0;y<2;y++){var g=2*(y/1-.5);m(t,y,[1,1,1],[0,0,0],1,0),m(t,y,[0,0,0],[g,0,0],0,0),m(r,y,[1,1,1],[0,0,0],1,0),m(r,y,[0,0,0],[g,0,0],0,1)}var _=p(3,2*a*4,Uint16Array);function v(e,t){for(var r=0;r<a;++r)_.push(e+r+0,e+r+1,t+r+0),_.push(e+r+1,t+r+1,t+r+0)}var x=a+1;return v(0*x,4*x),v(5*x,7*x),v(6*x,2*x),v(3*x,1*x),{position:d,normal:c,texcoord:h,indices:_}}function T(e,t,r,n,a,o){return E(e,e,t,r,n,a,o)}function B(e,t,r,n,a,o){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");a=a||0;for(var i=(o=o||2*Math.PI)-a,l=r+1,s=n+1,u=l*s,d=p(3,u),c=p(3,u),h=p(2,u),f=p(3,r*n*2,Uint16Array),m=0;m<s;++m)for(var y=m/n,g=y*Math.PI*2,_=Math.sin(g),v=e+_*t,x=Math.cos(g),b=x*t,F=0;F<l;++F){var C=F/r,w=a+C*i,S=Math.sin(w),A=Math.cos(w),E=S*v,M=A*v,k=S*_,D=A*_;d.push(E,b,M),c.push(k,x,D),h.push(C,1-y)}for(var T=0;T<n;++T)for(var B=0;B<r;++B){var L=1+B,P=1+T;f.push(l*T+B,l*P+B,l*T+L),f.push(l*P+B,l*P+L,l*T+L)}return{position:d,normal:c,texcoord:h,indices:f}}function L(e,t,r,n,a){if(t<3)throw new Error("divisions must be at least 3");a=a||1,n=n||0;for(var o=(t+1)*((r=r||1)+1),i=p(3,o),l=p(3,o),s=p(2,o),u=p(3,r*t*2,Uint16Array),d=0,c=e-n,h=t+1,f=0;f<=r;++f){for(var m=n+c*Math.pow(f/r,a),y=0;y<=t;++y){var g=2*Math.PI*y/t,_=m*Math.cos(g),v=m*Math.sin(g);if(i.push(_,0,v),l.push(0,1,0),s.push(1-y/t,f/r),f>0&&y!==t){var x=d+(y+1),b=d+y,F=d+y-h,C=d+(y+1)-h;u.push(x,b,F),u.push(x,F,C)}}d+=t+1}return{position:i,normal:l,texcoord:s,indices:u}}function P(e){return function(t){var r=e.apply(this,Array.prototype.slice.call(arguments,1));return a.createBuffersFromArrays(t,r)}}function O(e){return function(t){var r=e.apply(null,Array.prototype.slice.call(arguments,1));return a.createBufferInfoFromArrays(t,r)}}var U=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function I(e,t,r,n){n=n||0;for(var a=e.length,o=0;o<a;++o)t[r+o]=e[o]+n}function W(e,t){var r=c(e),n=new r.constructor(t),a=n;return r.numComponents&&r.numElements&&f(n,r.numComponents),e.data&&(a={data:n},o.copyNamedProperties(U,e,a)),a}t.create3DFBufferInfo=O(k),t.create3DFBuffers=P(k),t.createCubeBufferInfo=O(A),t.createCubeBuffers=P(A),t.createPlaneBufferInfo=O(C),t.createPlaneBuffers=P(C),t.createSphereBufferInfo=O(w),t.createSphereBuffers=P(w),t.createTruncatedConeBufferInfo=O(E),t.createTruncatedConeBuffers=P(E),t.createXYQuadBufferInfo=O(F),t.createXYQuadBuffers=P(F);var R=t.createCrescentBufferInfo=O(D),z=t.createCrescentBuffers=P(D);t.createCylinderBufferInfo=O(T),t.createCylinderBuffers=P(T),t.createTorusBufferInfo=O(B),t.createTorusBuffers=P(B),t.createDiscBufferInfo=O(L),t.createDiscBuffers=P(L),t.createCresentBufferInfo=R,t.createCresentBuffers=z,t.createCresentVertices=D},"./src/programs.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0,t.bindTransformFeedbackInfo=Ee,t.bindUniformBlock=Be,t.createAttributeSetters=Oe,t.createProgram=pe,t.createProgramAsync=void 0,t.createProgramFromScripts=function(e,t,r,n,a){var o,i=de(r,n,a),l=[],s=p(t);try{for(s.s();!(o=s.n()).done;){var u=o.value,d=v(u);if(!d)return se(i,"unknown script element: ".concat(u));l.push(d.text)}}catch(e){s.e(e)}finally{s.f()}return pe(e,l,i)},t.createProgramFromSources=xe,t.createProgramInfo=Re,t.createProgramInfoAsync=void 0,t.createProgramInfoFromProgram=Ie,t.createProgramInfos=He,t.createProgramInfosAsync=void 0,t.createPrograms=je,t.createProgramsAsync=void 0,t.createTransformFeedback=function(e,t,r){var n=e.createTransformFeedback();return e.bindTransformFeedback(A,n),e.useProgram(t.program),Ee(e,t,r),e.bindTransformFeedback(A,null),n},t.createTransformFeedbackInfo=Ae,t.createUniformBlockInfo=function(e,t,r){return Te(e,t.program,t.uniformBlockSpec,r)},t.createUniformBlockInfoFromProgram=Te,t.createUniformBlockSpecFromProgram=Me,t.createUniformSetters=Se,t.setAttributes=Ue,t.setBlockUniforms=function(e,t){var r=e.setters;for(var n in t){var a=r[n];a&&a(t[n])}},t.setBuffersAndAttributes=function(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(Ue(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(C,r.indices))},t.setUniformBlock=function(e,t,r){Be(e,t,r)&&e.bufferData(w,r.array,b)},t.setUniforms=Pe,t.setUniformsAndBindTextures=void 0;var a=l(r("./src/utils.js")),o=l(r("./src/helper.js"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=o?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(a,l,s):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}function s(){s=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new B(n||[]);return o(i,"_invoke",{value:M(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p="suspendedStart",m="suspendedYield",y="executing",g="completed",_={};function v(){}function x(){}function b(){}var F={};c(F,l,(function(){return this}));var C=Object.getPrototypeOf,w=C&&C(C(L([])));w&&w!==r&&a.call(w,l)&&(F=w);var S=b.prototype=v.prototype=Object.create(F);function A(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,l,s){var u=f(e[o],e,i);if("throw"!==u.type){var d=u.arg,c=d.value;return c&&"object"==n(c)&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,l,s)}),(function(e){r("throw",e,l,s)})):t.resolve(c).then((function(e){d.value=e,l(d)}),(function(e){return r("throw",e,l,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return i=i?i.then(a,a):a()}})}function M(t,r,n){var a=p;return function(o,i){if(a===y)throw new Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var s=k(l,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=y;var u=f(t,r,n);if("normal"===u.type){if(a=n.done?g:m,u.arg===_)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=g,n.method="throw",n.arg=u.arg)}}}function k(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,_;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return x.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:x,configurable:!0}),x.displayName=c(b,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},A(E.prototype),c(E.prototype,u,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new E(h(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(S),c(S,d,"Generator"),c(S,l,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,a){return l.type="throw",l.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){var a,o,i,l;a=e,o=t,i=r[t],l=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==n(l)?l:String(l))in a?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r,n,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,a)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){c(o,n,a,i,l,"next",e)}function l(e){c(o,n,a,i,l,"throw",e)}i(void 0)}))}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],s=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=m(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function m(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=o.error,_=o.warn;function v(e){return"undefined"!=typeof document&&document.getElementById?document.getElementById(e):null}var x=33984,b=35048,F=34962,C=34963,w=35345,S=35982,A=36386,E=35713,M=35714,k=35632,D=35633,T=35981,B=35718,L=35721,P=35971,O=35382,U=35396,I=35398,W=35392,R=35395,z=5124,j=3553,H=34067,N=32879,G=35866,V={};function q(e,t){return V[t].bindPoint}function Z(e,t){return function(r){e.uniform1i(t,r)}}function K(e,t){return function(r){e.uniform1iv(t,r)}}function Y(e,t){return function(r){e.uniform2iv(t,r)}}function X(e,t){return function(r){e.uniform3iv(t,r)}}function J(e,t){return function(r){e.uniform4iv(t,r)}}function Q(e,t,r,n){var i=q(0,t);return a.isWebGL2(e)?function(t){var a,l;!t||o.isTexture(e,t)?(a=t,l=null):(a=t.texture,l=t.sampler),e.uniform1i(n,r),e.activeTexture(x+r),e.bindTexture(i,a),e.bindSampler(r,l)}:function(t){e.uniform1i(n,r),e.activeTexture(x+r),e.bindTexture(i,t)}}function $(e,t,r,n,i){for(var l=q(0,t),s=new Int32Array(i),u=0;u<i;++u)s[u]=r+u;return a.isWebGL2(e)?function(t){e.uniform1iv(n,s),t.forEach((function(t,n){var a,i;e.activeTexture(x+s[n]),!t||o.isTexture(e,t)?(a=t,i=null):(a=t.texture,i=t.sampler),e.bindSampler(r,i),e.bindTexture(l,a)}))}:function(t){e.uniform1iv(n,s),t.forEach((function(t,r){e.activeTexture(x+s[r]),e.bindTexture(l,t)}))}}function ee(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(F,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||5126,r.normalize||!1,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function te(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,r.value)}else e.bindBuffer(F,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||z,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function re(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,r.value)}else e.bindBuffer(F,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||5125,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function ne(e,t,r){var n=r.size,a=r.count;return function(r){e.bindBuffer(F,r.buffer);for(var o=r.size||r.numComponents||n,i=o/a,l=r.type||5126,s=V[l].size*o,u=r.normalize||!1,d=r.offset||0,c=s/a,h=0;h<a;++h)e.enableVertexAttribArray(t+h),e.vertexAttribPointer(t+h,i,l,u,s,d+c*h),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+h,r.divisor||0)}}V[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},V[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}},cols:2},V[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}},cols:3},V[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}},cols:4},V[z]={Type:Int32Array,size:4,setter:Z,arraySetter:K},V[35667]={Type:Int32Array,size:8,setter:Y,cols:2},V[35668]={Type:Int32Array,size:12,setter:X,cols:3},V[35669]={Type:Int32Array,size:16,setter:J,cols:4},V[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},V[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}},cols:2},V[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}},cols:3},V[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}},cols:4},V[35670]={Type:Uint32Array,size:4,setter:Z,arraySetter:K},V[35671]={Type:Uint32Array,size:8,setter:Y,cols:2},V[35672]={Type:Uint32Array,size:12,setter:X,cols:3},V[35673]={Type:Uint32Array,size:16,setter:J,cols:4},V[35674]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}},rows:2,cols:2},V[35675]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}},rows:3,cols:3},V[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}},rows:4,cols:4},V[35685]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}},rows:2,cols:3},V[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}},rows:2,cols:4},V[35687]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}},rows:3,cols:2},V[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}},rows:3,cols:4},V[35689]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}},rows:4,cols:2},V[35690]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}},rows:4,cols:3},V[35678]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:j},V[35680]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:H},V[35679]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:N},V[35682]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:j},V[36289]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:G},V[36292]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:G},V[36293]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:H},V[36298]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:j},V[36299]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:N},V[36300]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:H},V[36303]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:G},V[36306]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:j},V[36307]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:N},V[36308]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:H},V[36311]={Type:null,size:0,setter:Q,arraySetter:$,bindPoint:G};var ae={};ae[5126]={size:4,setter:ee},ae[35664]={size:8,setter:ee},ae[35665]={size:12,setter:ee},ae[35666]={size:16,setter:ee},ae[z]={size:4,setter:te},ae[35667]={size:8,setter:te},ae[35668]={size:12,setter:te},ae[35669]={size:16,setter:te},ae[5125]={size:4,setter:re},ae[36294]={size:8,setter:re},ae[36295]={size:12,setter:re},ae[36296]={size:16,setter:re},ae[35670]={size:4,setter:te},ae[35671]={size:8,setter:te},ae[35672]={size:12,setter:te},ae[35673]={size:16,setter:te},ae[35674]={size:4,setter:ne,count:2},ae[35675]={size:9,setter:ne,count:3},ae[35676]={size:16,setter:ne,count:4};var oe=/ERROR:\s*\d+:(\d+)/gi,ie=/^[ \t]*\n/;function le(e){var t=0;return ie.test(e)&&(t=1,e=e.replace(ie,"")),{lineOffset:t,shaderSource:e}}function se(e,t){return e.errorCallback(t),e.callback&&setTimeout((function(){e.callback("".concat(t,"\n").concat(e.errors.join("\n")))})),null}function ue(e,t,r,n){if(n=n||g,!e.getShaderParameter(r,E)){var o=e.getShaderInfoLog(r),i=le(e.getShaderSource(r)),l=i.lineOffset,s=i.shaderSource,u="".concat(function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=function(e){if(Array.isArray(e))return y(e)}(t=r.matchAll(oe))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=new Map(a.map((function(e,t){var n=parseInt(e[1]),o=a[t+1],i=o?o.index:r.length;return[n-1,r.substring(e.index,i)]})));return e.split("\n").map((function(e,t){var r=o.get(t);return"".concat(t+1+n,": ").concat(e).concat(r?"\n\n^^^ ".concat(r):"")})).join("\n")}(s,o,l),"\nError compiling ").concat(a.glEnumToString(e,t),": ").concat(o);return n(u),u}return""}function de(e,t,r){var n,a,o;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){var i=e;r=i.errorCallback,e=i.attribLocations,n=i.transformFeedbackVaryings,a=i.transformFeedbackMode,o=i.callback}var l=r||g,s=[],u={errorCallback:function(e){s.push(e);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];l.apply(void 0,[e].concat(r))},transformFeedbackVaryings:n,transformFeedbackMode:a,callback:o,errors:s},d={};return Array.isArray(e)?e.forEach((function(e,r){d[e]=t?t[r]:r})):d=e||{},u.attribLocations=d,u}var ce=["VERTEX_SHADER","FRAGMENT_SHADER"],he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))};function fe(e,t,r){for(var n,a=e.createProgram(),o=de(r),i=o.attribLocations,l=o.transformFeedbackVaryings,s=o.transformFeedbackMode,u=0;u<t.length;++u){var d=t[u];if("string"==typeof d){var c=v(d),h=c?c.text:d,p=e[ce[u]];c&&c.type&&(p=((n=c.type).indexOf("frag")>=0?k:n.indexOf("vert")>=0?D:void 0)||p),d=e.createShader(p),e.shaderSource(d,le(h).shaderSource),e.compileShader(d),e.attachShader(a,d)}}Object.entries(i).forEach((function(t){var r=f(t,2),n=r[0],o=r[1];return e.bindAttribLocation(a,o,n)}));var m=l;return m&&(m.attribs&&(m=m.attribs),Array.isArray(m)||(m=Object.keys(m)),e.transformFeedbackVaryings(a,m,s||T)),e.linkProgram(a),a}function pe(e,t,r,n,a){var o=de(r,n,a),i=new Set(t),l=fe(e,t,o);function s(e,t){var r=ve(e,t,o.errorCallback);return r&&function(e,t,r){var n,a=p(e.getAttachedShaders(t));try{for(a.s();!(n=a.n()).done;){var o=n.value;r.has(o)&&e.deleteShader(o)}}catch(e){a.e(e)}finally{a.f()}e.deleteProgram(t)}(e,t,i),r}if(!o.callback)return s(e,l)?void 0:l;ye(e,l).then((function(){var t=s(e,l);o.callback(t,t?void 0:l)}))}function me(e){return function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return new Promise((function(n,o){var i=de.apply(void 0,a);i.callback=function(e,t){e?o(e):n(t)},e(t,r,i)}))}}function ye(e,t){return ge.apply(this,arguments)}function ge(){return(ge=h(s().mark((function e(t,r){var n,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getExtension("KHR_parallel_shader_compile"),a=n?function(e,t){return e.getProgramParameter(t,n.COMPLETION_STATUS_KHR)}:function(){return!0},o=0;case 3:return e.next=5,he(o);case 5:o=1e3/60;case 6:if(!a(t,r)){e.next=3;break}case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return(_e=h(s().mark((function e(t,r){var n,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0,a=Object.values(r);case 1:if(!(n<a.length)){e.next=8;break}return o=a[n],e.next=5,ye(t,o);case 5:n++,e.next=1;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e,t,r){if(r=r||g,!e.getProgramParameter(t,M)){var n=e.getProgramInfoLog(t);r("Error in program linking: ".concat(n));var a=e.getAttachedShaders(t).map((function(t){return ue(e,e.getShaderParameter(t,e.SHADER_TYPE),t,r)}));return"".concat(n,"\n").concat(a.filter((function(e){return e})).join("\n"))}}function xe(e,t,r,n,a){return pe(e,t,r,n,a)}function be(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}t.createProgramAsync=me(pe),t.createProgramInfoAsync=me(Re);var Fe=/(\.|\[|]|\w+)/g,Ce=function(e){return e>="0"&&e<="9"};function we(e,t,r,n){for(var a=e.split(Fe).filter((function(e){return""!==e})),o=0,i="";;){var l=a[o++];i+=l;var s=Ce(l[0]),u=s?parseInt(l):l;if(s&&(i+=a[o++]),o===a.length){r[u]=t;break}var d=a[o++],c="["===d,h=r[u]||(c?[]:{});r[u]=h,r=h,n[i]=n[i]||function(e){return function(t){Le(e,t)}}(h),i+=d}}function Se(e,t){var r=0;function n(t,n,a){var o,i=n.name.endsWith("[0]"),l=n.type,s=V[l];if(!s)throw new Error("unknown type: 0x".concat(l.toString(16)));if(s.bindPoint){var u=r;r+=n.size,o=i?s.arraySetter(e,l,u,a,n.size):s.setter(e,l,u,a,n.size)}else o=s.arraySetter&&i?s.arraySetter(e,a):s.setter(e,a);return o.location=a,o}for(var a={},o={},i=e.getProgramParameter(t,B),l=0;l<i;++l){var s=e.getActiveUniform(t,l);if(!be(s)){var u=s.name;u.endsWith("[0]")&&(u=u.substr(0,u.length-3));var d=e.getUniformLocation(t,s.name);if(d){var c=n(0,s,d);a[u]=c,we(u,c,o,a)}}}return a}function Ae(e,t){for(var r={},n=e.getProgramParameter(t,P),a=0;a<n;++a){var o=e.getTransformFeedbackVarying(t,a);r[o.name]={index:a,type:o.type,size:o.size}}return r}function Ee(e,t,r){for(var n in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var a=t[n];if(a){var o=r[n];o.offset?e.bindBufferRange(S,a.index,o.buffer,o.offset,o.size):e.bindBufferBase(S,a.index,o.buffer)}}}function Me(e,t){for(var r=e.getProgramParameter(t,B),n=[],a=[],o=0;o<r;++o){a.push(o),n.push({});var i=e.getActiveUniform(t,o);n[o].name=i.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(r){var o=r[0],i=r[1];e.getActiveUniforms(t,a,e[o]).forEach((function(e,t){n[t][i]=e}))}));for(var l={},s=e.getProgramParameter(t,O),u=0;u<s;++u){var d=e.getActiveUniformBlockName(t,u),c={index:e.getUniformBlockIndex(t,d),usedByVertexShader:e.getActiveUniformBlockParameter(t,u,U),usedByFragmentShader:e.getActiveUniformBlockParameter(t,u,I),size:e.getActiveUniformBlockParameter(t,u,W),uniformIndices:e.getActiveUniformBlockParameter(t,u,R)};c.used=c.usedByVertexShader||c.usedByFragmentShader,l[d]=c}return{blockSpecs:l,uniformData:n}}var ke=/\[\d+\]\.$/,De=function(e,t){return((e+(t-1))/t|0)*t};function Te(e,t,r,n){var a=r.blockSpecs,o=r.uniformData,i=a[n];if(!i)return _("no uniform block object named:",n),{name:n,uniforms:{}};var l=new ArrayBuffer(i.size),s=e.createBuffer(),u=i.index;e.bindBuffer(w,s),e.uniformBlockBinding(t,i.index,u);var d=n+".";ke.test(d)&&(d=d.replace(ke,"."));var c={},h={},f={};return i.uniformIndices.forEach((function(e){var t=o[e],r=t.name;r.startsWith(d)&&(r=r.substr(d.length));var n=r.endsWith("[0]");n&&(r=r.substr(0,r.length-3));var a=V[t.type],i=a.Type,s=n?De(a.size,16)*t.size:a.size*t.size,u=new i(l,t.offset,s/i.BYTES_PER_ELEMENT);c[r]=u;var p=function(e,t,r,n){if(t||r){n=n||1;var a=e.length/4;return function(t){for(var r=0,o=0,i=0;i<a;++i){for(var l=0;l<n;++l)e[r++]=t[o++];r+=4-n}}}return function(t){t.length?e.set(t):e[0]=t}}(u,n,a.rows,a.cols);h[r]=p,we(r,p,f,h)})),{name:n,array:l,asFloat:new Float32Array(l),buffer:s,uniforms:c,setters:h}}function Be(e,t,r){var n=(t.uniformBlockSpec||t).blockSpecs[r.name];if(n){var a=n.index;return e.bindBufferRange(w,a,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function Le(e,t){for(var r in t){var n=e[r];"function"==typeof n?n(t[r]):Le(e[r],t[r])}}function Pe(e){for(var t=e.uniformSetters||e,r=arguments.length<=1?0:arguments.length-1,n=0;n<r;++n){var a=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];if(Array.isArray(a))for(var o=a.length,i=0;i<o;++i)Pe(t,a[i]);else for(var l in a){var s=t[l];s&&s(a[l])}}}function Oe(e,t){for(var r={},n=e.getProgramParameter(t,L),a=0;a<n;++a){var o=e.getActiveAttrib(t,a);if(!be(o)){var i=e.getAttribLocation(t,o.name),l=ae[o.type],s=l.setter(e,i,l);s.location=i,r[o.name]=s}}return r}function Ue(e,t){for(var r in t){var n=e[r];n&&n(t[r])}}function Ie(e,t){var r={program:t,uniformSetters:Se(e,t),attribSetters:Oe(e,t)};return a.isWebGL2(e)&&(r.uniformBlockSpec=Me(e,t),r.transformFeedbackInfo=Ae(e,t)),r}t.setUniformsAndBindTextures=Pe;var We=/\s|{|}|;/;function Re(e,t,r,n,a){var o=de(r,n,a),i=[];if(t=t.map((function(e){if(!We.test(e)){var t=v(e);if(t)e=t.text;else{var r="no element with id: ".concat(e);o.errorCallback(r),i.push(r)}}return e})),i.length)return se(o,"");var l=o.callback;l&&(o.callback=function(t,r){l(t,t?void 0:Ie(e,r))});var s=xe(e,t,o);return s?Ie(e,s):null}function ze(e,t,r,n,a){for(var o=0,i=Object.entries(t);o<i.length;o++){var l=f(i[o],2),s=l[0],u=l[1],c=d({},a),h=r[s];Array.isArray(h)||Object.assign(c,h);var m=ve(e,u,c.errorCallback);if(m){for(var y=0,g=Object.values(t);y<g.length;y++){var _=g[y],v=e.getAttachedShaders(_);e.deleteProgram(_);var x,b=p(v);try{for(b.s();!(x=b.n()).done;){var F=x.value;n.has(F)||e.deleteShader(F)}}catch(e){b.e(e)}finally{b.f()}}return m}}}function je(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new Set,a=Object.fromEntries(Object.entries(t).map((function(t){var a=f(t,2),o=a[0],i=a[1],l=d({},r),s=Array.isArray(i)?i:i.shaders;return Array.isArray(i)||Object.assign(l,i),s.forEach(n.add,n),[o,fe(e,s,l)]})));if(!r.callback)return ze(e,a,t,n,r)?void 0:a;(function(e,t){return _e.apply(this,arguments)})(e,a).then((function(){var o=ze(e,a,t,n,r);r.callback(o,o?void 0:a)}))}function He(e,t,r){function n(e,t){return Object.fromEntries(Object.entries(t).map((function(t){var r=f(t,2),n=r[0],a=r[1];return[n,Ie(e,a)]})))}var a=(r=de(r)).callback;a&&(r.callback=function(t,r){a(t,t?void 0:n(e,r))});var o=je(e,t,r);if(!a&&o)return n(e,o)}t.createProgramsAsync=me(je),t.createProgramInfosAsync=me(He)},"./src/textures.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0,t.canFilter=Dt,t.canGenerateMipmap=kt,t.createSampler=Rt,t.createSamplers=function(e,t){var r={};return Object.keys(t).forEach((function(n){r[n]=Rt(e,t[n])})),r},t.createTexture=Qt,t.createTextures=function(e,t,r){r=r||Vt;var n=0,a=[],o={},i={};function l(){0===n&&setTimeout((function(){r(a.length?a:void 0,o,i)}),0)}return Object.keys(t).forEach((function(r){var s,u,d=t[r];("string"==typeof(u=d.src)||Array.isArray(u)&&"string"==typeof u[0])&&(s=function(e,t,o){i[r]=o,--n,e&&a.push(e),l()},++n),o[r]=Qt(e,d,s)})),l(),o},t.getBytesPerElementForInternalFormat=At,t.getFormatAndTypeForInternalFormat=Et,t.getNumComponentsForFormat=function(e){var t=Ct[e];if(!t)throw"unknown format: "+e;return t.numColorComponents},t.loadTextureFromUrl=Yt,t.resizeTexture=function(e,t,r,n,a,o){n=n||r.width,a=a||r.height,o=o||r.depth;var i=r.target||w;e.bindTexture(i,t);var l,s=r.level||0,u=r.internalFormat||r.format||y,d=Et(u),c=r.format||d.format,f=r.src;if(l=f&&(h(f)||Array.isArray(f)&&"number"==typeof f[0])?r.type||Tt(0,f,d.type):r.type||d.type,i===S)for(var p=0;p<6;++p)e.texImage2D(M+p,s,u,n,a,0,c,l,null);else i===A||i===E?e.texImage3D(i,s,u,n,a,o,0,c,l,null):e.texImage2D(i,s,u,n,a,0,c,l,null)},t.setDefaultTextureColor=Lt,t.setEmptyTexture=Jt,t.setSamplerParameters=Wt,t.setTextureDefaults_=function(e){i.copyExistingProperties(e,c),e.textureColor&&Lt(e.textureColor)},t.setTextureFilteringForSize=zt,t.setTextureFromArray=Xt,t.setTextureFromElement=Gt,t.setTextureParameters=It;var a=s(r("./src/utils.js")),o=s(r("./src/typedarrays.js")),i=s(r("./src/helper.js"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}var u,d,c={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},h=o.isArrayBuffer,f=function(){return u=u||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null)},p=6406,m=6407,y=6408,g=6409,_=6410,v=6402,x=34041,b=33071,F=9728,C=9729,w=3553,S=34067,A=32879,E=35866,M=34069,k=34070,D=34071,T=34072,B=34073,L=34074,P=10241,O=10240,U=10242,I=10243,W=32882,R=33082,z=33083,j=33084,H=33085,N=34892,G=34893,V=3317,q=3314,Z=32878,K=3316,Y=3315,X=32877,J=37443,Q=37441,$=37440,ee=33321,te=36756,re=33325,ne=33326,ae=33330,oe=33329,ie=33338,le=33337,se=33340,ue=33339,de=33323,ce=36757,he=33327,fe=33328,pe=33336,me=33335,ye=33332,ge=33331,_e=33334,ve=33333,xe=32849,be=35905,Fe=36194,Ce=36758,we=35898,Se=35901,Ae=34843,Ee=34837,Me=36221,ke=36239,De=36215,Te=36233,Be=36209,Le=36227,Pe=32856,Oe=35907,Ue=36759,Ie=32855,We=32854,Re=32857,ze=34842,je=34836,He=36220,Ne=36238,Ge=36975,Ve=36214,qe=36232,Ze=36226,Ke=36208,Ye=33189,Xe=33190,Je=36012,Qe=36013,$e=35056,et=5120,tt=5121,rt=5122,nt=5123,at=5124,ot=5125,it=5126,lt=32819,st=32820,ut=33635,dt=5131,ct=36193,ht=33640,ft=35899,pt=35902,mt=36269,yt=34042,gt=33319,_t=33320,vt=6403,xt=36244,bt=36248,Ft=36249,Ct={},wt=Ct;function St(e){if(!d){var t={};t[p]={textureFormat:p,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[tt,dt,ct,it]},t[g]={textureFormat:g,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[tt,dt,ct,it]},t[_]={textureFormat:_,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[tt,dt,ct,it]},t[m]={textureFormat:m,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[tt,dt,ct,it,ut]},t[y]={textureFormat:y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[tt,dt,ct,it,lt,st]},t[v]={textureFormat:v,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[ot,nt]},t[ee]={textureFormat:vt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[tt]},t[te]={textureFormat:vt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[et]},t[re]={textureFormat:vt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[it,dt]},t[ne]={textureFormat:vt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[it]},t[ae]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[tt]},t[oe]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[et]},t[ye]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[nt]},t[ge]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[rt]},t[_e]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ot]},t[ve]={textureFormat:xt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[at]},t[de]={textureFormat:gt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[tt]},t[ce]={textureFormat:gt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[et]},t[he]={textureFormat:gt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[it,dt]},t[fe]={textureFormat:gt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[it]},t[pe]={textureFormat:_t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[tt]},t[me]={textureFormat:_t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[et]},t[ie]={textureFormat:_t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[nt]},t[le]={textureFormat:_t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rt]},t[se]={textureFormat:_t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ot]},t[ue]={textureFormat:_t,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[at]},t[xe]={textureFormat:m,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[tt]},t[be]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[tt]},t[Fe]={textureFormat:m,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[tt,ut]},t[Ce]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[et]},t[we]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[it,dt,ft]},t[Se]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[it,dt,pt]},t[Ae]={textureFormat:m,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[it,dt]},t[Ee]={textureFormat:m,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[it]},t[Me]={textureFormat:bt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[tt]},t[ke]={textureFormat:bt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[et]},t[De]={textureFormat:bt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[nt]},t[Te]={textureFormat:bt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[rt]},t[Be]={textureFormat:bt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ot]},t[Le]={textureFormat:bt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[at]},t[Pe]={textureFormat:y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[tt]},t[Oe]={textureFormat:y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[tt]},t[Ue]={textureFormat:y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[et]},t[Ie]={textureFormat:y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[tt,st,ht]},t[We]={textureFormat:y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[tt,lt]},t[Re]={textureFormat:y,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[ht]},t[ze]={textureFormat:y,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[it,dt]},t[je]={textureFormat:y,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[it]},t[He]={textureFormat:Ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[tt]},t[Ne]={textureFormat:Ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[et]},t[Ge]={textureFormat:Ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ht]},t[Ve]={textureFormat:Ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[nt]},t[qe]={textureFormat:Ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[rt]},t[Ze]={textureFormat:Ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[at]},t[Ke]={textureFormat:Ft,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[ot]},t[Ye]={textureFormat:v,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[nt,ot]},t[Xe]={textureFormat:v,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ot]},t[Je]={textureFormat:v,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[it]},t[$e]={textureFormat:x,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yt]},t[Qe]={textureFormat:x,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[mt]},Object.keys(t).forEach((function(e){var r=t[e];r.bytesPerElementMap={},r.bytesPerElement.forEach((function(e,t){var n=r.type[t];r.bytesPerElementMap[n]=e}))})),d=t}return d[e]}function At(e,t){var r=St(e);if(!r)throw"unknown internal format";var n=r.bytesPerElementMap[t];if(void 0===n)throw"unknown internal format";return n}function Et(e){var t=St(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function Mt(e){return!(e&e-1)}function kt(e,t,r,n){if(!a.isWebGL2(e))return Mt(t)&&Mt(r);var o=St(n);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function Dt(e){var t=St(e);if(!t)throw"unknown internal format";return t.textureFilterable}function Tt(e,t,r){return h(t)?o.getGLTypeForTypedArray(t):r||tt}function Bt(e,t,r,n,a){if(a%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=a/n)%1)throw"can't guess dimensions"}else if((n=a/r)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(a/(t===S?6:1));o%1==0?(r=o,n=o):(r=a,n=1)}return{width:r,height:n}}function Lt(e){c.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function Pt(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(J,t.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(Q,t.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei($,t.flipY)}function Ot(e){e.pixelStorei(V,4),a.isWebGL2(e)&&(e.pixelStorei(q,0),e.pixelStorei(Z,0),e.pixelStorei(K,0),e.pixelStorei(Y,0),e.pixelStorei(X,0))}function Ut(e,t,r,n){n.minMag&&(r.call(e,t,P,n.minMag),r.call(e,t,O,n.minMag)),n.min&&r.call(e,t,P,n.min),n.mag&&r.call(e,t,O,n.mag),n.wrap&&(r.call(e,t,U,n.wrap),r.call(e,t,I,n.wrap),(t===A||i.isSampler(e,t))&&r.call(e,t,W,n.wrap)),n.wrapR&&r.call(e,t,W,n.wrapR),n.wrapS&&r.call(e,t,U,n.wrapS),n.wrapT&&r.call(e,t,I,n.wrapT),void 0!==n.minLod&&r.call(e,t,R,n.minLod),void 0!==n.maxLod&&r.call(e,t,z,n.maxLod),void 0!==n.baseLevel&&r.call(e,t,j,n.baseLevel),void 0!==n.maxLevel&&r.call(e,t,H,n.maxLevel),void 0!==n.compareFunc&&r.call(e,t,G,n.compareFunc),void 0!==n.compareMode&&r.call(e,t,N,n.compareMode)}function It(e,t,r){var n=r.target||w;e.bindTexture(n,t),Ut(e,n,e.texParameteri,r)}function Wt(e,t,r){Ut(e,t,e.samplerParameteri,r)}function Rt(e,t){var r=e.createSampler();return Wt(e,r,t),r}function zt(e,t,r,n,a,o){r=r||c.textureOptions,o=o||y;var i=r.target||w;if(n=n||r.width,a=a||r.height,e.bindTexture(i,t),kt(e,n,a,o))e.generateMipmap(i);else{var l=Dt(o)?C:F;e.texParameteri(i,P,l),e.texParameteri(i,O,l),e.texParameteri(i,U,b),e.texParameteri(i,I,b)}}function jt(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function Ht(e,t){return(t=t||{}).cubeFaceOrder||[M,k,D,T,B,L]}function Nt(e,t){var r=Ht(0,t).map((function(e,t){return{face:e,ndx:t}}));return r.sort((function(e,t){return e.face-t.face})),r}function Gt(e,t,r,n){var a=(n=n||c.textureOptions).target||w,o=n.level||0,i=r.width,l=r.height,s=n.internalFormat||n.format||y,u=Et(s),d=n.format||u.format,h=n.type||u.type;if(Pt(e,n),e.bindTexture(a,t),a===S){var p,m,g=r.width,_=r.height;if(g/6===_)p=_,m=[0,0,1,0,2,0,3,0,4,0,5,0];else if(_/6===g)p=g,m=[0,0,0,1,0,2,0,3,0,4,0,5];else if(g/3==_/2)p=g/3,m=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(g/2!=_/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);p=g/2,m=[0,0,1,0,0,1,1,1,0,2,1,2]}var v=f();v?(v.canvas.width=p,v.canvas.height=p,i=p,l=p,Nt(0,n).forEach((function(t){var n=m[2*t.ndx+0]*p,a=m[2*t.ndx+1]*p;v.drawImage(r,n,a,p,p,0,0,p,p),e.texImage2D(t.face,o,s,d,h,v.canvas)})),v.canvas.width=1,v.canvas.height=1):"undefined"!=typeof createImageBitmap&&(i=p,l=p,Nt(0,n).forEach((function(u){var c=m[2*u.ndx+0]*p,f=m[2*u.ndx+1]*p;e.texImage2D(u.face,o,s,p,p,0,d,h,null),createImageBitmap(r,c,f,p,p,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(r){Pt(e,n),e.bindTexture(a,t),e.texImage2D(u.face,o,s,d,h,r),jt(n)&&zt(e,t,n,i,l,s)}))})))}else if(a===A||a===E){var x=Math.min(r.width,r.height),b=Math.max(r.width,r.height),F=b/x;if(F%1!=0)throw"can not compute 3D dimensions of element";var C=r.width===b?1:0,M=r.height===b?1:0;e.pixelStorei(V,1),e.pixelStorei(q,r.width),e.pixelStorei(Z,0),e.pixelStorei(X,0),e.texImage3D(a,o,s,x,x,x,0,d,h,null);for(var k=0;k<F;++k){var D=k*x*C,T=k*x*M;e.pixelStorei(K,D),e.pixelStorei(Y,T),e.texSubImage3D(a,o,0,0,k,x,x,1,d,h,r)}Ot(e)}else e.texImage2D(a,o,s,d,h,r);jt(n)&&zt(e,t,n,i,l,s),It(e,t,n)}function Vt(){}function qt(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function Zt(e,t,r){return qt(e)?(setTimeout((function(){r(null,e)})),e):function(e,t,r){var n;if(r=r||Vt,t=void 0!==t?t:c.crossOrigin,t=function(e,t){return void 0!==t||function(e){if("undefined"!=typeof document){var t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}var r=new URL(location.href).origin;return new URL(e,location.href).origin===r}(e)?t:"anonymous"}(e,t),"undefined"!=typeof Image){n=new Image,void 0!==t&&(n.crossOrigin=t);var a=function(){n.removeEventListener("error",o),n.removeEventListener("load",l),n=null},o=function(){var t="couldn't load image: "+e;i.error(t),r(t,n),a()},l=function(){r(null,n),a()};return n.addEventListener("error",o),n.addEventListener("load",l),n.src=e,n}if("undefined"!=typeof ImageBitmap){var s,u,d=function(){r(s,u)},h={};t&&(h.mode="cors"),fetch(e,h).then((function(e){if(!e.ok)throw e;return e.blob()})).then((function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(e){u=e,setTimeout(d)})).catch((function(e){s=e,setTimeout(d)})),n=null}return n}(e,t,r)}function Kt(e,t,r){var n=(r=r||c.textureOptions).target||w;if(e.bindTexture(n,t),!1!==r.color){var a=function(e){return e=e||c.textureColor,h(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(r.color);if(n===S)for(var o=0;o<6;++o)e.texImage2D(M+o,0,y,1,1,0,y,tt,a);else n===A||n===E?e.texImage3D(n,0,y,1,1,1,0,y,tt,a):e.texImage2D(n,0,y,1,1,0,y,tt,a)}}function Yt(e,t,r,n){return n=n||Vt,r=r||c.textureOptions,Kt(e,t,r),Zt((r=Object.assign({},r)).src,r.crossOrigin,(function(a,o){a?n(a,t,o):(Gt(e,t,o,r),n(null,t,o))}))}function Xt(e,t,r,n){var i=(n=n||c.textureOptions).target||w;e.bindTexture(i,t);var l=n.width,s=n.height,u=n.depth,d=n.level||0,f=n.internalFormat||n.format||y,p=Et(f),m=n.format||p.format,g=n.type||Tt(0,r,p.type);if(h(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{var _=o.getTypedArrayTypeForGLType(g);r=new _(r)}var v,x=At(f,g),b=r.byteLength/x;if(b%1)throw"length wrong size for format: "+a.glEnumToString(e,m);if(i===A||i===E)if(l||s||u)!l||s&&u?!s||l&&u?(v=Bt(0,i,l,s,b/u),l=v.width,s=v.height):(v=Bt(0,i,l,u,b/s),l=v.width,u=v.height):(v=Bt(0,i,s,u,b/l),s=v.width,u=v.height);else{var F=Math.cbrt(b);if(F%1!=0)throw"can't guess cube size of array of numElements: "+b;l=F,s=F,u=F}else v=Bt(0,i,l,s,b),l=v.width,s=v.height;if(Ot(e),e.pixelStorei(V,n.unpackAlignment||1),Pt(e,n),i===S){var C=b/6*(x/r.BYTES_PER_ELEMENT);Nt(0,n).forEach((function(t){var n=C*t.ndx,a=r.subarray(n,n+C);e.texImage2D(t.face,d,f,l,s,0,m,g,a)}))}else i===A||i===E?e.texImage3D(i,d,f,l,s,u,0,m,g,r):e.texImage2D(i,d,f,l,s,0,m,g,r);return{width:l,height:s,depth:u,type:g}}function Jt(e,t,r){var n=r.target||w;e.bindTexture(n,t);var a=r.level||0,o=r.internalFormat||r.format||y,i=Et(o),l=r.format||i.format,s=r.type||i.type;if(Pt(e,r),n===S)for(var u=0;u<6;++u)e.texImage2D(M+u,a,o,r.width,r.height,0,l,s,null);else n===A||n===E?e.texImage3D(n,a,o,r.width,r.height,r.depth,0,l,s,null):e.texImage2D(n,a,o,r.width,r.height,0,l,s,null)}function Qt(e,t,r){r=r||Vt,t=t||c.textureOptions;var n=e.createTexture(),a=t.target||w,o=t.width||1,i=t.height||1,l=t.internalFormat||y;e.bindTexture(a,n),a===S&&(e.texParameteri(a,U,b),e.texParameteri(a,I,b));var s=t.src;if(s)if("function"==typeof s&&(s=s(e,t)),"string"==typeof s)Yt(e,n,t,r);else if(h(s)||Array.isArray(s)&&("number"==typeof s[0]||Array.isArray(s[0])||h(s[0]))){var u=Xt(e,n,s,t);o=u.width,i=u.height}else Array.isArray(s)&&("string"==typeof s[0]||qt(s[0]))?a===S?function(e,t,r,n){n=n||Vt;var a=r.src;if(6!==a.length)throw"there must be 6 urls for a cubemap";var o=r.level||0,i=r.internalFormat||r.format||y,l=Et(i),s=r.format||l.format,u=r.type||tt,d=r.target||w;if(d!==S)throw"target must be TEXTURE_CUBE_MAP";Kt(e,t,r),r=Object.assign({},r);var c,h=6,f=[],p=Ht(0,r);c=a.map((function(a,l){return Zt(a,r.crossOrigin,(m=p[l],function(a,l){--h,a?f.push(a):l.width!==l.height?f.push("cubemap face img is not a square: "+l.src):(Pt(e,r),e.bindTexture(d,t),5===h?Ht().forEach((function(t){e.texImage2D(t,o,i,s,u,l)})):e.texImage2D(m,o,i,s,u,l),jt(r)&&e.generateMipmap(d)),0===h&&n(f.length?f:void 0,t,c)}));var m}))}(e,n,t,r):function(e,t,r,n){n=n||Vt;var a=r.src,o=r.internalFormat||r.format||y,i=Et(o),l=r.format||i.format,s=r.type||tt,u=r.target||E;if(u!==A&&u!==E)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Kt(e,t,r),r=Object.assign({},r);var d,c=a.length,h=[],p=r.level||0,m=r.width,g=r.height,_=a.length,v=!0;d=a.map((function(a,i){return Zt(a,r.crossOrigin,(y=i,function(a,i){if(--c,a)h.push(a);else{if(Pt(e,r),e.bindTexture(u,t),v){v=!1,m=r.width||i.width,g=r.height||i.height,e.texImage3D(u,p,o,m,g,_,0,l,s,null);for(var x=0;x<_;++x)e.texSubImage3D(u,p,0,0,x,m,g,1,l,s,i)}else{var b,F=i;i.width===m&&i.height===g||(F=(b=f()).canvas,b.canvas.width=m,b.canvas.height=g,b.drawImage(i,0,0,m,g)),e.texSubImage3D(u,p,0,0,y,m,g,1,l,s,F),b&&F===b.canvas&&(b.canvas.width=0,b.canvas.height=0)}jt(r)&&e.generateMipmap(u)}0===c&&n(h.length?h:void 0,t,d)}));var y}))}(e,n,t,r):(Gt(e,n,s,t),o=s.width,i=s.height);else Jt(e,n,t);return jt(t)&&zt(e,n,t,o,i,l),It(e,n,t),n}wt[p]={numColorComponents:1},wt[g]={numColorComponents:1},wt[_]={numColorComponents:2},wt[m]={numColorComponents:3},wt[y]={numColorComponents:4},wt[vt]={numColorComponents:1},wt[xt]={numColorComponents:1},wt[gt]={numColorComponents:2},wt[_t]={numColorComponents:2},wt[m]={numColorComponents:3},wt[bt]={numColorComponents:3},wt[y]={numColorComponents:4},wt[Ft]={numColorComponents:4},wt[v]={numColorComponents:1},wt[x]={numColorComponents:2}},"./src/twgl-full.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0;var a={m4:!0,v3:!0,primitives:!0};t.v3=t.primitives=t.m4=void 0;var o=d(r("./src/m4.js"));t.m4=o;var i=d(r("./src/v3.js"));t.v3=i;var l=d(r("./src/primitives.js"));t.primitives=l;var s=r("./src/twgl.js");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===s[e]||(t[e]=s[e]))}))},"./src/twgl.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0;var a={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0,attributes:!0,textures:!0,utils:!0,draw:!0,framebuffers:!0,programs:!0,typedarrays:!0,vertexArrays:!0};t.addExtensionsToContext=x,t.framebuffers=t.draw=t.attributes=void 0,t.getContext=function(e,t){var r=function(e,t){for(var r=["webgl2","webgl","experimental-webgl"],n=null,a=0;a<r.length;++a)if(n=e.getContext(r[a],t)){y.addExtensionsToContext&&x(n);break}return n}(e,t);return r},t.getWebGLContext=function(e,t){var r=function(e,t){for(var r=["webgl","experimental-webgl"],n=null,a=0;a<r.length;++a)if(n=e.getContext(r[a],t)){y.addExtensionsToContext&&x(n);break}return n}(e,t);return r},t.programs=void 0,t.resizeCanvasToDisplaySize=function(e,t){t=t||1,t=Math.max(0,t);var r=e.clientWidth*t|0,n=e.clientHeight*t|0;return(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,!0)},t.setDefaults=function(e){l.copyExistingProperties(e,y),o.setAttributeDefaults_(e),i.setTextureDefaults_(e)},t.vertexArrays=t.utils=t.typedarrays=t.textures=void 0;var o=m(r("./src/attributes.js"));t.attributes=o,Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===o[e]||(t[e]=o[e]))}));var i=m(r("./src/textures.js"));t.textures=i,Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===i[e]||(t[e]=i[e]))}));var l=m(r("./src/helper.js")),s=m(r("./src/utils.js"));t.utils=s,Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===s[e]||(t[e]=s[e]))}));var u=m(r("./src/draw.js"));t.draw=u,Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===u[e]||(t[e]=u[e]))}));var d=m(r("./src/framebuffers.js"));t.framebuffers=d,Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===d[e]||(t[e]=d[e]))}));var c=m(r("./src/programs.js"));t.programs=c,Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===c[e]||(t[e]=c[e]))}));var h=m(r("./src/typedarrays.js"));t.typedarrays=h,Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===h[e]||(t[e]=h[e]))}));var f=m(r("./src/vertex-arrays.js"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}t.vertexArrays=f,Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in t&&t[e]===f[e]||(t[e]=f[e]))}));var y={addExtensionsToContext:!0},g=/^(.*?)_/;function _(e,t){s.glEnumToString(e,0);var r=e.getExtension(t);if(r){var n={},a=g.exec(t)[1],o="_"+a;for(var i in r){var u=r[i],d="function"==typeof u,c=d?a:o,h=i;i.endsWith(c)&&(h=i.substring(0,i.length-c.length)),void 0!==e[h]?d||e[h]===u||l.warn(h,e[h],u,i):d?e[h]=function(e){return function(){return e.apply(r,arguments)}}(u):(e[h]=u,n[h]=u)}n.constructor={name:r.constructor.name},s.glEnumToString(n,0)}return r}var v=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function x(e){for(var t=0;t<v.length;++t)_(e,v[t])}},"./src/typedarrays.js":(e,t)=>{t.__esModule=!0,t.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return r;if(e instanceof Uint8Array)return n;if(e instanceof Uint8ClampedArray)return n;if(e instanceof Int16Array)return a;if(e instanceof Uint16Array)return o;if(e instanceof Int32Array)return i;if(e instanceof Uint32Array)return l;if(e instanceof Float32Array)return s;throw new Error("unsupported typed array type")},t.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return r;if(e===Uint8Array)return n;if(e===Uint8ClampedArray)return n;if(e===Int16Array)return a;if(e===Uint16Array)return o;if(e===Int32Array)return i;if(e===Uint32Array)return l;if(e===Float32Array)return s;throw new Error("unsupported typed array type")},t.getTypedArrayTypeForGLType=function(e){var t=u[e];if(!t)throw new Error("unknown gl type");return t},t.isArrayBuffer=void 0;var r=5120,n=5121,a=5122,o=5123,i=5124,l=5125,s=5126,u={},d=u;d[r]=Int8Array,d[n]=Uint8Array,d[a]=Int16Array,d[o]=Uint16Array,d[i]=Int32Array,d[l]=Uint32Array,d[s]=Float32Array,d[32819]=Uint16Array,d[32820]=Uint16Array,d[33635]=Uint16Array,d[5131]=Uint16Array,d[33640]=Uint32Array,d[35899]=Uint32Array,d[35902]=Uint32Array,d[36269]=Uint32Array,d[34042]=Uint32Array,t.isArrayBuffer="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer}},"./src/utils.js":(e,t)=>{var r,n;t.__esModule=!0,t.glEnumToString=void 0,t.isWebGL1=function(e){return!e.texStorage2D},t.isWebGL2=function(e){return!!e.texStorage2D},t.glEnumToString=(r={},n={},function(e,t){return function(e){var t=e.constructor.name;if(!r[t]){for(var a in e)if("number"==typeof e[a]){var o=n[e[a]];n[e[a]]=o?"".concat(o," | ").concat(a):a}r[t]=!0}}(e),n[t]||("number"==typeof t?"0x".concat(t.toString(16)):t)})},"./src/v3.js":(e,t)=>{t.__esModule=!0,t.add=function(e,t,n){return(n=n||new r(3))[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n},t.copy=function(e,t){return(t=t||new r(3))[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.create=function(e,t,n){var a=new r(3);return e&&(a[0]=e),t&&(a[1]=t),n&&(a[2]=n),a},t.cross=function(e,t,n){n=n||new r(3);var a=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return n[0]=e[1]*t[2]-e[2]*t[1],n[1]=a,n[2]=o,n},t.distance=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)},t.distanceSq=function(e,t){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a},t.divScalar=function(e,t,n){return(n=n||new r(3))[0]=e[0]/t,n[1]=e[1]/t,n[2]=e[2]/t,n},t.divide=function(e,t,n){return(n=n||new r(3))[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},t.length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},t.lengthSq=function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},t.lerp=function(e,t,n,a){return(a=a||new r(3))[0]=e[0]+n*(t[0]-e[0]),a[1]=e[1]+n*(t[1]-e[1]),a[2]=e[2]+n*(t[2]-e[2]),a},t.lerpV=function(e,t,n,a){return(a=a||new r(3))[0]=e[0]+n[0]*(t[0]-e[0]),a[1]=e[1]+n[1]*(t[1]-e[1]),a[2]=e[2]+n[2]*(t[2]-e[2]),a},t.max=function(e,t,n){return(n=n||new r(3))[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n},t.min=function(e,t,n){return(n=n||new r(3))[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.min(e[2],t[2]),n},t.mulScalar=function(e,t,n){return(n=n||new r(3))[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n},t.multiply=function(e,t,n){return(n=n||new r(3))[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n},t.negate=function(e,t){return(t=t||new r(3))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},t.normalize=function(e,t){t=t||new r(3);var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=Math.sqrt(n);return a>1e-5?(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a):(t[0]=0,t[1]=0,t[2]=0),t},t.setDefaultType=function(e){var t=r;return r=e,t},t.subtract=function(e,t,n){return(n=n||new r(3))[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n};var r=Float32Array},"./src/vertex-arrays.js":(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.__esModule=!0,t.createVAOAndSetAttributes=l,t.createVAOFromBufferInfo=function(e,t,r){return l(e,t.attribSetters||t,r.attribs,r.indices)},t.createVertexArrayInfo=function(e,t,r){var n=e.createVertexArray();return e.bindVertexArray(n),t.length||(t=[t]),t.forEach((function(t){a.setBuffersAndAttributes(e,t,r)})),e.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:n}};var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var s=i?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(a,l,s):a[l]=e[l]}return a.default=e,r&&r.set(e,a),a}(r("./src/programs.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var i=34963;function l(e,t,r,n){var o=e.createVertexArray();return e.bindVertexArray(o),a.setAttributes(t,r),n&&e.bindBuffer(i,n),e.bindVertexArray(null),o}}},t={},r=function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}("./src/twgl-full.js");return r})(),e.exports=t()},8156:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(5748),t),a(r(7604),t),a(r(8219),t),a(r(2462),t),a(r(6919),t),a(r(1722),t),a(r(4849),t),a(r(6303),t)},8219:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(7293),t),a(r(1278),t),a(r(6940),t),a(r(1017),t)},8344:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform vec3 u_cameraPos;\r\n\r\n// Simple lighting params\r\nuniform vec4 u_ambientColor;\r\nuniform vec4 u_lightColor;\r\nuniform vec3 u_lightDir;\r\n\r\nuniform int u_pixelShader;\r\nuniform int u_blendMode;\r\nuniform bool u_unlit;\r\n\r\nuniform sampler2D u_texture1;\r\nuniform sampler2D u_texture2;\r\nuniform sampler2D u_texture3;\r\n\r\nvarying vec2 v_texCoord1;\r\nvarying vec2 v_texCoord2;\r\nvarying vec2 v_texCoord3;\r\nvarying vec4 v_color1;\r\nvarying vec4 v_color2;\r\nvarying vec3 v_normal;\r\nvarying vec3 v_position;\r\n\r\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\r\n\r\nvec3 calculateSpecular(float texAlpha) {\r\n    vec3 normal = normalize(v_normal);\r\n    vec3 eyeDir = normalize(u_cameraPos - v_position.xyz);\r\n    vec3 halfDir = normalize(u_lightDir + eyeDir);\r\n    float attenuationDir = saturate(dot(normal, u_lightDir));\r\n    float spec = (1.25 * pow(saturate(dot(normal, halfDir)), 8.0));\r\n    vec3 specTerm = ((((vec3(mix(pow((1.0 - saturate(dot(u_lightDir, halfDir))), 5.0), 1.0, texAlpha)) * spec) * u_lightColor.rgb) * attenuationDir));\r\n    return specTerm;\r\n}\r\n\r\nvoid main() {\r\n    vec4 texture1 = texture2D(u_texture1, v_texCoord1);\r\n    vec4 texture2 = texture2D(u_texture2, v_texCoord2);\r\n    vec4 texture3 = texture2D(u_texture3, v_texCoord3);\r\n\r\n    // BlendMode AlphaKey\r\n    if (u_blendMode == 1) {\r\n        if (texture1.a < 0.501960814) {\r\n            discard;\r\n        }\r\n    }\r\n\r\n    vec4 outputColor = vec4(0.0, 0.0, 0.0, 1.0);\r\n    vec3 materialColor = vec3(0.0);\r\n    vec3 specular = vec3(0.0);\r\n    vec3 emissiveColor = vec3(0.0);\r\n    float finalOpacity = 0.0;\r\n    float distFade = 1.0;\r\n;\r\n    if (u_pixelShader == 21) {\r\n        // None\r\n        materialColor = texture1.rgb * texture2.rgb;\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 0) {\r\n        // DiffuseT1\r\n        materialColor = texture1.rgb;\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 1) {\r\n        // Specular\r\n        materialColor = texture1.rgb;\r\n        specular = calculateSpecular(texture1.a);\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 2) {\r\n        // Metal\r\n        materialColor = texture1.rgb;\r\n        specular = calculateSpecular(((texture1 * 4.0) * texture1.a).x);\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 3) {\r\n        // Env\r\n        materialColor = texture1.rgb ;\r\n        emissiveColor = texture2.rgb * texture1.a * distFade;\r\n        finalOpacity = 1.0;\r\n    } else if (u_pixelShader == 4) {\r\n        // Opaque\r\n        materialColor = texture1.rgb ;\r\n        finalOpacity = 1.0;\r\n    } else if (u_pixelShader == 5) {\r\n        // EnvMetal\r\n        materialColor = texture1.rgb ;\r\n        emissiveColor = (((texture1.rgb * texture1.a) * texture2.rgb) * distFade);\r\n        finalOpacity = 1.0;\r\n    } else if (u_pixelShader == 6) {\r\n        // TwoLayerDiffuse\r\n        vec3 layer1 = texture1.rgb;\r\n        vec3 layer2 = mix(layer1, texture2.rgb, texture2.a);\r\n        materialColor = mix(layer2, layer1, v_color2.a);\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 7) {\r\n        // TwoLayerEnvMetal\r\n        vec4 colorMix = mix(texture1, texture2, 1.0 - v_color2.a);\r\n        materialColor = colorMix.rgb ;\r\n        emissiveColor = (colorMix.rgb * colorMix.a) * texture3.rgb * distFade;\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 8) {\r\n        // TwoLayerTerrain\r\n        vec3 layer1 = texture1.rgb;\r\n        vec3 layer2 = texture2.rgb;\r\n        materialColor = mix(layer2, layer1, v_color2.a);\r\n        specular = calculateSpecular(texture2.a * (1.0 - v_color2.a));\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 9) {\r\n        // DiffuseEmissive\r\n        materialColor = texture1.rgb ;\r\n        emissiveColor = texture2.rgb * texture2.a * v_color2.a;\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 10) {\r\n        // MaskedEnvMetal\r\n        float mixFactor = clamp((texture3.a * v_color2.a), 0.0, 1.0);\r\n        materialColor =\r\n            mix(mix(((texture1.rgb * texture2.rgb) * 2.0), texture3.rgb, mixFactor), texture1.rgb, texture1.a);\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 11) {\r\n        // EnvMetalEmissive\r\n        materialColor = texture1.rgb ;\r\n        emissiveColor =\r\n            (\r\n                ((texture1.rgb * texture1.a) * texture2.rgb) +\r\n                ((texture3.rgb * texture3.a) * v_color2.a)\r\n            );\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 12) {\r\n        // TwoLayerDiffuseOpaque\r\n        materialColor = mix(texture2.rgb, texture1.rgb, v_color2.a);\r\n        finalOpacity = 1.0;\r\n    } else if (u_pixelShader == 13) {\r\n        // TwoLayerDiffuseEmissive\r\n        vec3 t1diffuse = (texture2.rgb * (1.0 - texture2.a));\r\n        materialColor = mix(t1diffuse, texture1.rgb, v_color2.a);\r\n        emissiveColor = (texture2.rgb * texture2.a) * (1.0 - v_color2.a);\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 14) {\r\n        // AdditiveMaskedEnvMetal\r\n        materialColor = mix(\r\n            (texture1.rgb * texture2.rgb * 2.0) + (texture3.rgb * clamp(texture3.a * v_color2.a, 0.0, 1.0)),\r\n            texture1.rgb,\r\n            vec3(texture1.a)\r\n        );\r\n        finalOpacity = 1.0;\r\n    } else if (u_pixelShader == 15) {\r\n        // TwoLayerDiffuseMod2x\r\n        vec3 layer1 = texture1.rgb;\r\n        vec3 layer2 = mix(layer1, texture2.rgb, vec3(texture2.a));\r\n        vec3 layer3 = mix(layer2, layer1, vec3(v_color2.a));\r\n        materialColor = layer3 * texture3.rgb * 2.0;\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 16) {\r\n        // TwoLayerDiffuseMod2xNA\r\n        vec3 layer1 = ((texture1.rgb * texture2.rgb) * 2.0);\r\n        materialColor = mix(texture1.rgb, layer1, vec3(v_color2.a)) ;\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 17) {\r\n        // TwoLayerDiffuseAlpha\r\n        vec3 layer1 = texture1.rgb;\r\n        vec3 layer2 = mix(layer1, texture2.rgb, vec3(texture2.a));\r\n        vec3 layer3 = mix(layer2, layer1, vec3(texture3.a));\r\n        materialColor = ((layer3 * texture3.rgb) * 2.0);\r\n        finalOpacity = texture1.a;\r\n    } else if (u_pixelShader == 18) {\r\n        // Lod\r\n        materialColor = texture1.rgb;\r\n        finalOpacity = texture1.a;\r\n    } else {\r\n        // unsupported shader\r\n        gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\r\n        return;\r\n    }\r\n;\r\n    if (!u_unlit) {\r\n        vec4 lightColor = u_ambientColor;\r\n        float diffStrength = max(0.0, dot(v_normal, u_lightDir));\r\n        lightColor += u_lightColor * diffStrength;\r\n        lightColor = clamp(lightColor, vec4(0,0,0,0), vec4(1,1,1,1));\r\n        outputColor.rgb = materialColor * lightColor.rgb;\r\n        outputColor.a = 1.0;\r\n    } else {\r\n        outputColor = vec4(materialColor, 1.0);\r\n    }\r\n    outputColor += vec4(specular, 0.0);\r\n    outputColor += vec4(emissiveColor, 0);\r\n\r\n    gl_FragColor = outputColor;\r\n}"},8389:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const n="precision mediump float;\r\n\r\nuniform int u_vertexShader;\r\n\r\nuniform mat4 u_modelMatrix;\r\nuniform mat4 u_viewMatrix;\r\nuniform mat4 u_projectionMatrix;\r\n\r\nvarying vec2 v_texCoord1;\r\nvarying vec2 v_texCoord2;\r\nvarying vec2 v_texCoord3;\r\nvarying vec4 v_color1;\r\nvarying vec4 v_color2;\r\nvarying vec3 v_normal;\r\nvarying vec3 v_position;\r\n\r\nattribute vec3 a_position;\r\nattribute vec3 a_normal;\r\nattribute vec4 a_color1;\r\nattribute vec4 a_color2;\r\nattribute vec2 a_texCoord1;\r\nattribute vec2 a_texCoord2;\r\nattribute vec2 a_texCoord3;\r\n\r\nvec3 normalizedMatrixMultiply(mat4 matrix, vec3 vector) {\r\n    // Pull out the squared scaling.\r\n    vec3 t_SqScale = vec3(\r\n        dot(matrix[0], matrix[0]), \r\n        dot(matrix[1], matrix[1]), \r\n        dot(matrix[2], matrix[2])\r\n    );\r\n    return normalize(matrix * vec4(vector / t_SqScale, 0.0)).xyz;\r\n}\r\n\r\nvec2 posToTexCoord(vec3 pos, vec3 normal) {\r\n    vec3 reflection = reflect(normalize(pos), normal);\r\n    return normalize(reflection).xy * 0.5 + vec2(0.5);\r\n}   \r\n\r\nvoid main() {\r\n    v_position = (u_modelMatrix * vec4(a_position, 1.0)).xyz;\r\n    v_normal = normalizedMatrixMultiply(u_modelMatrix, a_normal);\r\n    v_color1 = a_color1.bgra;\r\n    v_color2 = a_color2.rgba;\r\n\r\n    vec3 viewPosition = (u_viewMatrix * vec4(v_position, 1.0)).xyz;\r\n    vec3 viewNormal = (u_viewMatrix * vec4(v_normal, 0.0)).xyz;\r\n    gl_Position = u_projectionMatrix * vec4(viewPosition, 1.0);\r\n\r\n    if (u_vertexShader == 9) { \r\n        // None\r\n       v_texCoord1 = a_texCoord1;\r\n       v_texCoord2 = a_texCoord2;\r\n       v_texCoord3 = a_texCoord3;\r\n   } else if (u_vertexShader == 0) {\r\n    //DiffuseT1;\r\n       v_texCoord1 = a_texCoord1;\r\n       v_texCoord2 = a_texCoord2; //not used\r\n       v_texCoord3 = a_texCoord3; //not used\r\n   } else if (u_vertexShader == 1) {\r\n    //DiffuseT1Ref1\r\n       v_texCoord1 = a_texCoord1;\r\n       v_texCoord2 = reflect(normalize(viewPosition), viewNormal).xy;\r\n       v_texCoord3 = a_texCoord3; //not used\r\n   } else if (u_vertexShader == 2) {\r\n    //DiffuseT1EnvT2\r\n       v_texCoord1 = a_texCoord1;\r\n       v_texCoord2 = posToTexCoord(viewPosition, viewNormal);\r\n       v_texCoord3 = a_texCoord3;\r\n   } else if (u_vertexShader == 3) {\r\n    // SpecularT1\r\n       v_texCoord1 = a_texCoord1;\r\n       v_texCoord2 = a_texCoord2; //not used\r\n       v_texCoord3 = a_texCoord3; //not used\r\n   } else if (u_vertexShader == 4) {\r\n    // DiffuseComp\r\n       v_texCoord1 = a_texCoord1;\r\n       v_texCoord2 = a_texCoord2; //not used\r\n       v_texCoord3 = a_texCoord3; //not used\r\n   } else if (u_vertexShader == 5) {\r\n    //DiffuseCompRefl\r\n       v_texCoord1 = a_texCoord1;\r\n       v_texCoord2 = a_texCoord2;\r\n       v_texCoord3 = reflect(normalize(viewPosition), viewNormal).xy;\r\n   } else if (u_vertexShader == 6) {\r\n    //DiffuseCompTerrain\r\n       v_texCoord1 = a_texCoord1;\r\n       v_texCoord2 = viewPosition.xy * -0.239999995;\r\n       v_texCoord3 = a_texCoord3; //not used\r\n   } else if (u_vertexShader == 7) {\r\n    //DiffuseCompAlpha\r\n       v_texCoord1 = a_texCoord1;\r\n       v_texCoord2 = viewPosition.xy * -0.239999995;\r\n       v_texCoord3 = a_texCoord3; //not used\r\n   } else if (u_vertexShader == 8) {\r\n    // Parralax\r\n       v_texCoord1 = a_texCoord1;\r\n       v_texCoord2 = a_texCoord2;\r\n       v_texCoord3 = a_texCoord3;\r\n   }\r\n}"},8411:(e,t,r)=>{"use strict";const{_tr_init:n,_tr_stored_block:a,_tr_flush_block:o,_tr_tally:i,_tr_align:l}=r(3665),s=r(3269),u=r(4823),d=r(4674),{Z_NO_FLUSH:c,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:f,Z_FINISH:p,Z_BLOCK:m,Z_OK:y,Z_STREAM_END:g,Z_STREAM_ERROR:_,Z_DATA_ERROR:v,Z_BUF_ERROR:x,Z_DEFAULT_COMPRESSION:b,Z_FILTERED:F,Z_HUFFMAN_ONLY:C,Z_RLE:w,Z_FIXED:S,Z_DEFAULT_STRATEGY:A,Z_UNKNOWN:E,Z_DEFLATED:M}=r(9681),k=258,D=262,T=42,B=113,L=666,P=(e,t)=>(e.msg=d[t],t),O=e=>2*e-(e>4?9:0),U=e=>{let t=e.length;for(;--t>=0;)e[t]=0},I=e=>{let t,r,n,a=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=a?r-a:0}while(--t);t=a,n=t;do{r=e.prev[--n],e.prev[n]=r>=a?r-a:0}while(--t)};let W=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const R=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},z=(e,t)=>{o(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,R(e.strm)},j=(e,t)=>{e.pending_buf[e.pending++]=t},H=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},N=(e,t,r,n)=>{let a=e.avail_in;return a>n&&(a=n),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),1===e.state.wrap?e.adler=s(e.adler,t,a,r):2===e.state.wrap&&(e.adler=u(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},G=(e,t)=>{let r,n,a=e.max_chain_length,o=e.strstart,i=e.prev_length,l=e.nice_match;const s=e.strstart>e.w_size-D?e.strstart-(e.w_size-D):0,u=e.window,d=e.w_mask,c=e.prev,h=e.strstart+k;let f=u[o+i-1],p=u[o+i];e.prev_length>=e.good_match&&(a>>=2),l>e.lookahead&&(l=e.lookahead);do{if(r=t,u[r+i]===p&&u[r+i-1]===f&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<h);if(n=k-(h-o),o=h-k,n>i){if(e.match_start=t,i=n,n>=l)break;f=u[o+i-1],p=u[o+i]}}}while((t=c[t&d])>s&&0!=--a);return i<=e.lookahead?i:e.lookahead},V=e=>{const t=e.w_size;let r,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-D)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),I(e),n+=t),0===e.strm.avail_in)break;if(r=N(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=W(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=W(e,e.ins_h,e.window[a+3-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<D&&0!==e.strm.avail_in)},q=(e,t)=>{let r,n,o,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,l=0,s=e.strm.avail_in;do{if(r=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>o&&(r=o),r<i&&(0===r&&t!==p||t===c||r!==n+e.strm.avail_in))break;l=t===p&&r===n+e.strm.avail_in?1:0,a(e,0,0,l),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,R(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(N(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===l);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),l?4:t!==c&&t!==p&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(N(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,i=o>e.w_size?e.w_size:o,n=e.strstart-e.block_start,(n>=i||(n||t===p)&&t!==c&&0===e.strm.avail_in&&n<=o)&&(r=n>o?o:n,l=t===p&&0===e.strm.avail_in&&r===n?1:0,a(e,e.block_start,r,l),e.block_start+=r,R(e.strm)),l?3:1)},Z=(e,t)=>{let r,n;for(;;){if(e.lookahead<D){if(V(e),e.lookahead<D&&t===c)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=W(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-D&&(e.match_length=G(e,r)),e.match_length>=3)if(n=i(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=W(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=W(e,e.ins_h,e.window[e.strstart+1]);else n=i(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(z(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===p?(z(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(z(e,!1),0===e.strm.avail_out)?1:2},K=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<D){if(V(e),e.lookahead<D&&t===c)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=W(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-D&&(e.match_length=G(e,r),e.match_length<=5&&(e.strategy===F||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=i(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=W(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(z(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=i(e,0,e.window[e.strstart-1]),n&&z(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=i(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===p?(z(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(z(e,!1),0===e.strm.avail_out)?1:2};function Y(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}const X=[new Y(0,0,0,0,q),new Y(4,4,8,4,Z),new Y(4,5,16,8,Z),new Y(4,6,32,32,Z),new Y(4,4,16,16,K),new Y(8,16,32,32,K),new Y(8,16,128,128,K),new Y(8,32,128,256,K),new Y(32,128,258,1024,K),new Y(32,258,258,4096,K)];function J(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=M,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),U(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Q=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==T&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==B&&t.status!==L?1:0},$=e=>{if(Q(e))return P(e,_);e.total_in=e.total_out=0,e.data_type=E;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?T:B,e.adler=2===t.wrap?0:1,t.last_flush=-2,n(t),y},ee=e=>{const t=$(e);var r;return t===y&&((r=e.state).window_size=2*r.w_size,U(r.head),r.max_lazy_match=X[r.level].max_lazy,r.good_match=X[r.level].good_length,r.nice_match=X[r.level].nice_length,r.max_chain_length=X[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},te=(e,t,r,n,a,o)=>{if(!e)return _;let i=1;if(t===b&&(t=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),a<1||a>9||r!==M||n<8||n>15||t<0||t>9||o<0||o>S||8===n&&1!==i)return P(e,_);8===n&&(n=9);const l=new J;return e.state=l,l.strm=e,l.status=T,l.wrap=i,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new Uint8Array(2*l.w_size),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=3*(l.lit_bufsize-1),l.level=t,l.strategy=o,l.method=r,ee(e)};e.exports.deflateInit=(e,t)=>te(e,t,M,15,8,A),e.exports.deflateInit2=te,e.exports.deflateReset=ee,e.exports.deflateResetKeep=$,e.exports.deflateSetHeader=(e,t)=>Q(e)||2!==e.state.wrap?_:(e.state.gzhead=t,y),e.exports.deflate=(e,t)=>{if(Q(e)||t>m||t<0)return e?P(e,_):_;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===L&&t!==p)return P(e,0===e.avail_out?x:_);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(R(e),0===e.avail_out)return r.last_flush=-1,y}else if(0===e.avail_in&&O(t)<=O(n)&&t!==p)return P(e,x);if(r.status===L&&0!==e.avail_in)return P(e,x);if(r.status===T&&0===r.wrap&&(r.status=B),r.status===T){let t=M+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=C||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,H(r,t),0!==r.strstart&&(H(r,e.adler>>>16),H(r,65535&e.adler)),e.adler=1,r.status=B,R(e),0!==r.pending)return r.last_flush=-1,y}if(57===r.status)if(e.adler=0,j(r,31),j(r,139),j(r,8),r.gzhead)j(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),j(r,255&r.gzhead.time),j(r,r.gzhead.time>>8&255),j(r,r.gzhead.time>>16&255),j(r,r.gzhead.time>>24&255),j(r,9===r.level?2:r.strategy>=C||r.level<2?4:0),j(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(j(r,255&r.gzhead.extra.length),j(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=u(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(j(r,0),j(r,0),j(r,0),j(r,0),j(r,0),j(r,9===r.level?2:r.strategy>=C||r.level<2?4:0),j(r,3),r.status=B,R(e),0!==r.pending)return r.last_flush=-1,y;if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=u(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=a,R(e),0!==r.pending)return r.last_flush=-1,y;t=0,n-=a}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=u(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=u(e.adler,r.pending_buf,r.pending-n,n)),R(e),0!==r.pending)return r.last_flush=-1,y;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,j(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=u(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=u(e.adler,r.pending_buf,r.pending-n,n)),R(e),0!==r.pending)return r.last_flush=-1,y;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,j(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=u(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(R(e),0!==r.pending))return r.last_flush=-1,y;j(r,255&e.adler),j(r,e.adler>>8&255),e.adler=0}if(r.status=B,R(e),0!==r.pending)return r.last_flush=-1,y}if(0!==e.avail_in||0!==r.lookahead||t!==c&&r.status!==L){let n=0===r.level?q(r,t):r.strategy===C?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(V(e),0===e.lookahead)){if(t===c)return 1;break}if(e.match_length=0,r=i(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(z(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===p?(z(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(z(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===w?((e,t)=>{let r,n,a,o;const l=e.window;for(;;){if(e.lookahead<=k){if(V(e),e.lookahead<=k&&t===c)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(a=e.strstart-1,n=l[a],n===l[++a]&&n===l[++a]&&n===l[++a])){o=e.strstart+k;do{}while(n===l[++a]&&n===l[++a]&&n===l[++a]&&n===l[++a]&&n===l[++a]&&n===l[++a]&&n===l[++a]&&n===l[++a]&&a<o);e.match_length=k-(o-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=i(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=i(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(z(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===p?(z(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(z(e,!1),0===e.strm.avail_out)?1:2})(r,t):X[r.level].func(r,t);if(3!==n&&4!==n||(r.status=L),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),y;if(2===n&&(t===h?l(r):t!==m&&(a(r,0,0,!1),t===f&&(U(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),R(e),0===e.avail_out))return r.last_flush=-1,y}return t!==p?y:r.wrap<=0?g:(2===r.wrap?(j(r,255&e.adler),j(r,e.adler>>8&255),j(r,e.adler>>16&255),j(r,e.adler>>24&255),j(r,255&e.total_in),j(r,e.total_in>>8&255),j(r,e.total_in>>16&255),j(r,e.total_in>>24&255)):(H(r,e.adler>>>16),H(r,65535&e.adler)),R(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?y:g)},e.exports.deflateEnd=e=>{if(Q(e))return _;const t=e.state.status;return e.state=null,t===B?P(e,v):y},e.exports.deflateSetDictionary=(e,t)=>{let r=t.length;if(Q(e))return _;const n=e.state,a=n.wrap;if(2===a||1===a&&n.status!==T||n.lookahead)return _;if(1===a&&(e.adler=s(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===a&&(U(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const o=e.avail_in,i=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,V(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=W(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,V(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=i,e.input=l,e.avail_in=o,n.wrap=a,y},e.exports.deflateInfo="pako deflate (from Nodeca project)"},8803:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(7229),t),a(r(2690),t)},9174:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0;const n=r(1278);t.Camera=class{constructor(){this.viewMatrix=n.Float44.identity(),n.Float44.rotateX(this.viewMatrix,-90*Math.PI/180,this.viewMatrix),n.Float44.invert(this.viewMatrix),this.position=n.Float3.zero()}initialize(e){this.engine=e}update(e){}dispose(){this.isDisposing=!0,this.viewMatrix=null,this.position=null,this.lastBoundingBox=null}getViewMatrix(){return this.viewMatrix}getPosition(){return this.position}resizeForBoundingBox(e){if(this.lastBoundingBox=e,e){const[t,r]=e;n.Float3.copy(r,this.position),n.Float44.lookAt(this.position,[0,0,0],[0,0,1],this.viewMatrix),n.Float44.invert(this.viewMatrix,this.viewMatrix)}}getBoundingBox(){return this.lastBoundingBox}}},9266:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasFlagsActive=function(e,t){return(e&t)===t},a(r(3975),t)},9551:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(4741),t),a(r(7243),t),a(r(4176),t)},9674:e=>{"use strict";const t=16209;e.exports=function(e,r){let n,a,o,i,l,s,u,d,c,h,f,p,m,y,g,_,v,x,b,F,C,w,S,A;const E=e.state;n=e.next_in,S=e.input,a=n+(e.avail_in-5),o=e.next_out,A=e.output,i=o-(r-e.avail_out),l=o+(e.avail_out-257),s=E.dmax,u=E.wsize,d=E.whave,c=E.wnext,h=E.window,f=E.hold,p=E.bits,m=E.lencode,y=E.distcode,g=(1<<E.lenbits)-1,_=(1<<E.distbits)-1;e:do{p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),v=m[f&g];t:for(;;){if(x=v>>>24,f>>>=x,p-=x,x=v>>>16&255,0===x)A[o++]=65535&v;else{if(!(16&x)){if(64&x){if(32&x){E.mode=16191;break e}e.msg="invalid literal/length code",E.mode=t;break e}v=m[(65535&v)+(f&(1<<x)-1)];continue t}for(b=65535&v,x&=15,x&&(p<x&&(f+=S[n++]<<p,p+=8),b+=f&(1<<x)-1,f>>>=x,p-=x),p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),v=y[f&_];;){if(x=v>>>24,f>>>=x,p-=x,x=v>>>16&255,16&x){if(F=65535&v,x&=15,p<x&&(f+=S[n++]<<p,p+=8,p<x&&(f+=S[n++]<<p,p+=8)),F+=f&(1<<x)-1,F>s){e.msg="invalid distance too far back",E.mode=t;break e}if(f>>>=x,p-=x,x=o-i,F>x){if(x=F-x,x>d&&E.sane){e.msg="invalid distance too far back",E.mode=t;break e}if(C=0,w=h,0===c){if(C+=u-x,x<b){b-=x;do{A[o++]=h[C++]}while(--x);C=o-F,w=A}}else if(c<x){if(C+=u+c-x,x-=c,x<b){b-=x;do{A[o++]=h[C++]}while(--x);if(C=0,c<b){x=c,b-=x;do{A[o++]=h[C++]}while(--x);C=o-F,w=A}}}else if(C+=c-x,x<b){b-=x;do{A[o++]=h[C++]}while(--x);C=o-F,w=A}for(;b>2;)A[o++]=w[C++],A[o++]=w[C++],A[o++]=w[C++],b-=3;b&&(A[o++]=w[C++],b>1&&(A[o++]=w[C++]))}else{C=o-F;do{A[o++]=A[C++],A[o++]=A[C++],A[o++]=A[C++],b-=3}while(b>2);b&&(A[o++]=A[C++],b>1&&(A[o++]=A[C++]))}break}if(64&x){e.msg="invalid distance code",E.mode=t;break e}v=y[(65535&v)+(f&(1<<x)-1)]}}break}}while(n<a&&o<l);b=p>>3,n-=b,p-=b<<3,f&=(1<<p)-1,e.next_in=n,e.next_out=o,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=o<l?l-o+257:257-(o-l),E.hold=f,E.bits=p}},9681:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},9805:e=>{"use strict";const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);e.exports.assign=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const n=r.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const r in n)t(n,r)&&(e[r]=n[r])}}return e},e.exports.flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,a=e.length;t<a;t++){let a=e[t];r.set(a,n),n+=a.length}return r}},9932:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderObject=void 0;const n=r(1278);t.BaseRenderObject=class{constructor(){this.children=[],this.modelMatrix=n.Float44.identity(),this.invModelMatrix=n.Float44.invert(this.modelMatrix),this.isDisposing=!1}initialize(e){this.engine=e}update(e){if(this.isDisposing)return;const t=[];for(const e of this.children)e.isDisposing&&t.push(e);this.children=this.children.filter((e=>-1===t.indexOf(e)))}dispose(){if(this.isDisposing=!0,this.children)for(const e of this.children)e.dispose();this.children=null,this.engine=null,this.modelMatrix=null,this.invModelMatrix=null}setModelMatrix(e,t,r){n.Float44.identity(this.modelMatrix),null!==e&&n.Float44.translate(this.modelMatrix,e,this.modelMatrix),null!=t&&n.Float44.multiply(this.modelMatrix,n.Float44.fromQuat(t),this.modelMatrix),null!=r&&n.Float44.scale(this.modelMatrix,r,this.modelMatrix);let a=this.parent;for(;a;)n.Float44.multiply(this.modelMatrix,a.modelMatrix,this.modelMatrix),a=a.parent;n.Float44.invert(this.modelMatrix,this.invModelMatrix)}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(8156)})()));